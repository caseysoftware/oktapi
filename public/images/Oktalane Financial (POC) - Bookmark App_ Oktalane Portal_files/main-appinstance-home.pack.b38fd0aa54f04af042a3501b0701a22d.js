var initCourageApp=webpackJsonpinitCourageApp([14],[function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}var s=i(287),o=n(s),a=i(550),r=n(a);e.exports=function(e,t){var i=new o.default(e);i.start(),saasure.GroupPicker=new r.default(t),saasure.GroupPicker.render()}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,i){var n,s,o;!function(a,r){"use strict";s=[i(3),i(5)],n=r,o="function"==typeof n?n.apply(t,s):n,!(void 0!==o&&(e.exports=o))}(this,function(e,t){"use strict";function i(t){return e.find(l,function(e){return e.model===t})}function n(e,t){this.model=e,this.set(t)}function s(t){if(t.options.delayed)return void o(t);if(t.active()!==!0)return void t.stop({silent:!0});var i=e.extend({},t.options,{success:function(){t.trigger("success",t.model),o(t)},error:function(){t.stop({silent:!0}),t.trigger("error",t.model)}});t.trigger("fetch",t.model),t.xhr=t.model.fetch(i)}function o(t){return t.options.condition(t.model)!==!0?(t.stop({silent:!0}),void t.trigger("complete",t.model)):(t.options.delayed=!1,void(t.timeoutId=e.delay(s,t.options.delay,t)))}var a={delay:1e3,condition:function(){return!0}},r=["start","stop","fetch","success","error","complete"],l=[],p={get:function(e,t){var s=i(e);return s?s.set(t):(s=new n(e,t),l.push(s)),t&&t.autostart===!0&&s.start({silent:!0}),s},size:function(){return l.length},reset:function(){for(;l.length;)l.pop().stop()}};return e.extend(n.prototype,t.Events,{set:function(i){return this.off(),this.options=e.extend({},a,i||{}),e.each(r,function(t){var i=this.options[t];e.isFunction(i)&&this.on(t,i,this)},this),this.model instanceof t.Model&&this.model.on("destroy",this.stop,this),this.stop({silent:!0})},start:function(e){return this.active()||(e&&e.silent||this.trigger("start",this.model),this.options.active=!0,s(this)),this},stop:function(e){return e&&e.silent||this.trigger("stop",this.model),this.options.active=!1,this.xhr&&this.xhr.abort&&this.xhr.abort(),this.xhr=null,clearTimeout(this.timeoutId),this.timeoutId=null,this},active:function(){return this.options.active===!0}}),p})},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,i){var n,s;n=[i(2),i(105)],s=function(e){var t=e._,i=e.$,n=function(e){return!!e},s=function(e){return{id:e.id,name:e.profile.firstName+" "+e.profile.lastName,email:e.profile.email}},o=e.tpl('\t        <li class="active-result clearfix">\t          <p>{{name}} {{#if email}}({{email}}){{/if}}</p>\t        </li>\t      '),a=e.tpl('<p class="no-suggestion">{{i18n code="searchResult.empty"}}</p>');return e.View.extend({className:"preview-user-picker o-form-input-group float-l",template:'\t      <div class="o-form-input-group-controls">\t        <div class="o-form-label-inline">\t          <span class="icon visibility-16"></span>\t          <span>{{i18n code="preview"}}</span>\t        </div>\t        <span class="input-fix o-form-control">\t          <input type="text" \t            placeholder="{{placeholder}}"/>\t        </span>\t      </div>\t    ',field:"userId",initialize:function(){var e=this;this.options.field&&(this.field=this.options.field),t.bindAll(this,"resetPicker","clearPicker"),this.source=new Bloodhound({remote:{url:this.options.userApiUrl||"/api/v1/users?q=%QUERY&limit=10&expand=stats",filter:function(i){return t.chain(i).map(e.options.parseResponse||t.identity).filter(n).map(s).value()}},datumTokenizer:Bloodhound.tokenizers.obj.whitespace("value"),queryTokenizer:Bloodhound.tokenizers.whitespace}),this.source.initialize()},render:function(){return e.View.prototype.render.apply(this,arguments),this.typeahead=this.$("input").typeahead({hint:!0,highlight:!0},{displayKey:"name",source:this.source.ttAdapter(),templates:{suggestion:o,empty:a}}),this.typeahead.on("typeahead:selected typeahead:autocompleted",t.bind(this.onSelect,this)),this},getTemplateData:function(){var i=e.View.prototype.getTemplateData.apply(this,arguments);return t.defaults(i,{placeholder:this.options.placeholder||""}),i},addCloseButton:function(){if(this.$(".cancel-16").length<1){var e=this,t=i('<a href="#" class="icon-16 icon-only cancel-16"></a>').click(e.clearPicker);this.$("input.tt-input").after(t)}},clearPicker:function(e){t.isFunction(e.preventDefault)&&(e.preventDefault(),e.stopPropagation()),t.isBoolean(e)||(e=!0),this.$("input").typeahead("val",""),e&&this.$("input.tt-input").focus(),this.$(".cancel-16").remove(),this.trigger("onClear")},resetPicker:function(){this.clearPicker(!1),this.model&&this.model.unset(this.field)},onSelect:function(e,t){this.model&&this.model.set(this.field,t.id),this.addCloseButton(),i(this).typeahead("close"),this.trigger("onSelect",{userId:t.id})},prefillUser:function(e){var t=s(e);this.typeahead.typeahead("val",t.name),this.onSelect(new i.Event,t)}})}.apply(t,n),!(void 0!==s&&(e.exports=s))},function(e,t,i){var n,s;n=[i(6)],s=function(e){!function(e){var t={isMsie:function(){return!!/(msie|trident)/i.test(navigator.userAgent)&&navigator.userAgent.match(/(msie |rv:)(\d+(.\d+)?)/i)[2]},isBlankString:function(e){return!e||/^\s*$/.test(e)},escapeRegExChars:function(e){return e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")},isString:function(e){return"string"==typeof e},isNumber:function(e){return"number"==typeof e},isArray:e.isArray,isFunction:e.isFunction,isObject:e.isPlainObject,isUndefined:function(e){return"undefined"==typeof e},bind:e.proxy,each:function(t,i){function n(e,t){return i(t,e)}e.each(t,n)},map:e.map,filter:e.grep,every:function(t,i){var n=!0;return t?(e.each(t,function(e,s){if(!(n=i.call(null,s,e,t)))return!1}),!!n):n},some:function(t,i){var n=!1;return t?(e.each(t,function(e,s){if(n=i.call(null,s,e,t))return!1}),!!n):n},mixin:e.extend,getUniqueId:function(){var e=0;return function(){return e++}}(),templatify:function(t){function i(){return String(t)}return e.isFunction(t)?t:i},defer:function(e){setTimeout(e,0)},debounce:function(e,t,i){var n,s;return function(){var o,a,r=this,l=arguments;return o=function(){n=null,i||(s=e.apply(r,l))},a=i&&!n,clearTimeout(n),n=setTimeout(o,t),a&&(s=e.apply(r,l)),s}},throttle:function(e,t){var i,n,s,o,a,r;return a=0,r=function(){a=new Date,s=null,o=e.apply(i,n)},function(){var l=new Date,p=t-(l-a);return i=this,n=arguments,p<=0?(clearTimeout(s),s=null,a=l,o=e.apply(i,n)):s||(s=setTimeout(r,p)),o}},noop:function(){}},i="0.10.2",n=function(e){function t(e){return e.split(/\s+/)}function i(e){return e.split(/\W+/)}function n(e){return function(t){return function(i){return e(i[t])}}}return{nonword:i,whitespace:t,obj:{nonword:n(i),whitespace:n(t)}}}(),s=function(){function e(e){this.maxSize=e||100,this.size=0,this.hash={},this.list=new i}function i(){this.head=this.tail=null}function n(e,t){this.key=e,this.val=t,this.prev=this.next=null}return t.mixin(e.prototype,{set:function(e,t){var i,s=this.list.tail;this.size>=this.maxSize&&(this.list.remove(s),delete this.hash[s.key]),(i=this.hash[e])?(i.val=t,this.list.moveToFront(i)):(i=new n(e,t),this.list.add(i),this.hash[e]=i,this.size++)},get:function(e){var t=this.hash[e];if(t)return this.list.moveToFront(t),t.val}}),t.mixin(i.prototype,{add:function(e){this.head&&(e.next=this.head,this.head.prev=e),this.head=e,this.tail=this.tail||e},remove:function(e){e.prev?e.prev.next=e.next:this.head=e.next,e.next?e.next.prev=e.prev:this.tail=e.prev},moveToFront:function(e){this.remove(e),this.add(e)}}),e}(),o=function(){function e(e){this.prefix=["__",e,"__"].join(""),this.ttlKey="__ttl__",this.keyMatcher=new RegExp("^"+this.prefix)}function i(){return(new Date).getTime()}function n(e){return JSON.stringify(t.isUndefined(e)?null:e)}function s(e){return JSON.parse(e)}var o,a;try{o=window.localStorage,o.setItem("~~~","!"),o.removeItem("~~~")}catch(e){o=null}return a=o&&window.JSON?{_prefix:function(e){return this.prefix+e},_ttlKey:function(e){return this._prefix(e)+this.ttlKey},get:function(e){return this.isExpired(e)&&this.remove(e),s(o.getItem(this._prefix(e)))},set:function(e,s,a){return t.isNumber(a)?o.setItem(this._ttlKey(e),n(i()+a)):o.removeItem(this._ttlKey(e)),o.setItem(this._prefix(e),n(s))},remove:function(e){return o.removeItem(this._ttlKey(e)),o.removeItem(this._prefix(e)),this},clear:function(){var e,t,i=[],n=o.length;for(e=0;e<n;e++)(t=o.key(e)).match(this.keyMatcher)&&i.push(t.replace(this.keyMatcher,""));for(e=i.length;e--;)this.remove(i[e]);return this},isExpired:function(e){var n=s(o.getItem(this._ttlKey(e)));return!!(t.isNumber(n)&&i()>n)}}:{get:t.noop,set:t.noop,remove:t.noop,clear:t.noop,isExpired:t.noop},t.mixin(e.prototype,a),e}(),a=function(){function i(t){t=t||{},this._send=t.transport?n(t.transport):e.ajax,this._get=t.rateLimiter?t.rateLimiter(this._get):this._get}function n(i){return function(n,s){function o(e){t.defer(function(){r.resolve(e)})}function a(e){t.defer(function(){r.reject(e)})}var r=e.Deferred();return i(n,s,o,a),r}}var o=0,a={},r=6,l=new s(10);return i.setMaxPendingRequests=function(e){r=e},i.resetCache=function(){l=new s(10)},t.mixin(i.prototype,{_get:function(e,t,i){function n(t){i&&i(null,t),l.set(e,t)}function s(){i&&i(!0)}function p(){o--,delete a[e],c.onDeckRequestArgs&&(c._get.apply(c,c.onDeckRequestArgs),c.onDeckRequestArgs=null)}var d,c=this;(d=a[e])?d.done(n).fail(s):o<r?(o++,a[e]=this._send(e,t).done(n).fail(s).always(p)):this.onDeckRequestArgs=[].slice.call(arguments,0)},get:function(e,i,n){var s;return t.isFunction(i)&&(n=i,i={}),(s=l.get(e))?t.defer(function(){n&&n(null,s)}):this._get(e,i,n),!!s}}),i}(),r=function(){function i(t){t=t||{},t.datumTokenizer&&t.queryTokenizer||e.error("datumTokenizer and queryTokenizer are both required"),this.datumTokenizer=t.datumTokenizer,this.queryTokenizer=t.queryTokenizer,this.reset()}function n(e){return e=t.filter(e,function(e){return!!e}),e=t.map(e,function(e){return e.toLowerCase()})}function s(){return{ids:[],children:{}}}function o(e){for(var t={},i=[],n=0;n<e.length;n++)t[e[n]]||(t[e[n]]=!0,i.push(e[n]));return i}function a(e,t){function i(e,t){return e-t}var n=0,s=0,o=[];for(e=e.sort(i),t=t.sort(i);n<e.length&&s<t.length;)e[n]<t[s]?n++:e[n]>t[s]?s++:(o.push(e[n]),n++,s++);return o}return t.mixin(i.prototype,{bootstrap:function(e){this.datums=e.datums,this.trie=e.trie},add:function(e){var i=this;e=t.isArray(e)?e:[e],t.each(e,function(e){var o,a;o=i.datums.push(e)-1,a=n(i.datumTokenizer(e)),t.each(a,function(e){var t,n,a;for(t=i.trie,n=e.split("");a=n.shift();)t=t.children[a]||(t.children[a]=s()),t.ids.push(o)})})},get:function(e){var i,s,r=this;return i=n(this.queryTokenizer(e)),t.each(i,function(e){var t,i,n,o;if(s&&0===s.length)return!1;for(t=r.trie,i=e.split("");t&&(n=i.shift());)t=t.children[n];return t&&0===i.length?(o=t.ids.slice(0),void(s=s?a(s,o):o)):(s=[],!1)}),s?t.map(o(s),function(e){return r.datums[e]}):[]},reset:function(){this.datums=[],this.trie=s()},serialize:function(){return{datums:this.datums,trie:this.trie}}}),i}(),l=function(){function n(e){return e.local||null}function s(n){var s,o;return o={url:null,thumbprint:"",ttl:864e5,filter:null,ajax:{}},(s=n.prefetch||null)&&(s=t.isString(s)?{url:s}:s,s=t.mixin(o,s),s.thumbprint=i+s.thumbprint,s.ajax.type=s.ajax.type||"GET",s.ajax.dataType=s.ajax.dataType||"json",!s.url&&e.error("prefetch requires url to be set")),s}function o(i){function n(e){return function(i){return t.debounce(i,e)}}function s(e){return function(i){return t.throttle(i,e)}}var o,a;return a={url:null,wildcard:"%QUERY",replace:null,rateLimitBy:"debounce",rateLimitWait:300,send:null,filter:null,ajax:{}},(o=i.remote||null)&&(o=t.isString(o)?{url:o}:o,o=t.mixin(a,o),o.rateLimiter=/^throttle$/i.test(o.rateLimitBy)?s(o.rateLimitWait):n(o.rateLimitWait),o.ajax.type=o.ajax.type||"GET",o.ajax.dataType=o.ajax.dataType||"json",delete o.rateLimitBy,delete o.rateLimitWait,!o.url&&e.error("remote requires url to be set")),o}return{local:n,prefetch:s,remote:o}}();!function(i){function s(t){t&&(t.local||t.prefetch||t.remote)||e.error("one of local, prefetch, or remote is required"),this.limit=t.limit||5,this.sorter=p(t.sorter),this.dupDetector=t.dupDetector||d,this.local=l.local(t),this.prefetch=l.prefetch(t),this.remote=l.remote(t),this.cacheKey=this.prefetch?this.prefetch.cacheKey||this.prefetch.url:null,this.index=new r({datumTokenizer:t.datumTokenizer,queryTokenizer:t.queryTokenizer}),this.storage=this.cacheKey?new o(this.cacheKey):null}function p(e){function i(t){return t.sort(e)}function n(e){return e}return t.isFunction(e)?i:n}function d(){return!1}var c,u;return c=i.Bloodhound,u={data:"data",protocol:"protocol",thumbprint:"thumbprint"},i.Bloodhound=s,s.noConflict=function(){return i.Bloodhound=c,s},s.tokenizers=n,t.mixin(s.prototype,{_loadPrefetch:function(t){function i(e){o.clear(),o.add(t.filter?t.filter(e):e),o._saveToStorage(o.index.serialize(),t.thumbprint,t.ttl)}var n,s,o=this;return(n=this._readFromStorage(t.thumbprint))?(this.index.bootstrap(n),s=e.Deferred().resolve()):s=e.ajax(t.url,t.ajax).done(i),s},_getFromRemote:function(e,t){function i(e,i){t(e?[]:o.remote.filter?o.remote.filter(i):i)}var n,s,o=this;return e=e||"",s=encodeURIComponent(e),n=this.remote.replace?this.remote.replace(this.remote.url,e):this.remote.url.replace(this.remote.wildcard,s),this.transport.get(n,this.remote.ajax,i)},_saveToStorage:function(e,t,i){this.storage&&(this.storage.set(u.data,e,i),this.storage.set(u.protocol,location.protocol,i),this.storage.set(u.thumbprint,t,i))},_readFromStorage:function(e){var t,i={};return this.storage&&(i.data=this.storage.get(u.data),i.protocol=this.storage.get(u.protocol),i.thumbprint=this.storage.get(u.thumbprint)),t=i.thumbprint!==e||i.protocol!==location.protocol,i.data&&!t?i.data:null},_initialize:function(){function i(){s.add(t.isFunction(o)?o():o)}var n,s=this,o=this.local;return n=this.prefetch?this._loadPrefetch(this.prefetch):e.Deferred().resolve(),o&&n.done(i),this.transport=this.remote?new a(this.remote):null,this.initPromise=n.promise()},initialize:function(e){return!this.initPromise||e?this._initialize():this.initPromise},add:function(e){this.index.add(e)},get:function(e,i){function n(e){var n=o.slice(0);t.each(e,function(e){var i;return i=t.some(n,function(t){return s.dupDetector(e,t)}),!i&&n.push(e),n.length<s.limit}),i&&i(s.sorter(n))}var s=this,o=[],a=!1;o=this.index.get(e),o=this.sorter(o).slice(0,this.limit),o.length<this.limit&&this.transport&&(a=this._getFromRemote(e,n)),a||(o.length>0||!this.transport)&&i&&i(o)},clear:function(){this.index.reset()},clearPrefetchCache:function(){this.storage&&this.storage.clear()},clearRemoteCache:function(){this.transport&&a.resetCache()},ttAdapter:function(){return t.bind(this.get,this)}}),s}(this);var p={wrapper:'<span class="twitter-typeahead"></span>',dropdown:'<span class="tt-dropdown-menu"></span>',dataset:'<div class="tt-dataset-%CLASS%"></div>',suggestions:'<span class="tt-suggestions"></span>',suggestion:'<div class="tt-suggestion"></div>'},d={wrapper:{position:"relative",display:"inline-block"},hint:{position:"absolute",top:"0",left:"0",borderColor:"transparent",boxShadow:"none"},input:{position:"relative",verticalAlign:"top",backgroundColor:"transparent"},inputWithNoHint:{position:"relative",verticalAlign:"top"},dropdown:{position:"absolute",top:"100%",left:"0",zIndex:"100",display:"none"},suggestions:{display:"block"},suggestion:{whiteSpace:"nowrap",cursor:"pointer"},suggestionChild:{whiteSpace:"normal"},ltr:{left:"0",right:"auto"},rtl:{left:"auto",right:" 0"}};t.isMsie()&&t.mixin(d.input,{backgroundImage:"url(data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7)"}),t.isMsie()&&t.isMsie()<=7&&t.mixin(d.input,{marginTop:"-1px"});var c=function(){function i(t){t&&t.el||e.error("EventBus initialized without el"),this.$el=e(t.el)}var n="typeahead:";return t.mixin(i.prototype,{trigger:function(e){var t=[].slice.call(arguments,1);this.$el.trigger(n+e,t)}}),i}(),u=function(){function e(e,t,i,n){var s;if(!i)return this;for(t=t.split(l),i=n?r(i,n):i,this._callbacks=this._callbacks||{};s=t.shift();)this._callbacks[s]=this._callbacks[s]||{sync:[],async:[]},this._callbacks[s][e].push(i);return this}function t(t,i,n){return e.call(this,"async",t,i,n)}function i(t,i,n){return e.call(this,"sync",t,i,n)}function n(e){var t;if(!this._callbacks)return this;for(e=e.split(l);t=e.shift();)delete this._callbacks[t];return this}function s(e){var t,i,n,s,a;if(!this._callbacks)return this;for(e=e.split(l),n=[].slice.call(arguments,1);(t=e.shift())&&(i=this._callbacks[t]);)s=o(i.sync,this,[t].concat(n)),a=o(i.async,this,[t].concat(n)),s()&&p(a);return this}function o(e,t,i){function n(){for(var n,s=0;!n&&s<e.length;s+=1)n=e[s].apply(t,i)===!1;return!n}return n}function a(){var e;return e=window.setImmediate?function(e){setImmediate(function(){e()})}:function(e){setTimeout(function(){e()},0)}}function r(e,t){return e.bind?e.bind(t):function(){e.apply(t,[].slice.call(arguments,0))}}var l=/\s+/,p=a();return{onSync:i,onAsync:t,off:n,trigger:s}}(),h=function(e){function i(e,i,n){for(var s,o=[],a=0;a<e.length;a++)o.push(t.escapeRegExChars(e[a]));return s=n?"\\b("+o.join("|")+")\\b":"("+o.join("|")+")",i?new RegExp(s):new RegExp(s,"i")}var n={node:null,pattern:null,tagName:"strong",className:null,wordsOnly:!1,caseSensitive:!1};return function(s){function o(t){var i,n;return(i=r.exec(t.data))&&(wrapperNode=e.createElement(s.tagName),s.className&&(wrapperNode.className=s.className),n=t.splitText(i.index),n.splitText(i[0].length),wrapperNode.appendChild(n.cloneNode(!0)),t.parentNode.replaceChild(wrapperNode,n)),!!i}function a(e,t){for(var i,n=3,s=0;s<e.childNodes.length;s++)i=e.childNodes[s],i.nodeType===n?s+=t(i)?1:0:a(i,t)}var r;s=t.mixin({},n,s),s.node&&s.pattern&&(s.pattern=t.isArray(s.pattern)?s.pattern:[s.pattern],r=i(s.pattern,s.caseSensitive,s.wordsOnly),a(s.node,o))}}(window.document),m=function(){function i(i){var s,o,r,l,p=this;i=i||{},i.input||e.error("input is missing"),s=t.bind(this._onBlur,this),o=t.bind(this._onFocus,this),r=t.bind(this._onKeydown,this),l=t.bind(this._onInput,this),this.$hint=e(i.hint),this.$input=e(i.input).on("blur.tt",s).on("focus.tt",o).on("keydown.tt",r),0===this.$hint.length&&(this.setHint=this.getHint=this.clearHint=this.clearHintIfInvalid=t.noop),t.isMsie()?this.$input.on("keydown.tt keypress.tt cut.tt paste.tt",function(e){a[e.which||e.keyCode]||t.defer(t.bind(p._onInput,p,e))}):this.$input.on("input.tt",l),this.query=this.$input.val(),this.$overflowHelper=n(this.$input)}function n(t){return e('<pre aria-hidden="true"></pre>').css({position:"absolute",visibility:"hidden",whiteSpace:"pre",fontFamily:t.css("font-family"),fontSize:t.css("font-size"),fontStyle:t.css("font-style"),fontVariant:t.css("font-variant"),fontWeight:t.css("font-weight"),wordSpacing:t.css("word-spacing"),letterSpacing:t.css("letter-spacing"),textIndent:t.css("text-indent"),textRendering:t.css("text-rendering"),textTransform:t.css("text-transform")}).insertAfter(t)}function s(e,t){return i.normalizeQuery(e)===i.normalizeQuery(t)}function o(e){return e.altKey||e.ctrlKey||e.metaKey||e.shiftKey}var a;return a={9:"tab",27:"esc",37:"left",39:"right",13:"enter",38:"up",40:"down"},i.normalizeQuery=function(e){return(e||"").replace(/^\s*/g,"").replace(/\s{2,}/g," ")},t.mixin(i.prototype,u,{_onBlur:function(){this.resetInputValue(),this.trigger("blurred")},_onFocus:function(){this.trigger("focused")},_onKeydown:function(e){var t=a[e.which||e.keyCode];this._managePreventDefault(t,e),t&&this._shouldTrigger(t,e)&&this.trigger(t+"Keyed",e)},_onInput:function(){this._checkInputValue()},_managePreventDefault:function(e,t){var i,n,s;switch(e){case"tab":n=this.getHint(),s=this.getInputValue(),i=n&&n!==s&&!o(t);break;case"up":case"down":i=!o(t);break;default:i=!1}i&&t.preventDefault()},_shouldTrigger:function(e,t){var i;switch(e){case"tab":i=!o(t);break;default:i=!0}return i},_checkInputValue:function(){var e,t,i;e=this.getInputValue(),t=s(e,this.query),i=!!t&&this.query.length!==e.length,t?i&&this.trigger("whitespaceChanged",this.query):this.trigger("queryChanged",this.query=e)},focus:function(){this.$input.focus()},blur:function(){this.$input.blur()},getQuery:function(){return this.query},setQuery:function(e){this.query=e},getInputValue:function(){return this.$input.val()},setInputValue:function(e,t){this.$input.val(e),t?this.clearHint():this._checkInputValue()},resetInputValue:function(){this.setInputValue(this.query,!0)},getHint:function(){return this.$hint.val()},setHint:function(e){this.$hint.val(e)},clearHint:function(){this.setHint("")},clearHintIfInvalid:function(){var e,t,i,n;e=this.getInputValue(),t=this.getHint(),i=e!==t&&0===t.indexOf(e),n=""!==e&&i&&!this.hasOverflow(),!n&&this.clearHint()},getLanguageDirection:function(){return(this.$input.css("direction")||"ltr").toLowerCase()},hasOverflow:function(){var e=this.$input.width()-2;return this.$overflowHelper.text(this.getInputValue()),this.$overflowHelper.width()>=e},isCursorAtEnd:function(){var e,i,n;return e=this.$input.val().length,i=this.$input[0].selectionStart,t.isNumber(i)?i===e:!document.selection||(n=document.selection.createRange(),n.moveStart("character",-e),e===n.text.length)},destroy:function(){this.$hint.off(".tt"),this.$input.off(".tt"),this.$hint=this.$input=this.$overflowHelper=null}}),i}(),f=function(){function i(i){i=i||{},i.templates=i.templates||{},i.source||e.error("missing source"),i.name&&!o(i.name)&&e.error("invalid dataset name: "+i.name),this.query=null,this.highlight=!!i.highlight,this.name=i.name||t.getUniqueId(),this.source=i.source,this.displayFn=n(i.display||i.displayKey),this.templates=s(i.templates,this.displayFn),this.$el=e(p.dataset.replace("%CLASS%",this.name))}function n(e){function i(t){return t[e]}return e=e||"value",t.isFunction(e)?e:i}function s(e,i){function n(e){return"<p>"+i(e)+"</p>"}return{empty:e.empty&&t.templatify(e.empty),header:e.header&&t.templatify(e.header),footer:e.footer&&t.templatify(e.footer),suggestion:e.suggestion||n}}function o(e){return/^[_a-zA-Z0-9-]+$/.test(e)}var a="ttDataset",r="ttValue",l="ttDatum";return i.extractDatasetName=function(t){return e(t).data(a)},i.extractValue=function(t){return e(t).data(r)},i.extractDatum=function(t){return e(t).data(l)},t.mixin(i.prototype,u,{_render:function(i,n){function s(){return f.templates.empty({query:i,isEmpty:!0})}function o(){function s(t){var i;return i=e(p.suggestion).append(f.templates.suggestion(t)).data(a,f.name).data(r,f.displayFn(t)).data(l,t),i.children().each(function(){e(this).css(d.suggestionChild)}),i}var o,c;return o=e(p.suggestions).css(d.suggestions),c=t.map(n,s),o.append.apply(o,c),f.highlight&&h({node:o[0],pattern:i}),o}function c(){return f.templates.header({query:i,isEmpty:!m})}function u(){return f.templates.footer({query:i,isEmpty:!m})}if(this.$el){var m,f=this;this.$el.empty(),m=n&&n.length,!m&&this.templates.empty?this.$el.html(s()).prepend(f.templates.header?c():null).append(f.templates.footer?u():null):m&&this.$el.html(o()).prepend(f.templates.header?c():null).append(f.templates.footer?u():null),this.trigger("rendered")}},getRoot:function(){return this.$el},update:function(e){function t(t){i.canceled||e!==i.query||i._render(e,t)}var i=this;this.query=e,this.canceled=!1,this.source(e,t)},cancel:function(){this.canceled=!0},clear:function(){this.cancel(),this.$el.empty(),this.trigger("rendered")},isEmpty:function(){return this.$el.is(":empty")},destroy:function(){this.$el=null}}),i}(),g=function(){function i(i){var s,o,a,r=this;i=i||{},i.menu||e.error("menu is required"),this.isOpen=!1,this.isEmpty=!0,this.datasets=t.map(i.datasets,n),s=t.bind(this._onSuggestionClick,this),o=t.bind(this._onSuggestionMouseEnter,this),a=t.bind(this._onSuggestionMouseLeave,this),this.$menu=e(i.menu).on("click.tt",".tt-suggestion",s).on("mouseenter.tt",".tt-suggestion",o).on("mouseleave.tt",".tt-suggestion",a),t.each(this.datasets,function(e){r.$menu.append(e.getRoot()),e.onSync("rendered",r._onRendered,r)})}function n(e){return new f(e)}return t.mixin(i.prototype,u,{_onSuggestionClick:function(t){this.trigger("suggestionClicked",e(t.currentTarget))},_onSuggestionMouseEnter:function(t){this._removeCursor(),this._setCursor(e(t.currentTarget),!0)},_onSuggestionMouseLeave:function(){this._removeCursor()},_onRendered:function(){function e(e){return e.isEmpty()}this.isEmpty=t.every(this.datasets,e),this.isEmpty?this._hide():this.isOpen&&this._show(),this.trigger("datasetRendered")},_hide:function(){this.$menu.hide()},_show:function(){this.$menu.css("display","block")},_getSuggestions:function(){return this.$menu.find(".tt-suggestion")},_getCursor:function(){return this.$menu.find(".tt-cursor").first()},_setCursor:function(e,t){e.first().addClass("tt-cursor"),!t&&this.trigger("cursorMoved")},_removeCursor:function(){this._getCursor().removeClass("tt-cursor")},_moveCursor:function(e){var t,i,n,s;if(this.isOpen){if(i=this._getCursor(),t=this._getSuggestions(),this._removeCursor(),n=t.index(i)+e,n=(n+1)%(t.length+1)-1,n===-1)return void this.trigger("cursorRemoved");n<-1&&(n=t.length-1),this._setCursor(s=t.eq(n)),this._ensureVisible(s)}},_ensureVisible:function(e){var t,i,n,s;t=e.position().top,i=t+e.outerHeight(!0),n=this.$menu.scrollTop(),s=this.$menu.height()+parseInt(this.$menu.css("paddingTop"),10)+parseInt(this.$menu.css("paddingBottom"),10),t<0?this.$menu.scrollTop(n+t):s<i&&this.$menu.scrollTop(n+(i-s))},close:function(){this.isOpen&&(this.isOpen=!1,this._removeCursor(),this._hide(),this.trigger("closed"))},open:function(){this.isOpen||(this.isOpen=!0,!this.isEmpty&&this._show(),this.trigger("opened"))},setLanguageDirection:function(e){this.$menu.css("ltr"===e?d.ltr:d.rtl)},moveCursorUp:function(){this._moveCursor(-1)},moveCursorDown:function(){this._moveCursor(1)},getDatumForSuggestion:function(e){var t=null;return e.length&&(t={raw:f.extractDatum(e),value:f.extractValue(e),datasetName:f.extractDatasetName(e)}),t},getDatumForCursor:function(){return this.getDatumForSuggestion(this._getCursor().first())},getDatumForTopSuggestion:function(){return this.getDatumForSuggestion(this._getSuggestions().first())},update:function(e){function i(t){t.update(e)}t.each(this.datasets,i)},empty:function(){function e(e){e.clear()}t.each(this.datasets,e),this.isEmpty=!0},isVisible:function(){return this.isOpen&&!this.isEmpty},destroy:function(){function e(e){e.destroy()}this.$menu.off(".tt"),this.$menu=null,t.each(this.datasets,e)}}),i}(),_=function(){function i(i){var s,o,a;i=i||{},i.input||e.error("missing input"),this.isActivated=!1,this.autoselect=!!i.autoselect,this.minLength=t.isNumber(i.minLength)?i.minLength:1,this.$node=n(i.input,i.withHint),s=this.$node.find(".tt-dropdown-menu"),o=this.$node.find(".tt-input"),a=this.$node.find(".tt-hint"),o.on("blur.tt",function(e){var i,n,a;i=document.activeElement,n=s.is(i),a=s.has(i).length>0,t.isMsie()&&(n||a)&&(e.preventDefault(),e.stopImmediatePropagation(),t.defer(function(){o.focus()}))}),s.on("mousedown.tt",function(e){e.preventDefault()}),this.eventBus=i.eventBus||new c({el:o}),this.dropdown=new g({menu:s,datasets:i.datasets}).onSync("suggestionClicked",this._onSuggestionClicked,this).onSync("cursorMoved",this._onCursorMoved,this).onSync("cursorRemoved",this._onCursorRemoved,this).onSync("opened",this._onOpened,this).onSync("closed",this._onClosed,this).onAsync("datasetRendered",this._onDatasetRendered,this),this.input=new m({input:o,hint:a}).onSync("focused",this._onFocused,this).onSync("blurred",this._onBlurred,this).onSync("enterKeyed",this._onEnterKeyed,this).onSync("tabKeyed",this._onTabKeyed,this).onSync("escKeyed",this._onEscKeyed,this).onSync("upKeyed",this._onUpKeyed,this).onSync("downKeyed",this._onDownKeyed,this).onSync("leftKeyed",this._onLeftKeyed,this).onSync("rightKeyed",this._onRightKeyed,this).onSync("queryChanged",this._onQueryChanged,this).onSync("whitespaceChanged",this._onWhitespaceChanged,this),this._setLanguageDirection()}function n(t,i){var n,o,r,l;n=e(t),o=e(p.wrapper).css(d.wrapper),r=e(p.dropdown).css(d.dropdown),l=n.clone().css(d.hint).css(s(n)),l.val("").removeData().addClass("tt-hint").removeAttr("id name placeholder").prop("disabled",!0).attr({autocomplete:"off",spellcheck:"false"}),n.data(a,{dir:n.attr("dir"),autocomplete:n.attr("autocomplete"),spellcheck:n.attr("spellcheck"),style:n.attr("style")}),n.addClass("tt-input").attr({autocomplete:"off",spellcheck:!1}).css(i?d.input:d.inputWithNoHint);try{!n.attr("dir")&&n.attr("dir","auto")}catch(e){}return n.wrap(o).parent().prepend(i?l:null).append(r)}function s(e){return{backgroundAttachment:e.css("background-attachment"),backgroundClip:e.css("background-clip"),backgroundColor:e.css("background-color"),backgroundImage:e.css("background-image"),backgroundOrigin:e.css("background-origin"),backgroundPosition:e.css("background-position"),backgroundRepeat:e.css("background-repeat"),backgroundSize:e.css("background-size")}}function o(e){var i=e.find(".tt-input");t.each(i.data(a),function(e,n){t.isUndefined(e)?i.removeAttr(n):i.attr(n,e)}),i.detach().removeData(a).removeClass("tt-input").insertAfter(e),e.remove()}var a="ttAttrs";return t.mixin(i.prototype,{_onSuggestionClicked:function(e,t){var i;(i=this.dropdown.getDatumForSuggestion(t))&&this._select(i)},_onCursorMoved:function(){var e=this.dropdown.getDatumForCursor();this.input.setInputValue(e.value,!0),this.eventBus.trigger("cursorchanged",e.raw,e.datasetName)},_onCursorRemoved:function(){this.input.resetInputValue(),this._updateHint()},_onDatasetRendered:function(){this._updateHint()},_onOpened:function(){this._updateHint(),this.eventBus.trigger("opened")},_onClosed:function(){this.input.clearHint(),this.eventBus.trigger("closed")},_onFocused:function(){this.isActivated=!0,this.dropdown.open()},_onBlurred:function(){this.isActivated=!1,this.dropdown.empty(),this.dropdown.close()},_onEnterKeyed:function(e,t){var i,n;i=this.dropdown.getDatumForCursor(),n=this.dropdown.getDatumForTopSuggestion(),i?(this._select(i),t.preventDefault()):this.autoselect&&n&&(this._select(n),t.preventDefault())},_onTabKeyed:function(e,t){var i;(i=this.dropdown.getDatumForCursor())?(this._select(i),t.preventDefault()):this._autocomplete(!0)},_onEscKeyed:function(){this.dropdown.close(),this.input.resetInputValue()},_onUpKeyed:function(){var e=this.input.getQuery();this.dropdown.isEmpty&&e.length>=this.minLength?this.dropdown.update(e):this.dropdown.moveCursorUp(),this.dropdown.open()},_onDownKeyed:function(){var e=this.input.getQuery();this.dropdown.isEmpty&&e.length>=this.minLength?this.dropdown.update(e):this.dropdown.moveCursorDown(),this.dropdown.open()},_onLeftKeyed:function(){"rtl"===this.dir&&this._autocomplete()},_onRightKeyed:function(){"ltr"===this.dir&&this._autocomplete()},_onQueryChanged:function(e,t){this.input.clearHintIfInvalid(),t.length>=this.minLength?this.dropdown.update(t):this.dropdown.empty(),this.dropdown.open(),this._setLanguageDirection()},_onWhitespaceChanged:function(){this._updateHint(),this.dropdown.open()},_setLanguageDirection:function(){var e;this.dir!==(e=this.input.getLanguageDirection())&&(this.dir=e,this.$node.css("direction",e),this.dropdown.setLanguageDirection(e))},_updateHint:function(){var e,i,n,s,o,a;e=this.dropdown.getDatumForTopSuggestion(),e&&this.dropdown.isVisible()&&!this.input.hasOverflow()?(i=this.input.getInputValue(),n=m.normalizeQuery(i),s=t.escapeRegExChars(n),o=new RegExp("^(?:"+s+")(.+$)","i"),a=o.exec(e.value),a?this.input.setHint(i+a[1]):this.input.clearHint()):this.input.clearHint()},_autocomplete:function(e){var t,i,n,s;t=this.input.getHint(),i=this.input.getQuery(),n=e||this.input.isCursorAtEnd(),t&&i!==t&&n&&(s=this.dropdown.getDatumForTopSuggestion(),s&&this.input.setInputValue(s.value),this.eventBus.trigger("autocompleted",s.raw,s.datasetName))},_select:function(e){this.input.setQuery(e.value),this.input.setInputValue(e.value,!0),this._setLanguageDirection(),this.eventBus.trigger("selected",e.raw,e.datasetName),this.dropdown.close(),t.defer(t.bind(this.dropdown.empty,this.dropdown))},open:function(){this.dropdown.open()},close:function(){this.dropdown.close()},setVal:function(e){this.isActivated?this.input.setInputValue(e):(this.input.setQuery(e),
this.input.setInputValue(e,!0)),this._setLanguageDirection()},getVal:function(){return this.input.getQuery()},destroy:function(){this.input.destroy(),this.dropdown.destroy(),o(this.$node),this.$node=null}}),i}();!function(){var i,n,s;i=e.fn.typeahead,n="ttTypeahead",s={initialize:function(i,s){function o(){var o,a,r=e(this);t.each(s,function(e){e.highlight=!!i.highlight}),a=new _({input:r,eventBus:o=new c({el:r}),withHint:!!t.isUndefined(i.hint)||!!i.hint,minLength:i.minLength,autoselect:i.autoselect,datasets:s}),r.data(n,a)}return s=t.isArray(s)?s:[].slice.call(arguments,1),i=i||{},this.each(o)},open:function(){function t(){var t,i=e(this);(t=i.data(n))&&t.open()}return this.each(t)},close:function(){function t(){var t,i=e(this);(t=i.data(n))&&t.close()}return this.each(t)},val:function(t){function i(){var i,s=e(this);(i=s.data(n))&&i.setVal(t)}function s(e){var t,i;return(t=e.data(n))&&(i=t.getVal()),i}return arguments.length?this.each(i):s(this.first())},destroy:function(){function t(){var t,i=e(this);(t=i.data(n))&&(t.destroy(),i.removeData(n))}return this.each(t)}},e.fn.typeahead=function(e){return s[e]?s[e].apply(this,[].slice.call(arguments,1)):s.initialize.apply(this,arguments)},e.fn.typeahead.noConflict=function(){return e.fn.typeahead=i,this}}()}(e)}.apply(t,n),/*!
	 * typeahead.js 0.10.2
	 * https://github.com/twitter/typeahead.js
	 * Copyright 2013-2014 Twitter, Inc. and other contributors; Licensed MIT
	 */
!(void 0!==s&&(e.exports=s))},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,i){var n,s;n=[i(2)],s=function(e){var t=e.Model.extend({props:{agentType:"string",agentVersion:"string",appInstanceMappings:"array",appName:"string",connectionStatus:"string",health:"string",id:"string",instanceId:"string",lastConnect:"string",name:"string",orgId:"string",status:"string",tokenId:"string"},local:{__expand__:"boolean"},url:function(){return"/api/internal/connector/agent-status/"+this.escape("id")+"?status="+this.escape("status")},parse:function(e){return e||{}},sync:function(t,i,n){return"update"!=t&&"delete"!=t||(t="create"),e.Model.prototype.sync.call(this,t,i,n)}}),i=e.Collection.extend({model:t,url:"/api/internal/connector/agents/type/OPP"});return{Model:t,Collection:i}}.apply(t,n),!(void 0!==s&&(e.exports=s))},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,i){"use strict";!(e.exports={EDIT:"EDIT",ADD:"ADD",DISPLAY:"DISPLAY",ADD_RULE:"ADD_RULE",PRIVATE:"private"})},,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=i(2),o=i(240),a=n(o),r=i(264),l=n(r),p=i(265),d=n(p);t.default=a.default.extend({params:{containerId:"assign-user-modal"},datalistView:d.default,initialize:function(){a.default.prototype.initialize.apply(this,arguments),this.state.set("newlyAssignedUsersCount",0)},title:function(){return(0,s.loc)("appinstance.userassignment.assign.title","messages",[this.options.appInstance.get("label")])},getCollection:function(){return new l.default.Collection(null,{__instanceId__:this.options.appInstance.get("id")})},getDataForAssignment:function(e){return{appInstance:this.options.appInstance,appInstanceId:this.options.appInstance.get("id"),userId:e}}})},function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=i(2),o=i(241),a=n(o),r=i(242),l=n(r),p=i(253),d=n(p),c=i(254),u=n(c),h=i(235),m=n(h),f=i(261),g=n(f),_=i(262),v=n(_),y=i(64),b=n(y),A=i(263),w=n(A),I=s.internal.util.Util;t.default=w.default.extend({getDataForAssignment:I.constantError("getDataForAssignment is an abstract method"),stateEvents:s._.extend({},w.default.prototype.stateEvents,{triggerModalSyncEvent:"_triggerModalSyncEvent"}),createAssignmentForm:function(e){var t=this.getDataForAssignment(e);return this._fetchUserData(t).then(s._.bind(this._showFormOrBookmark,this))},_fetchUserData:function(e){var t=this,i=e.userId,n=e.appInstanceId,o=new m.default.Model({id:i,scope:"USER",__instanceId__:n}),r=new b.default.Model({id:"effective",userId:i},{instanceId:n,expand:"schema"}),l=new a.default({__instanceId__:n,__userId__:i}),p=new b.default.Model({id:"groups"},{instanceId:n,expand:"schema"}),d=new g.default({__instanceId__:n}),c=void 0;return this.userAssignmentHelpText?c=(new s.$.Deferred).resolve():(this.userAssignmentHelpText=new v.default({instanceId:n}),c=this.userAssignmentHelpText.fetch()),s.$.when(r.fetch(),l.fetch(),p.fetch(),d.fetch(),c).then(function(){return o.profile.set(l.profile.toJSON({verbose:!0})),{appInstance:e.appInstance,appUser:o,appProfile:r,proposedAppUser:l,groupAppUserProfile:p,possibleValues:d,userAssignmentHelpText:t.userAssignmentHelpText}})},_showFormOrBookmark:function(e){var t=e.appInstance.get("settings"),i=e.appInstance.get("name");if(this._isBookmarkApp(e)){var n=(0,s.loc)("profile.apps.bookmarkapp.assignment.modal.subtitle","messages",[e.appInstance.get("label")]),o=new s.Form({layout:"o-form-theme",model:e.appUser,subtitle:n,save:(0,s.loc)("oform.custom.save.goBack"),autoSave:!0});return(new s.$.Deferred).resolve(o)}return"omm_wifi"===i&&"WPA_WPA2_ENTERPRISE"!==t.app.securityProtocol?e.appUser.save().then(function(){e.appUser.profile.trigger("sync")},s._.bind(this.notify,this,"error","An error occurred.")).then(this.updateCollection):this._createAppUserForm(e)},_createAppUserForm:function(e){var t=this;if(this.formData={state:this.state,save:(0,s.loc)("oform.custom.save.goBack"),model:e.appUser.profile,settings:this.settings,appUser:e.appUser,instance:e.appInstance,possibleValues:e.possibleValues,properties:e.appProfile.get("properties"),groupAppUserProperties:e.groupAppUserProfile.get("properties"),userAssignmentHelpText:e.userAssignmentHelpText,savedTriggerEvent:"triggerModalSyncEvent"},this.settings.hasFeature("APPLICATION_ENTITLEMENT_POLICY"))return u.default.createAAEntitlementMeta(e.appProfile,e.proposedAppUser).then(function(e){return t.formData.entitlementAttributes=e,new l.default(t.formData)});var i=new d.default(this.formData);return(new s.$.Deferred).resolve(i)},_triggerModalSyncEvent:function(){this.formData&&this.formData.model&&this.formData.model.trigger("sync")},_isBookmarkApp:function(e){return e.appProfile.get("properties").length<=0}})},function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=i(2),o=i(235),a=n(o),r=(0,s.tpl)("/api/v1/internal/apps/{{__instanceId__}}/users/{{__userId__}}/proposed/USER");t.default=a.default.Model.extend({local:s._.extend({__userId__:"string"},a.default.Model.prototype.local),initialize:function(e){if(e||(e={}),!e.__userId__)throw new Error("Cannot initialize ProposedAppUser without a user id");a.default.Model.prototype.initialize.apply(this,arguments)},url:function(){return r(this.toJSON({verbose:!0}))}})},function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=i(2),o=i(138),a=n(o),r=i(243),l=n(r),p=i(244),d=n(p),c=i(245),u=n(c),h=i(247),m=n(h),f=i(248),g=n(f),_=i(251),v=n(_),y=i(252),b=n(y),A={EDIT_USERNAME_AND_PASSWORD:(0,s.loc)("appwizard.sso.creds.userSetsAll"),ADMIN_SETS_CREDENTIALS:(0,s.loc)("appwizard.sso.creds.adminSetsAll"),EDIT_PASSWORD_ONLY:(0,s.loc)("appwizard.sso.creds.adminSetsUser"),EXTERNAL_PASSWORD_SYNC:(0,s.loc)("appwizard.sso.creds.oktaPassword"),SHARED_USERNAME_AND_PASSWORD:(0,s.loc)("appwizard.sso.creds.shared")},w=(0,s.tpl)("/admin/app/{{appName}}/instance/{{id}}/#tab-user-management/create-n-update"),I=(0,s.tpl)('<h3>{{i18n code="appinstance.userassignment.update.user.attributes.title"}}</h3><p>{{{i18n code="appinstance.userassignment.update.user.attributes.content" arguments="appName;url"}}}</p>'),E=s.View.extend({template:'{{#if groupList}}{{i18n code="appinstance.userassignment.grouporigin.setBy" bundle="messages"}} {{#each groupList}}<a href="/admin/group/{{groupId}}#tab-apps" target="_blank">{{groupName}}</a>{{#unless @last}}, {{/unless}}{{/each}}{{/if}}'}),N=s.View.extend({template:'{{{i18n code="appuser.credential.explain" bundle="messages" arguments="url"}}}',getTemplateData:function(){var e=(0,s.tpl)("/admin/app/{{appName}}/instance/{{appInstanceId}}/#tab-signon");return{url:e({appName:this.model.get("name"),appInstanceId:this.model.get("id")})}}}),x=s.View.extend({template:'<p>{{#if single}}{{i18n code="appinstance.userassignment.reapply.mapping.text.single"}}{{else}}{{i18n code="appinstance.userassignment.reapply.mapping.text.plural" arguments="count"}}{{/if}}</p>',getTemplateData:function(){var e=s.View.prototype.getTemplateData.apply(this,arguments);return e.single=1===e.count,e},initialize:function(){var e=1===this.options.count?"appinstance.userassignment.reapply.mapping.button.single":"appinstance.userassignment.reapply.mapping.button.plural";this.add((0,s.createButton)({title:(0,s.loc)(e),className:"button-primary",click:function(){this.state.trigger("reapplyMapping")}}))}});t.default=s.Form.extend({layout:"o-form-wrap",attributes:{name:"APPUSER"},modelEvents:{"change:__scope__":"setSourceTypeWhenGAAToAA"},setSourceTypeWhenGAAToAA:function(e,t){this.entitlementAttributesClone.each(function(e){var i=e.get("id"),n=void 0;"USER"===t&&(n=this.entitlementAttributes.get(i),n.get("__isGroupSourceType__")?e.setSourceTypeAdmin():e.setSourceTypeDefault())},this)},initialize:function(){this.appUser=this.options.appUser,this.possibleValues=this.options.possibleValues,this.instanceFeatures=this.options.instance.get("features"),this._isProfileMaster()&&(this.readOnly=!0),this.groupAppUserProperties=this.options.groupAppUserProperties,this.entitlementAttributes=this.options.entitlementAttributes,this.entitlementAttributesClone=new l.default.Collection,this.reapplyMappingList=new l.default.Collection,this.listenTo(this.appUser,"request",this.__setSavingState),this.listenTo(this.appUser,"error sync",this.__clearSavingState),this.listenTo(this.appUser,"invalid error",this.handleFormError),this.listenTo(this,"save",this._saveAppUser),this._reapplyMappingCheck(),this._assignmentHelpText(),this._setCredentialPropertyReadOnly(),v.default.prepareSchema(this.options.properties,this.possibleValues,this.model);var e=this.options.properties.reject(function(e){return"userName"===e.get("name")}),t=s._.filter(e,this._isGroupAssignedAttribute,this),i=s._.difference(e,t);this.generalSection(),this.personalSection(i),t.length&&this.entitlementsSection(t)},postRender:function(){this.$el.find(".o-form-toggle").remove()},_reapplyMappingCheck:function(){this.appUser.isNew()||this._isProfileMaster()||(this.entitlementAttributes.each(function(e){"userName"!==e.get("id")&&e.get("__reapplyMapping__")&&this.reapplyMappingList.add(e)},this),this.reapplyMappingList.length&&(this.reapplyMappingCallout=this.add((0,s.createCallout)({attributes:{"data-se":"reapply-mapping-infobox"},type:"info",content:new x({count:this.reapplyMappingList.length,state:this.state})})).last(),this.listenToOnce(this.state,"reapplyMapping",this._reapplyMapping),this.read=!0))},_reapplyMapping:function(){this.reapplyMappingList.each(function(e){var t=e.get("targetPreviewValue"),i=e.get("id"),n=this.entitlementAttributes.get(i);n.set("targetProfileValue",t),this.model.set(i,t)},this),this.reapplyMappingCallout&&this.reapplyMappingCallout.remove(),this.model.set("__edit__",!0)},generalSection:function(){var e=this._getCredentialSecurityLabel(),t=this._getGroupToggleInput(),i=s._.reject([e,t],s._.isNull);i.length&&(s._.each(i,function(e){this.addInput(e)},this),this.addDivider())},personalSection:function(e){this._addCredentialsInputs(),this._addExternalIdInput(this.appUser.get("externalId")),s._.each(e,this._addProfileInput,this),this.addDivider()},entitlementsSection:function(e){s._.each(e,this._addProfileInput,this)},doSave:function(){var e=this;this.appUser.save().then(function(){e.options.savedTriggerEvent?e.state.trigger(e.options.savedTriggerEvent,e.options.instance):e.state.trigger("updateApps")},s._.bind(this.notify,this,"error","An error occured."))},handleFormError:function(e,t){if(this.getAttribute("showErrors")){this.$(".o-form-error-container").empty();var i=new a.default({errors:JSON.parse(t.responseText).errorCauses});this.add(i,".o-form-error-container"),this.trigger("resize")}},_isProfileMaster:function(){return(0,s._)(this.instanceFeatures).contains("PROFILE_MASTERING")},_isDefaultValueDrifted:function(e){return!this.appUser.isNew()&&e.get("__driftDefaultValue__")},_isNonCredentialPropertyReadOnly:function(e){var t=e.get("__isReadOnly__");return t||this._isGroupOriginProperty(e)},_isGroupOriginProperty:function(e){return this._isGroupOriginPropertyName(e.get("name"))},_isGroupAssignedAttribute:function(e){var t=e.get("name");return this._isGroupAssignedAttributeName(t)},_isGroupAssignedAttributeName:function(e){return!s._.isEmpty(this.groupAppUserProperties.findWhere({name:e}))},_isGroupOriginPropertyName:function(e){var t=this.appUser.get("groupManaged"),i=this._isGroupAssignedAttributeName(e);return t&&i},_setCredentialPropertyReadOnly:function(){var e=this.options.instance.get("__scheme__");if(this.isUserNameReadOnly=!1,e)switch(this.isPasswordReadOnly=!0,e){case"EDIT_USERNAME_AND_PASSWORD":this.isUserNameReadOnly=!0;break;case"ADMIN_SETS_CREDENTIALS":this.isPasswordReadOnly=!1;break;case"SHARED_USERNAME_AND_PASSWORD":this.isUserNameReadOnly=!0}},_getCredentialSecurityLabel:function(){var e=A[this.options.instance.get("__scheme__")],t=(0,s._)(this.instanceFeatures).contains("PUSH_PASSWORD_UPDATES");return e&&!t?(this.model.set("__schemeDisplay__",e),{type:"text",readOnly:!0,name:"__schemeDisplay__",label:"Credential Security",explain:new N({model:this.options.instance})}):null},_addCredentialsInputs:function(){var e=A[this.options.instance.get("__scheme__")],t=(0,s._)(this.instanceFeatures).contains("PUSH_PASSWORD_UPDATES"),i=this.appUser.options.credentials;this.addInput({type:"text",readOnly:this.isUserNameReadOnly,name:"userName",label:"User Name"});var n={type:"password",name:"password",label:"Password",placeholder:"********"};e&&!t&&(e===A.ADMIN_SETS_CREDENTIALS?this.addInput(s._.defaults({readOnly:this.isPasswordReadOnly,placeholder:i.password?"********":"",explain:i.password?(0,s.loc)("password.set"):(0,s.loc)("password.notSet")},n)):this.addInput(s._.defaults({readOnly:this.isPasswordReadOnly},n))),t&&this.appUser.get("_links")&&this.appUser.get("_links").cyclePassword&&this.addInput(s._.defaults({readOnly:!0,explain:this.appUser.isNew()?void 0:new b.default({model:this.options.instance,userId:this.appUser.get("id")})},n))},_addExternalIdInput:function(e){e&&(this.model.set("__externalId__",e),this.addInput({type:"text",readOnly:!0,name:"__externalId__",label:"External Id"}))},_getGroupToggleInput:function(){return this.appUser.get("groupManaged")?(this.model.set("__scope__",this.appUser.get("scope")),{type:"radio",options:{GROUP:"Group",USER:"Administrator (overrides group)"},name:"__scope__",label:"Assignment master"}):null},_assignmentHelpText:function(){var e=this._getUserAssignmentHelpText(this.options.userAssignmentHelpText),t=this._getUpdateUserAttributeHelpText(),i=s._.extend({},e,t);if(!s._.isEmpty(i)){var n=s._.extend({type:"warning",className:"update-user-attribute-infobox"},i);this.add((0,s.createCallout)(n))}},_getUserAssignmentHelpText:function(e){if(e&&e.get("displayUserAssignmentHelpText")){var t=e.get("appName");return{title:(0,s.loc)("app."+t+".user_assignment_help_text.title"),subtitle:(0,s.loc)("app."+t+".user_assignment_help_text.content")}}return{}},_getUpdateUserAttributeHelpText:function(){var e=this.options.instance;if(!this.appUser.isNew()&&e.get("__provisionEnabled__")&&e.get("__active__")&&!e.get("__isDirectoryApp__")&&!e.get("__updateUserAttributesEnabled__")){var t=w({appName:this.options.appName,id:e.get("id")});return{content:I({appName:e.escape("label"),url:t})}}return{}},_getSetByGroupList:function(e,t){return s._.map(e,function(e){var i=t.get(e),n=i&&i.get("groupName");return{groupId:e,groupName:n}})},_saveAppUser:function(e){this.isUserNameReadOnly?delete this.appUser.get("credentials").userName:this.appUser.get("credentials").userName=e.get("userName"),this.isPasswordReadOnly?delete this.appUser.get("credentials").password:this.appUser.get("credentials").password=e.get("password");var t=s._.omit(e.toJSON(),"userName","password");t=this._applyEntitlementPolicy(t,this.entitlementAttributes,this.entitlementAttributesClone),this.appUser.set({scope:e.get("__scope__"),profile:t}),this.doSave()},_shouldResetToDefaultValue:function(e,t){if(!e.get("__isWritable__"))return!1;if(e.get("__isCreateOnly__"))return e.get("__isOverrideToDefault__");var i=e.get("targetPreviewValue"),n=d.default.isEmptyValue(i),o=d.default.isEmptyValue(t);return!(!n||!o)||(s._.isArray(t)?d.default.isEqual(i,t):i===t)},_applyEntitlementPolicy:function(e,t,i){var n="USER"===this.model.get("__scope__"),o=this.appUser.get("groupManaged")&&n?i:t;return s._.mapObject(e,function(e,i){var s=o.get(i)||t.get(i),a=!this._isGroupOriginPropertyName(i)||n,r=a&&s&&this._shouldResetToDefaultValue(s,e),l=!a&&!!this.reapplyMappingList.get(i);return r||l?null:e},this)},_getInputFieldClass:function(e,t){return v.default.assignmentRequired(e)?u.default:this._isGroupOriginProperty(e)||this._isDefaultValueDrifted(t)?m.default:g.default},_getInputFieldClassForGroup:function(e,t){return v.default.assignmentRequired(e)?u.default:this._isDefaultValueDrifted(t)?m.default:g.default},_getInput:function(e){var t=this.entitlementAttributes.get(e.get("name")),i=v.default.createInputOptions(e),n=i.readOnly===!0||this._isGroupOriginProperty(e),s=v.default.assignmentRequired(e),o=this._getInputFieldClass(e,t),a={input:o,readOnly:n,label:i.label,params:{input:i,entitlementModel:t}};return s&&this.model.set(s),a},_addProfileInput:function(e){var t=this._isGroupOriginProperty(e),i=this._getInput(e);if(t){var n=this.entitlementAttributes.get(e.get("name")),s=this._getSetByGroupList(n.get("sourceGroup"),this.options.appGroups),o=new E({groupList:s}),a=i.params.input,r=i.params.entitlementModel.clone(),l=this._getInputFieldClassForGroup(e,r);i.explain=o,i.toggleWhen={__scope__:"GROUP"},this.entitlementAttributesClone.add(r),this.addInput({toggleWhen:{__scope__:"USER"},label:i.label,readOnly:a.readOnly,input:l,params:{input:a,entitlementModel:r}})}this.addInput(i)}})},function(e,t,i){var n,s;n=[i(2),i(244)],s=function(e,t){function i(e){return s.contains(["admin","user","approvalflow","imported"],e)}function n(e){return s.isUndefined(e)||s.isNull(e)||s.isArray(e)&&s.isEmpty(e)||s.isString(e)&&""===e?null:e}var s=e._,o=e.Model.extend({props:{id:"string",sourceType:"string",sourceGroup:"object",pushStatus:"string",sourceExpression:"string",targetPreviewValue:"object",targetProfileValue:"object",schemaPropertyDisplayType:"string",schemaPropertyMutability:"string"},local:{__isOverrideToDefault__:["boolean",!1,!1]},derived:{__isCustom__:{deps:["sourceType"],fn:i},__isGroupSourceType__:{deps:["sourceType"],fn:function(e){return"group"===e}},__isDefault__:{deps:["sourceType"],fn:function(e){return"default"===e}},__isWritable__:{deps:["schemaPropertyMutability"],fn:function(e){return"READ_WRITE"===e}},__defaultValue__:{deps:["__isCustom__","targetPreviewValue","targetProfileValue"],fn:function(e,t,i){return e?t:i}},__isCreateOnly__:{deps:["pushStatus"],fn:function(e){return"DONT_PUSH"===e}},__isCreateAndUpdate__:{deps:["pushStatus"],fn:function(e){return"PUSH"===e}},__cleanPreviewValue__:{deps:["targetPreviewValue"],fn:function(e){return n(e)}},__cleanProfileValue__:{deps:["targetProfileValue"],fn:function(e){return n(e)}},__isPreviewSameAsProfile__:{deps:["__cleanPreviewValue__","__cleanProfileValue__"],fn:t.isEqual},__reapplyMapping__:{deps:["__isDefault__","__isWritable__","__isPreviewSameAsProfile__","__isCreateOnly__"],fn:function(e,t,i,n){return e&&t&&!i&&!n}},__driftDefaultValue__:{deps:["__isDefault__","__isPreviewSameAsProfile__","__isCreateOnly__"],fn:function(e,t,i){return e&&!t&&i}}},setSourceTypeAdmin:function(){this.set("sourceType","admin")},setSourceTypeDefault:function(){this.set("sourceType","default")},setOverrideToDefault:function(){this.set("__isOverrideToDefault__",!0)},clearOverrideToDefault:function(){this.set("__isOverrideToDefault__",!1)}}),a=e.Collection.extend({model:o});return{Model:o,Collection:a}}.apply(t,n),!(void 0!==s&&(e.exports=s))},function(e,t,i){var n,s;n=[i(2)],s=function(e){function t(e){return s.countBy(e,s.identity)}function i(e,i){return s.isArray(e)&&s.isArray(i)?e.length===i.length&&s.isEqual(t(e),t(i)):s.isEqual(e,i)}function n(e){return s.isUndefined(e)||s.isNull(e)||s.isArray(e)?s.isEmpty(e):""===e}var s=e._;return{isEqual:i,isEmptyValue:n}}.apply(t,n),!(void 0!==s&&(e.exports=s))},function(e,t,i){var n,s;n=[i(2),i(246)],s=function(e,t){return e.internal.views.forms.BaseInput.extend({initialize:function(){this.formInput=this.options.params.input,this.entitlementModel=this.options.params.entitlementModel},editMode:function(){this.options.params.input.readOnly=this.options.readOnly,this.editModeView(),this.renderView()},readMode:function(){this.options.params.input.readOnly=!0,this.readModeView(),this.renderView()},editModeView:function(){this.inputView=new t(this.options)},readModeView:function(){this.inputView=new t(this.options)},renderView:function(){this.$el.html(this.inputView.render().el)},focus:function(){this.inputView&&this.inputView.focus()}})}.apply(t,n),!(void 0!==s&&(e.exports=s))},function(e,t,i){var n,s;n=[i(2)],s=function(e){var t=e._,i=e.internal.views.forms.helpers.InputFactory;return e.View.extend({className:"entitlement-group",attributes:function(){return{"data-se":"entitlement-"+this.options.params.entitlementModel.get("id")}},initialize:function(){this.entitlementModel=this.options.params.entitlementModel,this.formInput=this.options.params.input;var e=t.defaults({model:this.model,params:t.extend({},{autoWidth:!0},this.formInput.params||{})},this.formInput);this.add(i.create(e))},focus:function(){this.first()&&this.first().focus()}})}.apply(t,n),!(void 0!==s&&(e.exports=s))},function(e,t,i){var n,s;n=[i(245)],s=function(e){return e.extend({readMode:function(){this.model.set(this.formInput.name,this.entitlementModel.get("targetProfileValue")),e.prototype.readMode.apply(this,arguments)}})}.apply(t,n),!(void 0!==s&&(e.exports=s))},function(e,t,i){var n,s;n=[i(247),i(249),i(250)],s=function(e,t,i){return e.extend({editModeView:function(){"select"===this.formInput.type?this.inputView=new i(this.options):this.inputView=new t(this.options)}})}.apply(t,n),!(void 0!==s&&(e.exports=s))},function(e,t,i){var n,s;n=[i(2),i(244),i(246)],s=function(e,t,i){var n=e._,s=e.View.extend({events:{"click a":"resetClick"},template:'<div class="override-reset">{{i18n code="appinstance.assignments.overrides.default.value.text"}}<a class="override-reset-link"><span class="icon-16 icon-only factory-reset-16"></span> {{i18n code="appinstance.assignments.overrides.reset.link"}}</a></div>',resetClick:function(){this.options.entitlementModel.trigger("resetClicked")}});return i.extend({initialize:function(){i.prototype.initialize.apply(this,arguments),this.overrideResetCheck(),this.overrideResetCheck=n.debounce(this.overrideResetCheck,100),this.listenTo(this.model,"change:"+this.formInput.name,this.overrideResetCheck),this.listenTo(this.entitlementModel,"resetClicked",this.handleResetClick)},handleResetClick:function(){this.model.set(this.formInput.name,this.entitlementModel.get("targetPreviewValue"),{silent:!0}),this.entitlementModel.setOverrideToDefault(),this.hideReset(),this.render()},isSameValues:function(){var e=this.entitlementModel.get("targetPreviewValue"),i=this.model.get(this.formInput.name),n=t.isEmptyValue(e),s=t.isEmptyValue(i);return n&&s||t.isEqual(e,i)},overrideResetCheck:function(){var e=this.isSameValues();e?this.hideReset():this.showReset()},showReset:function(){if(!this.resetView){var e=new s({entitlementModel:this.entitlementModel});this.resetView=this.add(e).last(),this.entitlementModel.clearOverrideToDefault()}},hideReset:function(){this.resetView&&this.resetView.remove(),this.resetView=null}})}.apply(t,n),!(void 0!==s&&(e.exports=s))},function(e,t,i){var n,s;n=[i(2),i(244),i(249)],s=function(e,t,i){var n=e._;return i.extend({defaultOption:null,initialize:function(){this._appendDefaultOption(),i.prototype.initialize.apply(this,arguments)},isSameValues:function(){var e=this.$el.find("select option:selected").index(),i=0===e&&!n.isNull(this.defaultOption);i&&this.model.set(this.formInput.name,null,{silent:!0});var s=this.entitlementModel.get("targetPreviewValue"),o=this.model.get(this.formInput.name),a=t.isEmptyValue(s),r=t.isEmptyValue(o);return a&&r||s===o||i},_appendDefaultOption:function(){var i=this.options.params.entitlementModel.get("sourceExpression"),s=this.options.params.entitlementModel.get("targetPreviewValue");t.isEmptyValue(i)&&t.isEmptyValue(s)?this.defaultOption=e.loc("appinstance.assignments.select.notMapped"):t.isEmptyValue(i)||i!==s||(this.defaultOption=i),this.defaultOption&&(this.options.params.input.options=n.extend({"":this.defaultOption},this.options.params.input.options))}})}.apply(t,n),!(void 0!==s&&(e.exports=s))},function(e,t,i){var n,s;n=[i(2)],s=function(e){function t(e){if(r.isArray(e))return r.object(e,e);throw new Error("argument is not an array or it is empty")}function i(e){var t=l.parseFloat(e);return""===e?null:t}function n(e){var t={displayType:e.get("__displayType__"),name:e.get("name"),title:e.get("title"),enumValues:e.getEnumValues(),readOnly:e.get("__isReadOnly__")};return c.getEnumInputOptions(t)}function s(e){var i=e.get("items"),n=!1,s=[];return r.isObject(i)&&r.has(i,"objectName")?(n=!0,s=t(e.get("__possibleValues__")||[])):e.get("__possibleValues__")&&(n=!0,s=t(e.get("__possibleValues__")||[])),n?r.isEmpty(s)?{type:"text",name:"__displayEmptyPredefined__",readOnly:!0}:{type:"checkboxset",options:s,readOnly:e.get("__isReadOnly__")}:r.isObject(i)&&r.has(i,"type")?{input:d,params:{itemType:i.type},readOnly:e.get("__isReadOnly__")}:void 0}function o(e){var i=e.get("objectName"),n=i?e.get("__possibleValues__"):{};return r.isEmpty(n)?{type:"text",readOnly:e.get("__isReadOnly__")}:{type:"select",options:t(n),readOnly:e.get("__isReadOnly__")}}function a(e,t,i){var n,s=e.get("__displayType__"),o=e.get("name"),a=e.get("items"),l=e.get("objectName");if(!e.isEnumType()){switch(s){case"arrayofstring":case"arrayofnumber":case"arrayofinteger":r.isObject(a)&&r.has(a,"objectName")?n=t.get(a.objectName)||[]:r.isUndefined(t.get(o))||(n=r.union(t.get(o)||[],i.get(o)||[]));break;case"reference":n=t.get(l)}e.set("__possibleValues__",n)}}var r=e._,l=e.internal.util.StringUtil,p=e.internal.views.forms.inputs.BooleanSelect,d=e.internal.views.forms.inputs.TextBoxSet,c=e.internal.views.forms.helpers.EnumTypeHelper;return{createInputOptions:function(t){var a=t.get("__displayType__"),l={name:t.get("name"),label:t.get("title")||t.get("name")};if(t.isEnumType())r.extend(l,n(t));else switch(a){case"arrayofstring":case"arrayofnumber":case"arrayofinteger":r.extend(l,s(t));break;case"reference":r.extend(l,o(t));break;case"boolean":l.input=p,l.readOnly=t.get("__isReadOnly__");break;case"number":case"integer":l.type="text",l.to=i,l.readOnly=t.get("__isReadOnly__");break;case"image":l.type="text",l.readOnly=!0,l.from=function(){return r.isEmpty(this.model.get(l.name))?"":e.loc("user.profile.image.image_set")};break;default:l.type="text",l.readOnly=t.get("__isReadOnly__")}return l},assignmentRequired:function(t){var i,n=t.get("__displayType__");if(!t.isEnumType())switch(n){case"arrayofstring":case"arrayofnumber":case"arrayofinteger":var o=s(t);o&&o.name&&"__displayEmptyPredefined__"===o.name&&(i={__displayEmptyPredefined__:"("+e.loc("profile.apps.attribute.option.empty")+")"})}return i},prepareSchema:function(e,t,i){return e.each(function(e){a(e,t,i)})},augmentSchemaProp:a}}.apply(t,n),!(void 0!==s&&(e.exports=s))},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(2),s=n.View.extend({template:(0,n.tpl)('\t      <span class="icon success-16"></span>\t      <p>{{i18n code="appinstance.userassignment.assigned.reset.synced.password.success" bundle="messages"}}</p>\t    '),className:"infobox infobox-success rounded-4"}),o=n.View.extend({template:(0,n.tpl)('\t      <span class="icon error-16"></span>\t      <p>{{i18n code="appinstance.userassignment.assigned.reset.synced.password.failure" bundle="messages" \t      arguments="error"}}</p>\t    '),className:"infobox infobox-error rounded-4"});t.default=n.View.extend({template:(0,n.tpl)('\t      <a href="#" id="reset-unique-password">\t      {{i18n code="appinstance.userassignment.assigned.reset.synced.password.label" bundle="messages"}}</a> \t      ({{i18n code="appinstance.userassignment.assigned.reset.synced.password.explain.text" bundle="messages"}} \t      <a href="/admin/app/{{name}}/instance/{{id}}/#tab-user-management" \t      target="_blank" class="text-link">\t      {{i18n code="appinstance.userassignment.assigned.reset.synced.password.explain.link" bundle="messages"}}</a>)\t    '),events:{"click #reset-unique-password":"resetUniquePassword"},focus:function(){},resetUniquePassword:function(){var e=(0,n.tpl)("/api/v1/apps/{{id}}/users/{{userId}}/credentials/cyclePassword");n.$.ajax({method:"POST",url:e({id:this.model.get("id"),userId:this.options.userId})}).done(function(){var e=new s;(0,n.$)('[data-se="o-form-input-password"]').replaceWith(e.render().$el)}).fail(function(e){var t=JSON.parse(e.responseText),i=void 0;i=new o(n._.isArray(t.errorCauses)&&t.errorCauses.length>0?{error:n._.pluck(t.errorCauses,"errorSummary").join(", ")}:{error:t.errorSummary}),(0,n.$)('[data-se="o-form-input-password"]').replaceWith(i.render().$el)})}})},function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=i(2),o=i(138),a=n(o),r=i(252),l=n(r),p=s.internal.util,d=s.internal.views,c=p.StringUtil,u=d.forms,h=u.inputs,m=u.helpers,f=h.BooleanSelect,g=h.TextBoxSet,_=m.EnumTypeHelper,v={EDIT_USERNAME_AND_PASSWORD:(0,s.loc)("appwizard.sso.creds.userSetsAll"),ADMIN_SETS_CREDENTIALS:(0,s.loc)("appwizard.sso.creds.adminSetsAll"),EDIT_PASSWORD_ONLY:(0,s.loc)("appwizard.sso.creds.adminSetsUser"),EXTERNAL_PASSWORD_SYNC:(0,s.loc)("appwizard.sso.creds.oktaPassword"),SHARED_USERNAME_AND_PASSWORD:(0,s.loc)("appwizard.sso.creds.shared")},y=s.View.extend({template:'{{{i18n code="appuser.grouporigin.explain" bundle="messages" arguments="url;group"}}}',getTemplateData:function(){var e=(0,s.tpl)("/admin/group/{{groupId}}#tab-apps");return{url:e({groupId:this.model.escape("groupId")}),group:this.model.escape("groupName")}}}),b=s.View.extend({template:'{{{i18n code="appuser.credential.explain" bundle="messages" arguments="url"}}}',getTemplateData:function(){var e=void 0,t=this.model.get("name");return e="omm_wifi"===t?(0,s.tpl)("/admin/app/{{appName}}/instance/{{appInstanceId}}/#tab-wifi-setting"):(0,s.tpl)("/admin/app/{{appName}}/instance/{{appInstanceId}}/#tab-signon"),{url:e({appName:this.model.get("name"),appInstanceId:this.model.get("id")})}}});t.default=s.Form.extend({layout:"o-form-wrap",attributes:{name:"APPUSER"},initialize:function(){this.appUser=this.options.appUser,this.possibleValues=this.options.possibleValues,this.instanceFeatures=this.options.instance.get("features"),(0,s._)(this.instanceFeatures).contains("PROFILE_MASTERING")&&(this.readOnly=!0),this.groupAppUserProperties=this.options.groupAppUserProperties,this.listenTo(this.appUser,"request",this.__setSavingState),this.listenTo(this.appUser,"error sync",this.__clearSavingState),this.listenTo(this.appUser,"invalid error",this.handleFormError),this.listenTo(this,"save",this._saveAppUser),this._addUserAssignmentHelpText(this.options.userAssignmentHelpText),this._setCredentialPropertyReadOnly(),this._addCredentialsInputs(),this._addExternalIdInput(this.appUser.get("externalId")),s._.each(this.options.properties.reject(function(e){return"userName"===e.get("name")}),this._addProfileInput,this),this._addGroupInput()},doSave:function(){var e=this;this.appUser.save().then(function(){e.options.savedTriggerEvent?e.state.trigger(e.options.savedTriggerEvent,e.options.instance):e.state.trigger("updateApps")},s._.bind(this.notify,this,"error","An error occured."))},handleFormError:function(e,t){if(this.getAttribute("showErrors")){this.$(".o-form-error-container").empty();var i=new a.default({errors:JSON.parse(t.responseText).errorCauses});this.add(i,".o-form-error-container"),this.trigger("resize")}},_isNonCredentialPropertyReadOnly:function(e){var t=e.get("__isReadOnly__");return t||this._isGroupOriginProperty(e)},_isGroupOriginProperty:function(e){var t=this.appUser.get("groupManaged"),i=!s._.isEmpty(this.groupAppUserProperties.findWhere({name:e.get("name")}));return t&&i},_setCredentialPropertyReadOnly:function(){var e=this.options.instance.get("__scheme__");if(this.isUserNameReadOnly=!1,e)switch(this.isPasswordReadOnly=!0,e){case"EDIT_USERNAME_AND_PASSWORD":this.isUserNameReadOnly=!0;break;case"ADMIN_SETS_CREDENTIALS":this.isPasswordReadOnly=!1;break;case"SHARED_USERNAME_AND_PASSWORD":this.isUserNameReadOnly=!0}},_addCredentialsInputs:function(){var e=v[this.options.instance.get("__scheme__")],t=(0,s._)(this.instanceFeatures).contains("PUSH_PASSWORD_UPDATES"),i=this.appUser.options.credentials;
e&&!t&&(this.model.set("__schemeDisplay__",e),this.addInput({type:"text",readOnly:!0,name:"__schemeDisplay__",label:"Credential Security",explain:!this.settings.get("isWifiApp")&&new b({model:this.options.instance})})),this.addInput({type:"text",readOnly:this.isUserNameReadOnly,name:"userName",label:"User Name"});var n={type:"password",name:"password",label:"Password",placeholder:"********"};e&&!t&&(e===v.ADMIN_SETS_CREDENTIALS?this.addInput(s._.defaults({placeholder:i.password?"********":"",readOnly:this.isPasswordReadOnly,explain:i.password?(0,s.loc)("password.set"):(0,s.loc)("password.notSet")},n)):this.addInput(s._.defaults({readOnly:this.isPasswordReadOnly},n))),this._addSyncUniquePasswordExplain(t,n)},_addSyncUniquePasswordExplain:function(e,t){e&&this.appUser.get("_links")&&this.appUser.get("_links").cyclePassword&&this.addInput(s._.defaults({readOnly:!0,explain:this.appUser.isNew()?void 0:new l.default({model:this.options.instance,userId:this.appUser.get("id")})},t))},_addExternalIdInput:function(e){e&&(this.model.set("__externalId__",e),this.addInput({type:"text",readOnly:!0,name:"__externalId__",label:"External Id"}))},_addProfileInput:function(e){var t=this._isGroupOriginProperty(e),i=this._isNonCredentialPropertyReadOnly(e),n=t?new y({model:this.appUser}):void 0;if(e.isEnumType())this._addEnumInput(e,i,n);else switch(e.get("__displayType__")){case"arrayofstring":case"arrayofnumber":case"arrayofinteger":this._addArrayInput(e,i,n);break;case"reference":this._addReferenceInput(e,i,n);break;case"boolean":this._addBooleanInput(e,i,n);break;case"number":case"integer":this._addNumberInput(e,i,n);break;case"image":this._addImageInput(e,n);break;default:this.addInput({type:"text",readOnly:i,name:e.get("name"),label:e.get("title"),explain:n})}},_addEnumInput:function(e,t,i){var n={displayType:e.get("__displayType__"),name:e.get("name"),title:e.get("title"),enumValues:e.getEnumValues(),explain:i,readOnly:t},s=_.getEnumInputOptions(n);this.addInput(s)},_addArrayInput:function(e,t,i){var n=e.get("name"),o=e.get("title"),a=e.get("items"),r=!1,l=[];s._.isObject(a)&&s._.has(a,"objectName")?(r=!0,l=this._convertArrayToObject(this.possibleValues.get(a.objectName)||[])):s._.isUndefined(this.possibleValues.get(n))||(r=!0,l=this._convertArrayToObject(s._.union(this.possibleValues.get(n)||[],this.model.get(n)||[]))),r?this._predefinedOptions(l,o,n,t,i):s._.isObject(a)&&s._.has(a,"type")&&this.addInput({input:g,params:{itemType:a.type},model:this.model,name:n,readOnly:t,label:o,explain:i})},_predefinedOptions:function(e,t,i,n,o){s._.isEmpty(e)?(this.model.set("__displayEmptyPredefined__","("+(0,s.loc)("profile.apps.attribute.option.empty")+")"),this.addInput({type:"text",name:"__displayEmptyPredefined__",readOnly:!0,label:t})):this.addInput({type:"checkboxset",options:e,name:i,readOnly:n,label:t,explain:o})},_addReferenceInput:function(e,t,i){var n=e.get("objectName"),o=n?this.possibleValues.get(n):{};s._.isEmpty(o)||this.addInput({type:"select",name:e.get("name"),label:e.get("title"),options:this._convertArrayToObject(o),readOnly:t,explain:i})},_addBooleanInput:function(e,t,i){this.addInput({input:f,name:e.get("name"),label:e.get("title"),readOnly:t,explain:i})},_addNumberInput:function(e,t,i){this.addInput({type:"text",name:e.get("name"),label:e.get("title"),readOnly:t,to:this._convertString,explain:i})},_addImageInput:function(e,t){var i=this,n=e.get("name");this.addInput({type:"text",name:n,label:e.get("title"),readOnly:!0,from:function(){return s._.isEmpty(i.model.get(n))?"":(0,s.loc)("user.profile.image.image_set")},explain:t})},_addGroupInput:function(){this.appUser.get("groupManaged")&&(this.model.set("__scope__",this.appUser.get("scope")),this.addGroupInputWidget())},addGroupInputWidget:function(){this.addInput({type:"radio",options:{GROUP:"Group",USER:"Administrator (overrides group)"},name:"__scope__",label:"Assignment master"})},_addUserAssignmentHelpText:function(e){if(e&&e.get("displayUserAssignmentHelpText")){var t=e.get("appName");this.add((0,s.createCallout)({type:"warning",title:(0,s.loc)("app."+t+".user_assignment_help_text.title"),subtitle:(0,s.loc)("app."+t+".user_assignment_help_text.content")}))}},_saveAppUser:function(e){this.isUserNameReadOnly?delete this.appUser.get("credentials").userName:this.appUser.get("credentials").userName=e.get("userName"),this.isPasswordReadOnly?delete this.appUser.get("credentials").password:this.appUser.get("credentials").password=e.get("password"),this.appUser.set({scope:e.get("__scope__"),profile:s._.omit(e.toJSON(),"userName","password")}),this.doSave()},_convertArrayToObject:function(e){if(s._.isArray(e))return s._.object(e,e);throw new Error("argument is not an array or it is empty")},_convertString:function(e){var t=c.parseFloat(e);return""===e?null:t}})},function(e,t,i){var n,s;n=[i(2),i(255),i(256),i(258),i(243),i(259),i(260)],s=function(e,t,i,n,s,o,a){function r(e,t){var i,n=o.toFixedValue(t.sourceExpression),s=e[t.targetField];return s&&(n=a.normalizeValue(s.get("type"),n)),i=b.isUndefined(n)?t.sourceExpression:n,b.extend({},t,{value:i})}function l(){return v?A.Deferred().resolve():(v=new t.Model({id:"default"}),v.fetch())}function p(e){var t;return t=y&&y.get("target")===e?A.Deferred().resolve():function(){var t={source:v.get("id"),target:e};return y=new i.Model,y.fetch({data:t})},l().then(t).then(function(){return{oktaUserProfile:v,oktaToAppMapping:y}})}function d(e){var t=e.get("name"),i=e.get("type"),n=e.get("mutability");return{name:t,source:[{type:"DEFAULT"}],schemaPropertyDisplayType:i,schemaPropertyMutability:n}}function c(e,t){if(b.isEmpty(t))return b.mapObject(e,d);var i=[];b.each(t,function(t){var n=e[t.name];n&&i.push(b.extend({},t,{schemaPropertyDisplayType:n.get("type"),schemaPropertyMutability:n.get("mutability")}))});var n=b.map(i,b.property("name")),s=b.keys(e),o=b.difference(s,n),a=o.length>=1?b.chain(o).map(b.propertyOf(e)).map(d).value():[];return b.union(i,a)}function u(e){var t=b.isArray(e)&&e.length>=1?b.head(e):{},i=b.isString(t.type)?t.type:"ADMIN";return i.toLowerCase()}function h(e){return b.isArray(e)&&0!==e.length?b.chain(e).filter(function(e){return b.isString(e.type)&&"GROUP"===e.type}).map(function(e){return e.id}).value():[]}function m(e,t,i){i||(i={});var n=b.map(t,function(t){var n={id:t.name,sourceType:u(t.source),sourceGroup:h(t.source),schemaPropertyDisplayType:t.schemaPropertyDisplayType,schemaPropertyMutability:t.schemaPropertyMutability},s=b.findWhere(e,{targetField:t.name});return n.targetProfileValue=i[t.name],s&&b.extend(n,{sourceExpression:s.sourceExpression,targetPreviewValue:s.value,pushStatus:s.pushStatus}),n});return new s.Collection(n)}function f(e,t){var i=e.get("id"),n=e.get("properties"),s=n.pluck("name"),o=b.object(s,n.models);return p(i).then(function(e){var i=e.oktaToAppMapping.get("propertyMappings").toJSON(),n=t.toJSON().profile,s=t.get("_embedded.metadata");return s=c(o,s),i=b.map(i,b.partial(r,o)),m(i,s,n)})}function g(e){var t=e.oktaToAppMapping.get("propertyMappings").toJSON(),i=e.appUserProfile.get("id"),s=new n({userId:e.appUserProfile.get("userId")});return e.previewMapping=s,s.set({sourceId:e.oktaUserProfile.get("id"),targetId:i,propertyMappings:t}),s.save().then(b.constant(e))}function _(e,t){var i=e.get("id"),n=e.get("properties"),s=n.pluck("name"),o=b.object(s,n.models);return p(i).then(function(t){return b.extend({},t,{appUserProfile:e})}).then(g).then(function(e){var i=e.previewMapping.get("propertyMappings"),n=t.toJSON().profile,s=t.get("__metadata__");return s=c(o,s),m(i,s,n)})}var v,y,b=e._,A=e.$;return{createGAAEntitlementMeta:f,createAAEntitlementMeta:_}}.apply(t,n),!(void 0!==s&&(e.exports=s))},,function(e,t,i){var n,s;n=[i(2),i(257)],s=function(e,t){var i=function(e){return!!/get(Manager|Assistant)(App)*User(?=\()/.test(e)},n=e.BaseModel,s=e._,o=n.extend({defaults:{targetField:void 0,sourceExpression:"",pushStatus:"",__targetAttribute__:void 0},initialize:function(){this.listenTo(this,"updatePushStatus",function(e,i){""===this.get("sourceExpression")?this.set("pushStatus",null):this.get("pushStatus")||("appToOkta"===e?this.set("pushStatus",s.contains(i,"PROFILE_MASTERING")?t.PUSH:t.DONT_PUSH):this.set("pushStatus",s.contains(i,"PUSH_PROFILE_UPDATES")?t.PUSH:t.DONT_PUSH))})}}),a=e.Collection.extend({model:o,toJSON:function(){var t=e.Collection.prototype.toJSON.apply(this,arguments);return s.filter(t,function(e){return e.pushStatus&&e.sourceExpression})}}),r=n.extend({defaults:{sourceId:void 0,targetId:void 0,propertyMappings:new a},url:"/api/internal/v1/mappings",parse:function(e){return s.isArray(e)?(e[0].propertyMappings=new a(e[0].propertyMappings||[]),e[0]):(e.propertyMappings=new a(e.propertyMappings||[]),e)},sync:function(e,t,i){return"create"===e&&(i.method="PUT"),n.prototype.sync.call(this,e,t,i)},toJSON:function(){var e=n.prototype.toJSON.apply(this,arguments);return e.propertyMappings=s.isArray(e.propertyMappings)?e.propertyMappings:e.propertyMappings.toJSON(),e},isSynced:function(){var e=this._getSynced(),t=this.toJSON();return!(!e||!t||e.sourceId!==t.sourceId||e.targetId!==t.targetId)&&(e.propertyMappings.length===t.propertyMappings.length&&(s.each(e.propertyMappings,function(e){var i=s.findWhere(t.propertyMappings,e);void 0!==i&&(t.propertyMappings=s.without(t.propertyMappings,i))}),0===t.propertyMappings.length))},hasManagerAssistantInMapping:function(){for(var e=this.toJSON().propertyMappings,t=!1,n=e.length,s=0;!t&&s<n;)t=i(e[s].sourceExpression),s++;return t}});return{Model:r,ProfileMappingModel:o,ProfileMappingCollection:a}}.apply(t,n),!(void 0!==s&&(e.exports=s))},function(e,t,i){"use strict";!(e.exports={PUSH:"PUSH",DONT_PUSH:"DONT_PUSH",getIconClass:function(e){var t="mapping-rule-icon",i="";switch(e){case this.PUSH:i="mapping-rule-create-update";break;case this.DONT_PUSH:i="mapping-rule-create-only";break;default:i="mapping-rule-not-mapped"}return t+" "+i},getDropDownWrapperClass:function(e){switch(e){case this.PUSH:return"mapping-rule-create-update-dropdown";case this.DONT_PUSH:return"mapping-rule-create-only-dropdown";default:return"mapping-rule-not-mapped-dropdown"}}})},function(e,t,i){var n,s;n=[i(2)],s=function(e){var t=e.internal.util.SchemaUtil,i=function(e){return t.DATATYPE[e]||e},n=e.tpl("/api/internal/v1/mappings/preview?includeAllTargetFields={{includeAllTargetFields}}"),s=e._;return e.Model.extend({url:function(){return n(this.pick("includeAllTargetFields"))},props:{sourceId:{type:"string",required:!0},targetId:{type:"string",required:!0},userId:{type:"string",required:!0},propertyMappings:{type:"array",required:!0}},local:{includeAllTargetFields:{type:"boolean",value:!0}},parse:function(e){return s.each(e.propertyMappings,function(e){e.sourceExpression&&(e.__displaySourceType__=t.getDisplayType(e.sourceExpressionType,e.sourceExpressionFormat,e.sourceExpressionItems?e.sourceExpressionItems.type:void 0,"fx"),"object"===e.sourceExpressionType&&"image"===e.sourceExpressionExtendedType&&(e.__displaySourceType__="image"),e.__displaySourceTypeLabel__=i(e.__displaySourceType__));var n=e.targetFieldType;n&&(e.__displayTargetType__=t.getDisplayType(n,e.targetFieldFormat,e.targetFieldItems?e.targetFieldItems.type:void 0),"object"===e.targetFieldType&&"image"===e.targetFieldExtendedType&&(e.__displayTargetType__="image"),e.__displayTargetTypeLabel__=i(e.__displayTargetType__)),e.__displayValue__=this._getDisplayValue(e.value)},this),e},_getDisplayValue:function(e){return s.isUndefined(e)&&(e=null),JSON.stringify(e).replace(/\\\\/g,"\\")}})}.apply(t,n),!(void 0!==s&&(e.exports=s))},function(e,t,i){var n,s;n=[i(2)],s=function(e){function t(e){return e===f}function i(e){return"'"===e}function n(e){return'"'===e}function s(e){return _.test(e)}function o(e,t){if(!h.isFunction(e)||h.isEmpty(t))return[];var i=h.head(t);return e(i)?[i].concat(o(e,h.rest(t))):[]}function a(e,t){return h.isString(t)&&!h.isEmpty(t)&&h.every(t,s)?e+f+t:""}function r(e){if(h.isString(e)){var i=o(h.negate(t),e).join(""),n=o(s,e.replace(i+f,"")).join(""),a=e.replace(i+f+n,"");return h.contains(b,i)&&0===a.length?n:void 0}}function l(e){return Number(e)}function p(e){return a(y,e)}function d(e){return a(v,e)}function c(e){return h.isString(e)&&(e=m.trim(e)),void 0===e||""===e||h.isArray(e)&&0===e.length?"":h.isArray(e)?"{"+h.map(e,c).join(g)+"}":JSON.stringify(e)}function u(e,t){if(h.isString(e)){var s,o=m.trim(e),a=o.length,r=[h.head(o),h.last(o)],p=o.substring(1,a-1),d=h.isNumber(l(o));if("number"===t&&d)return l(o);if(0!==p.length)return h.every(r,n)||h.every(r,i)?p:h.isEqual(r,["{","}"])?(t=t||n(h.head(p))||i(h.head(p))?"string":"number",s=h.chain(p.split(g)).map(function(e){return u(e,t)}).filter(h.isDefined).value(),s.length>0?s:void 0):void 0}}var h=e._,m=e.$,f=".",g=",",_=new RegExp("[a-zA-Z0-9_]"),v="user",y="appuser",b=[v,y];return{toAttribute:r,fromAppUserAttribute:p,fromOktaUserAttribute:d,toFixedValue:u,fromFixedValue:c}}.apply(t,n),!(void 0!==s&&(e.exports=s))},function(e,t,i){var n,s;n=[i(2)],s=function(e){var t=e._,i=function(e){return"true"===e||"false"!==e&&null},n=function(e,i){return"array"===e?t.isArray(i):"string"===e?t.isString(i):"boolean"===e?t.isBoolean(i)||t.isNull(i):("number"===e||"integer"===e)&&(t.isNumber(i)&&!t.isNaN(i))};return{normalizeValue:function(e,t){return"number"!==e&&"integer"!==e||(t=Number(t)),"boolean"===e&&(t=i(t)),n(e,t)?t:void 0}}}.apply(t,n),!(void 0!==s&&(e.exports=s))},function(e,t,i){var n,s;n=[i(2)],s=function(e){var t=e.tpl("/api/v1/internal/apps/{{__instanceId__}}/types");return e.BaseModel.extend({initialize:function(e){if(e||(e={}),!e.__instanceId__)throw"Cannot initialize AppUserCustomTypePossibleValues without an instance id"},url:function(){return t(this.toJSON({verbose:!0}))}})}.apply(t,n),!(void 0!==s&&(e.exports=s))},function(e,t,i){var n,s;n=[i(2)],s=function(e){var t=e.tpl("/api/v1/internal/apps/{{instanceId}}/userAssignmentHelpText");return e.Model.extend({props:{instanceId:"string",appName:"string",userAssignmentHelpTextSupported:"boolean",displayUserAssignmentHelpText:"boolean"},initialize:function(e){if(e||(e={}),!e.instanceId)throw"Cannot initialize UserAssignmentHelpText without an instance id";this.instanceId=e.instanceId},url:function(){return t({instanceId:this.instanceId})}})}.apply(t,n),!(void 0!==s&&(e.exports=s))},function(e,t,i){var n,s;n=[i(2)],s=function(e){var t=e._,i=e.internal.util.Util.constantError,n=20;return e.MultiViewModalDialog.extend({params:{containerId:"create-assignment-modal",minWidth:620,maxWidth:688,autoResize:!1,autoPosition:!0},height:535,datalistView:i("datalistView is an abstract variable"),getCollection:i("getCollection is an abstract method"),createAssignmentForm:i("createAssignmentForm is an abstract method"),constructor:function(t){this.options=t,this.collection=this.getCollection(),t.collection=this.collection,this.View=this.datalistView,e.MultiViewModalDialog.apply(this,arguments)},stateEvents:{assign:"handleAssignment","change:unassignedSearchQuery":"fetchCollection",doneAssignment:"remove"},initialize:function(){this.triggerCloseModalEvent=t.once(this.triggerCloseModalEvent),t.bindAll(this,"fetchCollection","updateCollection","handleAssignment","transitToFormView","transitToListView","handleAssignSuccessfully")},render:function(){e.MultiViewModalDialog.prototype.render.apply(this,arguments),this.fetchCollection()},fetchCollection:function(){return this.collection.fetch({data:{q:this.state.get("unassignedSearchQuery"),limit:n}})},updateCollection:function(){this.collection.trigger("itemAssigned",this.assignmentId)},handleAssignment:function(e){this.assignmentId=e,this.createAssignmentForm(e).then(this.transitToFormView)},transitToFormView:function(e){e&&(this.listenTo(e,"cancel",this.transitToListView),this.listenToOnce(e.model,"sync",this.handleAssignSuccessfully),this.switchView(e))},handleAssignSuccessfully:function(){this.transitToListView(),this.updateCollection()},transitToListView:function(){this.switchView(this.datalistView),this.collection.trigger("sync")},remove:function(){e.MultiViewModalDialog.prototype.remove.apply(this,arguments),this.triggerCloseModalEvent()},triggerCloseModalEvent:function(){this.state.trigger("closeModal")}})}.apply(t,n),!(void 0!==s&&(e.exports=s))},function(e,t,i){var n,s;n=[i(2)],s=function(e){var t=e.$,i=e._,n=e.BaseModel,s=e.tpl("/api/v1/apps/{{__instanceId__}}/catalog/users"),o=n.extend({defaults:{__isAssigned__:!1,__displayName__:n.ComputedProperty(["profile"],function(e){return t.trim((e.firstName||"")+" "+(e.lastName||""))}),__email__:n.ComputedProperty(["profile"],function(e){return e.email||""})},initialize:function(e){if(n.prototype.initialize.apply(this,arguments),e||(e={}),!this.get("__instanceId__"))throw"Cannot initialize CatalogUser without an instance id"},urlRoot:function(){return s({__instanceId__:this.get("__instanceId__")})}}),a=e.Collection.extend({model:o,url:function(){return s({__instanceId__:this.__instanceId__})},initialize:function(t,i){if(e.Collection.prototype.initialize.apply(this,arguments),i||(i={}),this.__instanceId__=i.__instanceId__,!this.__instanceId__)throw"Cannot initialize CatalogUsers without an instance id"},parse:function(e){return i.each(e,i.bind(function(t,i){e[i].__instanceId__=this.__instanceId__},this)),e}});return{Model:o,Collection:a}}.apply(t,n),!(void 0!==s&&(e.exports=s))},function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=i(2),o=i(266),a=n(o);t.default=a.default.extend({id:"unassigned-users",className:"unassigned-users",columns:[{template:'\t          <a href="/admin/user/profile/view/{{id}}">{{__displayName__}}</a>\t          <span class="user-name">{{__email__}}</span>\t        '},{className:"user-action",template:'\t          {{#if __isAssigned__}}\t            <input name="ADD_USER" data-se=ua-{{id}} class="button disabled" type="button" disabled\t            value="{{i18n code="appinstance.assigned"}}">\t          {{else}}\t            <input name="ADD_USER"  data-se=ua-{{id}} class="button" type="button" \t            value="{{i18n code="appinstance.assign"}}">\t          {{/if}}\t        ',events:{"click input":function(e){e.preventDefault(),e.stopPropagation(),this.state.trigger("assign",this.model.get("id"))}},initialize:function(){var e=this;this.listenTo(this.model,"change:__isAssigned__",function(){e.state.set("newlyAssignedUsersCount",e.state.get("newlyAssignedUsersCount")+1),e.render()})}}],emptyState:{title:(0,s.loc)("appinstance.userassignment.empty.title"),subtitle:(0,s.loc)("appinstance.userassignment.assign.empty.subtitle")}})},function(e,t,i){var n,s;n=[i(2)],s=function(e){var t=e.View.extend({className:"simplemodal-button-bar o-form-button-bar",template:'<input type="button" data-type="close" \t                      class="button button-primary js-done-button" \t                      value="{{i18n code="simplemodal.done"}}">',events:{"click .js-done-button":"doneAssignment"},doneAssignment:function(){this.state.trigger("doneAssignment")}});return e.DataList.extend({resizeSelector:".data-list-content-wrap",toolbar:[{type:"search",align:"left",minChars:1,field:"unassignedSearchQuery"}],collectionEvents:{sync:"balance",itemAssigned:"itemAssigned"},postRender:function(){this.add(t)},itemAssigned:function(e){var t=this.collection.findWhere({id:e});t&&t.set("__isAssigned__",!0)},balance:e._.debounce(function(){e.DataList.prototype.balance.apply(this,arguments),this.trigger("resize")},this.debounceTime)})}.apply(t,n),!(void 0!==s&&(e.exports=s))},function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=i(2),o=i(268),a=n(o),r=i(275),l=n(r),p=i(276),d=n(p);t.default=a.default.extend({datalistView:d.default,initialize:function(){a.default.prototype.initialize.apply(this,arguments),this.state.set("newlyAssignedGroupsCount",0)},title:function(){return(0,s.loc)("appinstance.groupassignment.assign.title","messages",[this.options.appInstanceLabel])},getCollection:function(){return new l.default.Collection(null,{instanceId:this.options.appInstanceId})},getDataForAssignment:function(e){return{appInstanceId:this.options.appInstanceId,appName:this.options.appName,groupId:e}}})},function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=i(2),o=i(269),a=n(o),r=i(270),l=n(r),p=i(273),d=n(p),c=i(254),u=n(c),h=i(274),m=n(h),f=i(261),g=n(f),_=i(262),v=n(_),y=i(263),b=n(y),A=s.internal.util.Util,w=s.internal.views.forms.helpers.SchemaFormFactory;t.default=b.default.extend({getDataForAssignment:A.constantError("getDataForAssignment is an abstract method"),createAssignmentForm:function(e){var t=this.getDataForAssignment(e),i=t.appInstanceId,n=t.groupId;return this._fetchSchemaData(i,n).then(s._.bind(this._createAssignmentOrForm,this))},_fetchSchemaData:function(e,t){var i=new m.default.Model({id:e}),n=new g.default({__instanceId__:e}),o=new v.default({instanceId:e});return s.$.when(i.fetch(),n.fetch(),o.fetch()).then(function(){return{schema:i,possibleValues:n,groupId:t,appInstanceId:e,userAssignmentHelpText:o}})},_createAssignmentOrForm:function(e){var t=e.schema.get("properties"),i=e.possibleValues.toJSON(),n=new a.default.Model({id:e.groupId,__instanceId__:e.appInstanceId});if(w.hasValidSchemaProps(t,i)){var o=w.prepareSchema(t,i,n);return this._createAppGroupForm(e,n,o)}return n.save().then(this.updateCollection).then(s._.constant(null))},_createAppGroupForm:function(e,t,i){var n=this,o=this.getDataForAssignment(this.assignmentId);if(this.settings.hasFeature("APPLICATION_ENTITLEMENT_POLICY"))return u.default.createGAAEntitlementMeta(e.schema,t).then(function(s){return new l.default({entitlementAttributes:s,model:t,schemaProperties:i,state:n.state,settings:n.settings,appInstanceId:o.appInstanceId,appName:o.appName,title:null,userAssignmentHelpText:e.userAssignmentHelpText})});var a=new d.default({model:t,schemaProperties:i,state:this.state,settings:this.settings,title:null,userAssignmentHelpText:e.userAssignmentHelpText});return(new s.$.Deferred).resolve(a)}})},function(e,t,i){var n,s;n=[i(2),i(66)],s=function(e,t){var i=e._,n=e.$,s=e.internal.util.Util.getUrlQueryString,o=e.tpl("/api/v1/apps/{{instanceId}}/groups{{#if groupId}}/{{groupId}}{{/if}}{{#if params}}/?{{params}}{{/if}}{{#if urlQuery}}{{{urlQuery}}}{{/if}}"),a=e.BaseModel.extend({flat:!0,defaults:{__isNew__:!0},derived:{groupName:{deps:["_embedded.group.profile.name"],fn:function(e){return e||""}},groupDescription:{deps:["_embedded.group.profile.description"],fn:function(e){return e||""}},groupLogo:{deps:["_embedded.group._links.logo"],fn:function(e){return e&&e[0]&&e[0].href||""}}},url:function(){var e={},t=this.expander.toString();return i.isEmpty(t)||(e.expand=t),o({instanceId:this.options.__instanceId__,groupId:this.get("id"),params:n.param(e)})},initialize:function(e,i){if(e||(e={}),i||(i={}),!e.id)throw"Cannot initialize an AppGroup without an id (group id)";if(!e.__instanceId__)throw"Cannot initialize an AppGroup without an app instance id";this.__nestedProperty__="profile.",this.expander=new t(i.expand)},parse:function(e){var t=e._links;return t&&t.app&&i.isString(t.app.href)&&(e.__instanceId__=t.app.href.split("/").pop()),e.__isNew__=!1,e},isNew:function(){return this.get("__isNew__")},sync:function(t,i,n){return"create"===t&&(n.method="PUT"),e.BaseModel.prototype.sync.call(this,t,i,n)}}),r=e.Collection.extend({model:a,comparator:"priority",initialize:function(e,i){if(i||(i={}),this.__instanceId__=i.__instanceId__,!this.__instanceId__)throw"Cannot initialize AppGroups without an instance id";this.expander=new t(i.expand)},url:function(){return o({instanceId:this.__instanceId__,urlQuery:s({expand:this.expander.toString()||void 0})})}});return{Model:a,Collection:r,EXPAND:{GROUP:"group",METADATA:"metadata"}}}.apply(t,n),!(void 0!==s&&(e.exports=s))},function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=i(2),o=i(244),a=n(o),r=i(245),l=n(r),p=i(271),d=n(p),c=i(248),u=n(c),h=i(273),m=n(h),f=s.internal.views.forms.helpers.SchemaFormFactory,g=(0,s.tpl)('<div class="infobox clearfix infobox-info"><span class="icon info-16"></span><p>{{{gotoMappings}}}</p></div>');t.default=m.default.extend({autoSave:!1,initialize:function(){this.entitlementAttributes=this.options.entitlementAttributes,this.textInputs=[],this.listenTo(this,"save",this._saveAppGroup),m.default.prototype.initialize.apply(this,arguments)},addExtraHeaderInfo:function(){var e={gotoMappings:(0,s.loc)("group.appassignment.group.goto.mappings","messages",[this.options.appName,this.options.appInstanceId])};this.add(g(e))},addInputsForProperties:function(){var e=[];this.options.schemaProperties.each(function(t){var i=f.createInputOptions(t);return e.push(i.name),this.assignMappingAsDefault(t,i),this._unflattenObjectType(t,i.name),this.addInputForProperty(i,t),i},this),this.inputNames=e},addInputForProperty:function(e,t){var i="image"===t.get("type"),n=this._isTextInput(e.name),s=void 0;s=i?l.default:n?d.default:u.default;var o=this.options.entitlementAttributes.get(t.get("name")),a={input:s,readOnly:i,label:e.label,params:{input:e,entitlementModel:o}};this.addInput(a)},assignMappingAsDefault:function(e,t){if("image"!==e.get("type")){var i=t.name,n=i.replace(/^profile\./,""),o=this.model.get(i),a=this.entitlementAttributes.get(n),r=a&&a.get("targetPreviewValue"),l=null;!o&&r&&(l=r),"text"===t.type&&s._.isUndefined(t.input)?(t.placeholder=r,this.textInputs.push(i)):l&&this.model.set(t.name,l)}},_saveAppGroup:function(e){var t=this,i=this.options.entitlementAttributes,n=e.toJSON().profile;this.modelClone=this.model.clone(),s._.each(n,function(e,t){if(!s._.isNull(e)){var n="profile."+t,o=i.get(t),r=o&&o.get("targetPreviewValue"),l=!1;this._isTextInput(n)?l=a.default.isEmptyValue(e):s._.isArray(e)?l=a.default.isEqual(r,e):e===r&&(l=!0),l&&this.modelClone.set(n,null)}},this),this.modelClone.save().then(function(){t.model.trigger("sync")}).fail(function(e){t.model.trigger("invalid",t,e)})},_isTextInput:function(e){return s._.indexOf(this.textInputs,e)!==-1}})},function(e,t,i){var n,s;n=[i(247),i(272)],s=function(e,t){return e.extend({editModeView:function(){this.inputView=new t(this.options)}})}.apply(t,n),!(void 0!==s&&(e.exports=s))},function(e,t,i){var n,s;n=[i(244),i(249)],s=function(e,t){return t.extend({overrideResetCheck:function(){var t=e.isEmptyValue(this.model.get(this.formInput.name));t?this.hideReset():this.showReset()},handleResetClick:function(){this.model.set(this.formInput.name,null),this.hideReset(),this.render()}})}.apply(t,n),!(void 0!==s&&(e.exports=s))},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(2),s=n.internal.views.forms.helpers.SchemaFormFactory,o=n.internal.util.SchemaUtil;t.default=n.Form.extend({save:function(){return this.model.isNew()?(0,n.loc)("oform.custom.save.goBack"):(0,n.loc)("oform.save")},noCancelButton:!0,autoSave:!0,hasSavingState:!0,layout:"o-form-wrap",initialize:function(){this._addUserAssignmentHelpText(this.options.userAssignmentHelpText),this.addExtraHeaderInfo(),this.addInputsForProperties(),this.addCancelButton(),this.listenTo(this.model,"form:field-error",this._flattenErrors)},addExtraHeaderInfo:function(){this.model.isNew()&&this.add((0,n.createCallout)({type:"info",title:(0,n.loc)("group.appassignment.assign.extraInfo.header"),subtitle:(0,n.loc)("group.appassignment.assign.extraInfo.body")}))},addInputsForProperties:function(){var e=[];this.options.schemaProperties.each(function(t){var i=s.createInputOptions(t);return e.push(i.name),this._unflattenObjectType(t,i.name),this.addInputForProperty(i,t),i},this),this.inputNames=e},addInputForProperty:function(e){this.addInput(e)},addCancelButton:function(){this.addButton({type:"cancel",text:this.model.isNew()?(0,n.loc)("oform.custom.cancel.goBack"):(0,n.loc)("oform.cancel"),className:"cancel"})},_unflattenObjectType:function(e,t){var i=e.get("properties"),s=!this.model.has(t)&&o.isObjectDataType(e.get("__displayType__"))&&!!i,a=void 0;s&&(a=n._.mapObject(i,function(e,i){var n=t+"."+i,s=this.model.get(n);return this.model.unset(n),s},this),this.model.set(t,a))},_flattenErrors:function(e,t){var i="profile."+e;n._.contains(this.inputNames,i)&&this.model.trigger("form:field-error",i,t)},_addUserAssignmentHelpText:function(e){if(e.get("displayUserAssignmentHelpText")){var t=e.get("appName");this.add((0,n.createCallout)({type:"warning",title:(0,n.loc)("app."+t+".user_assignment_help_text.title"),subtitle:(0,n.loc)("app."+t+".user_assignment_help_text.content")}))}},parseErrorMessage:function(e){if(e){var t=JSON.stringify(e);/Property '.+' not found/.test(t)&&(e.errorSummary=(0,n.loc)("group.appassignment.assign.property.error"))}return e}})},function(e,t,i){var n,s;n=[i(2),i(65)],s=function(e,t){var i=t.Model.extend({url:function(){return e.tpl("/api/v1/apps/{{id}}/user/types/groups?expand=schema")(this)}});return{Model:i}}.apply(t,n),!(void 0!==s&&(e.exports=s))},function(e,t,i){var n,s;n=[i(2)],s=function(e){var t=e._,i=e.tpl("/api/v1/apps/{{instanceId}}/catalog/groups{{#if groupId}}/{{groupId}}{{/if}}"),n=e.Model.extend({props:{id:["string",!0],"_links.logo":"array","_links.users.href":"string","_links.apps.href":"string",objectClass:"array","profile.name":"string","profile.description":"string",type:"string",created:"string",lastUpdated:"string",lastMembershipUpdated:"string"},local:{__instanceId__:"string",__isAssigned__:["boolean",!1,!1]},derived:{__groupLogoUrl__:{deps:["_links.logo"],fn:function(e){return t.isArray(e)&&t.isObject(e[0])&&t.has(e[0],"href")?e[0].href:""}}},url:function(){return i({instanceId:this.get("__instanceId__"),groupId:this.get("id")})},initialize:function(t,i){t||(t={}),i||(i={});var n=t.__instanceId__||i.collection&&i.collection.instanceId;if(!n)throw"Cannot initialize CatalogAppGroup without an instance id";if(t.__instanceId__=n,!t.id)throw"Cannot initialize CatalogAppGroup without an id (group id)";e.Model.prototype.initialize.apply(this,arguments)}}),s=e.Collection.extend({model:n,url:function(){return i({instanceId:this.instanceId})},initialize:function(t,i){if(i||(i={}),this.instanceId=i.instanceId,!this.instanceId)throw"Cannot initialize CatalogAppGroups without an instance id";e.Collection.prototype.initialize.apply(this,arguments)},parse:function(e){return t.each(e,t.bind(function(i,n){e[n].profile=t.pick(e[n].profile,"name","description")},this)),e}});return{Model:n,Collection:s}}.apply(t,n),!(void 0!==s&&(e.exports=s))},function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=i(2),o=i(266),a=n(o);t.default=a.default.extend({className:"unassigned-groups",columns:[{className:"unassigned-item-logo",template:'<img src="{{__groupLogoUrl__}}">'},{className:"unassigned-item-info",template:'\t          <a href="/admin/group/{{id}}">{{profile.name}}</a>\t          <span class="description">{{profile.description}}</span>\t        '},{className:"assign-button",template:'\t          {{#if __isAssigned__}}\t            <input data-se={{id}} class="button disabled" type="button" disabled\t            value="{{i18n code="appinstance.assigned"}}">\t          {{else}}\t            <input data-se={{id}} class="button" type="button" \t            value="{{i18n code="appinstance.assign"}}">\t          {{/if}}\t        ',events:{"click input":function(e){e.preventDefault(),e.stopPropagation(),this.state.trigger("assign",this.model.get("id"))}},initialize:function(){var e=this;this.listenTo(this.model,"change:__isAssigned__",function(){e.state.set("newlyAssignedGroupsCount",e.state.get("newlyAssignedGroupsCount")+1),e.render()})}}],emptyState:{title:(0,s.loc)("appinstance.groupassignment.empty.title"),subtitle:(0,s.loc)("appinstance.groupassignment.assign.empty.subtitle")}})},,,,,,,,,,function(e,t,i){var n,s;n=[i(2)],s=function(e){
var t=e.Metrics.extend({component:"OAuth2",name:"Client",trackCreated:function(e){return this.track("application.lifecycle.add",e)},trackActivated:function(e){return this.track("application.lifecycle.activate",e)},trackDeactivated:function(e){return this.track("application.lifecycle.deactivate",e)},trackDeleted:function(e){return this.track("application.lifecycle.delete",e)},trackGeneralSettingsUpdated:function(e){return this.track("application.lifecycle.update.general",e)},trackClientCredentialsUpdated:function(e){return this.track("application.lifecycle.update.client.credentials",e)},trackOIDCTokenSettingsUpdated:function(e){return this.track("application.lifecycle.update.token.settings",e)},trackTokenCredentialsUpdated:function(e){return this.track("application.lifecycle.update.token.credentials",e)}}),i=e.Metrics.extend({component:"OAuth2",name:"AuthServer",trackASCreated:function(e){return this.track("as.lifecycle.add",e)},trackASUpdated:function(e){return this.track("as.lifecycle.update",e)},trackASActivated:function(e){return this.track("as.lifecycle.activate",e)},trackASDeactivated:function(e){return this.track("as.lifecycle.deactivate",e)},trackASDeleted:function(e){return this.track("as.lifecycle.delete",e)},trackScopeCreated:function(e){return this.track("scope.lifecycle.add",e)},trackScopeUpdated:function(e){return this.track("scope.lifecycle.update",e)},trackScopeDeleted:function(e){return this.track("scope.lifecycle.delete",e)},trackClaimCreated:function(e){return this.track("claim.lifecycle.add",e)},trackClaimUpdated:function(e){return this.track("claim.lifecycle.update",e)},trackClaimDeleted:function(e){return this.track("claim.lifecycle.delete",e)},trackClaimActivated:function(e){return this.track("claim.lifecycle.activate",e)},trackClaimDeactivated:function(e){return this.track("claim.lifecycle.deactivate",e)},trackPolicyCreated:function(e){return this.track("policy.lifecycle.add",e)},trackPolicyUpdated:function(e){return this.track("policy.lifecycle.update",e)},trackPolicyDeleted:function(e){return this.track("policy.lifecycle.delete",e)},trackPolicyActivated:function(e){return this.track("policy.lifecycle.activate",e)},trackPolicyDeactivated:function(e){return this.track("policy.lifecycle.deactivate",e)},trackRuleCreated:function(e){return this.track("rule.lifecycle.add",e)},trackRuleUpdated:function(e){return this.track("rule.lifecycle.update",e)},trackRuleDeleted:function(e){return this.track("rule.lifecycle.delete",e)},trackRuleActivated:function(e){return this.track("rule.lifecycle.activate",e)},trackRuleDeactivated:function(e){return this.track("rule.lifecycle.deactivate",e)}});return{ClientMetrics:t,AuthorizationServerMetrics:i}}.apply(t,n),!(void 0!==s&&(e.exports=s))},function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=i(2),o=i(288),a=n(o),r=i(294),l=n(r),p=i(365),d=n(p),c=i(399),u=n(c),h=i(412),m=n(h),f=i(416),g=n(f),_=i(419),v=n(_),y=i(425),b=n(y),A=i(484),w=n(A),I=i(485),E=n(I),N=i(487),x=n(N),T=i(489),S=n(T),M=i(493),P=n(M),C=i(496),O=n(C),k=i(499),D=n(k),R=i(502),U=n(R),F=i(506),V=n(F),L=i(528),G=n(L),B=i(532),W=n(B),$=i(535),z=n($),j=i(536),H=n(j),q=i(540),K=n(q),J=i(542),Y=n(J),Q=i(547),X=n(Q),Z=i(549),ee=n(Z);t.default=s.Router.extend({routes:{"tab-group-push":"grouppush","tab-mobileclient-assignment(/:mobileAppId)":"mobileclientassignment","tab-user-management":"provision","tab-user-management(/:subFilter)":"provision","tab-ad-group-push":"adgrouppush","":"defaultView","tab-people":"assignToUsers","tab-groups":"assignToGroups","tab-assignments":"assignmentsHome","tab-general":"general","tab-wifi-setting":"wifiSetting","tab-import":s._.noop,"tab-signon":"signOnHome","tab-registration":"registrationHome"},initialize:function(e){this.options=e||{},this._addCustomHeader()},render:function(e,t){this.editProvisioningThresholdController&&(this.editProvisioningThresholdController.remove(),(0,s.$)(this.options.provisioningRoadblockThresholdContainerRead).html("")),this.clearupOtherControllers(this.importUserNamePreviewController,this.appEntitlementController,this.provisionSettingsMultiTabController,this.oAuth2TokenCredentialsController,this.samlLibraryVersionController,this.oidcSettingsController,this.clientCredentialsController,this.oppController,this.federationBrokerController),s.Router.prototype.render.call(this,e,t)},clearupOtherControllers:function(){s._.each(arguments,function(e){e&&e instanceof s.Controller&&(this.stopListening(e),this.stopListening(e.state),e.remove())},this)},defaultView:function(){"SERVICE"===this.settings.get("oidcApplicationType")?this.navigate("tab-general",{trigger:!0}):!this.settings.hasFeature("UD_ENABLED_APP_ASSIGNMENT_UI")||this.settings.get("isADApp")?this.navigate("tab-people",{trigger:!0}):this.navigate("tab-assignments",{trigger:!0})},grouppush:function(){this.render(l.default,this.options)},adgrouppush:function(){this.render(a.default,this.options)},mobileclientassignment:function(e){this.navigate("tab-mobileclient-assignment",{trigger:!0}),this.render(d.default,s._.defaults({el:this.options.mobilecontainer,mobileAppId:e},this.options))},provision:function(e){this.options.tabLoadedPromise.done(s._.bind(this.renderProvision,this,e))},renderProvision:function(e){this.renderOppController(),this.oppController?this.listenToOnce(this.oppController.state,"done:opprender",s._.bind(this.renderProvisionSettingsMultiTabView,this,e)):this.renderProvisionSettingsMultiTabView(e,!1),this.editProvisioningThresholdController=new m.default({el:this.options.provisioningRoadblockThresholdContainerEdit,orgId:this.options.orgId,editMode:!0,settings:this.settings}),this.editProvisioningThresholdController.render(),this.listenTo(this.editProvisioningThresholdController.roadblockSettings,"sync",function(){var e=(0,s.tpl)("\t          {{__displayPercentage__}}%\t          {{# if __isDefaultPercentage__}}\t            (default)\t          {{/if}}\t        ")(this.editProvisioningThresholdController.roadblockSettings.toJSON({verbose:!0}));(0,s.$)(this.options.provisioningRoadblockThresholdContainerRead).html(e)}),this.settings.hasFeature("CONSOLIDATE_USERNAME_EL")&&this.renderImportUserNameELPreviewController()},renderOppController:function(){(0,s.$)(this.settings.get("oppcontainer")).length&&(this.oppController=new u.default({el:this.settings.get("oppcontainer"),settings:this.settings}),this.oppController.render())},renderProvisionSettingsMultiTabView:function(e,t){this.settings.hasFeature("PROVISIONING_SETTINGS_UI")&&(this.provisionSettingsMultiTabController=new V.default({hideProvisionForm:t,provisionSubFilter:e,el:this.options.provisionSettingsMultiTab,settings:this.settings,profileMasterUserLifecycleSettingsContainer:this.options.profileMasterUserLifecycleSettingsContainer}),this.provisionSettingsMultiTabController.render(),this.listenTo(this.provisionSettingsMultiTabController.state,"change:provisionSubFilter",this.replaceUrlPerSubTabChange))},replaceUrlPerSubTabChange:function(e,t){var i=s._.isEmpty(t)?"":"/"+t;this.navigate("tab-user-management"+i,{replace:!0})},renderImportUserNameELPreviewController:function(){this.importUserNamePreviewController=new U.default({el:this.options.importUserNameELPreviewContainer,settings:this.settings}),this.importUserNamePreviewController.render()},general:function(){var e=this;this.options.tabLoadedPromise.done(function(){if(e.render(g.default,e.options),e.editProvisioningThresholdController=new m.default({el:e.options.adProvisioningRoadblockThresholdContainer,orgId:e.options.orgId,editMode:!0,settings:e.settings}),e.editProvisioningThresholdController.render(),"oidc_client"===e.options.appUniqueName&&(e.oidcSettingsController=new P.default(s._.extend({},e.options,{el:e.options.oidcSettingsContainer})),e.oidcSettingsController.render(),e.clientCredentialsController=new S.default(s._.extend({},e.options,{el:e.options.clientCredentialsContainer,oidcSettings:e.oidcSettingsController.model})),e.clientCredentialsController.render(),window.okta&&window.okta.settings&&window.okta.settings.isDeveloperConsole)){var t=e.options.oidcApplicationType,i=ee.default.filter(function(e){return e.platforms.includes(t)});e.sampleCodeController=new X.default({links:i,el:".help-wrap"}),e.sampleCodeController.render()}e.settings.get("isADApp")&&e.settings.hasFeature("ENG_NEW_AD_INSTANCE_USING_UD_MAPPING")&&(e.renderImportUserNameELPreviewController(),e.render(z.default,{el:e.options.provisionUserNameELPreviewContainer}))})},wifiSetting:function(){this.options.isWifiApp&&(this.settings.set("appInstanceId",this.options.appInstanceId),this.render(v.default,{el:this.options.wifiSettingContainer,settings:this.settings}))},assignToUsers:function(){this.render(K.default,s._.extend(s._.pick(this.options,"appInstanceId","appName","permissions"),{el:this.options.userAssignmentContainer}))},assignToGroups:function(){(0,s.$)(this.options.groupAssignmentContainer).is(":empty")&&this._reloadPage(),this.render(E.default,{el:this.options.groupAssignmentContainer})},assignmentsHome:function(){this.settings.hasFeature("UD_ENABLED_APP_ASSIGNMENT_UI")&&((0,s.$)(this.options.assignmentsContainer).empty(),this.render(b.default,{el:this.options.assignmentsContainer}),w.default.init(this.controller.state))},registrationHome:function(){this.render(Y.default,s._.extend(s._.pick(this.options,"appInstanceId","clientId"),{el:this.options.registrationContainer}))},signOnHome:function(){this.options.tabLoadedPromise.done(this._renderSignOnHome.bind(this))},_renderSignOnHome:function(){this.settings.hasFeature("CONSOLIDATE_USERNAME_EL")&&this.render(z.default,{el:this.options.provisionUserNameELPreviewContainer}),"oidc_client"===this.options.appUniqueName&&(this.render(D.default,s._.extend(this.options,{el:this.options.oAuth2OIDCContainer})),this.oAuth2TokenCredentialsController=new O.default(s._.extend(this.options,{el:this.options.oAuth2TokenCredentialsContainer})),this.oAuth2TokenCredentialsController.render()),this.settings.hasFeature("RADIUS_APP_MODEL")&&"radius_generic_app"===this.options.appUniqueName&&this.render(G.default,s._.extend(this.options,{el:this.options.radiusAdvancedSettingsContainer})),this.samlLibraryVersionController=new W.default(s._.extend(this.options,{el:this.options.samlLibraryVersionContainer})),this.samlLibraryVersionController.render(),this.settings.hasFeature("LARGE_SCALE_ASSIGNMENTS_WITHOUT_APPUSER")&&(this.federationBrokerController=new H.default(s._.extend(this.options,{el:this.options.federationBrokerModeContainer})),this.federationBrokerController.render())},_reloadPage:function(){window.location.reload()},_addCustomHeader:function(){this.settings.get("showCustomWarning")&&!this.headerController&&(this.headerController=new x.default({el:this.settings.get("headercontainer")}),this.headerController.render())}})},function(e,t,i){var n,s;n=[i(2),i(289),i(293),i(291),i(69),i(294)],s=function(e,t,i,n,s,o){var a=e.internal.util.SettingsModel,r=e.internal.util.Events,l=o.extend({initialize:function(){this.container=e.$(this.options.grouppushcontainer),this.settings=new a(this.options),this.settings.set("pushToAD",!0),this.rules=new i.Collection(null,{instanceId:this.options.appInstanceId}),this.mappings=new t.Collection(null,{instanceId:this.options.appInstanceId}),this.listenTo(this.mappings,r.DELETE,function(e){this._invokeDeleteModalDialog([e])}),this.listenTo(this.mappings,"add change",function(e){s.get(e,{delayed:!0,condition:function(e){return e.get("ui_status")===n.PENDING}}).start()}),this._initState()},render:function(){this.settings.set("grouppushEnabled",!0),this._doRender()}});return l}.apply(t,n),!(void 0!==s&&(e.exports=s))},function(e,t,i){var n,s;n=[i(2),i(290),i(291),i(292)],s=function(e,t,i,n){function s(e){var t=e.previousAttributes(),i={};return o(e.toJSON()).each(function(e,n){e===t[n]||(i[n]=e)}),o.each(r,function(t){var n=e.get(t);n&&!i[t]&&(i[t]=n)}),i}var o=e._,a=e.BaseModel,r=["newAppGroupName","existingAppGroupId","deleteAppGroup"],l=n.Model.extend({idAttribute:"mappingId",groupScope:"GLOBAL",defaults:{status:i.ACTIVE,ui_status:a.ComputedProperty(["status","currentJobDetails"],function(){return this.get("currentJobDetails")?i.PENDING:this.get("status")}),groupScope:"GLOBAL",groupType:"SECURITY",distinguishedName:"",samAccountName:"",groupName:"",deleteable:a.ComputedProperty(["status"],function(){return o.indexOf(this.get("selectableStatuses")||[],"DELETED")>-1})},sync:function(e,t,i){switch(e){case"update":var n=s(this);n.action&&(e="create"),i.attrs=n;break;case"delete":e="create",i=i||{},i.url=t.url()+"/delete",i.attrs||(i.attrs={}),i.attrs.deleteAppGroup=!!i.deleteAppGroup}return t.set("groupPushAttributes",{groupScope:t.get("groupScope"),groupType:t.get("groupType"),distinguishedName:t.get("distinguishedName"),samAccountName:t.get("samAccountName")}),t.unset("samAccountName"),t.unset("distinguishedName"),t.unset("groupType"),t.unset("groupScope"),t.unset("groupName"),a.prototype.sync.call(this,e,t,i)},parse:function(e){return o.extend(e,e.groupPushAttributes,{status:e.status}),this.createdBy||(this.createdBy=new t.Model),this.createdBy.set(e.createdBy),delete e.createdBy,delete e.groupPushAttributes,e}}),p=n.Collection.extend({model:l});return{Model:l,Collection:p}}.apply(t,n),!(void 0!==s&&(e.exports=s))},function(e,t,i){var n,s;n=[i(2)],s=function(e){var t="/api/v1/users",i=e.BaseModel.extend({flat:!0,urlRoot:t,url:function(){var t=e.BaseModel.prototype.url.apply(this,arguments);return t+(this.get("__activateUser__")===!1?"?activate=false":"")},__nestedProperty__:"profile.",isNew:function(){return!this.id},defaults:{name:function(){return this.get("profile.firstName")+" "+this.get("profile.lastName")}}}),n=e.Collection.extend({model:i,url:t});return{Model:i,Collection:n}}.apply(t,n),!(void 0!==s&&(e.exports=s))},function(e,t,i){"use strict";!(e.exports={ACTIVE:"ACTIVE",INACTIVE:"INACTIVE",ERROR:"ERROR",PENDING:"PENDING"})},function(e,t,i){var n,s;n=[i(2),i(290),i(291)],s=function(e,t,i){function n(e){var t=e.previousAttributes(),i={};return o(e.toJSON()).each(function(e,n){e===t[n]||(i[n]=e)}),o.each(r,function(t){var n=e.get(t);n&&!i[t]&&(i[t]=n)}),i}var s=e.$,o=e._,a=e.BaseModel,r=["newAppGroupName","existingAppGroupId","deleteAppGroup"],l=a.extend({idAttribute:"mappingId",defaults:{status:i.ACTIVE,ui_status:a.ComputedProperty(["status","currentJobDetails"],function(){return this.get("currentJobDetails")?i.PENDING:this.get("status")}),deleteable:a.ComputedProperty(["status"],function(){return o.indexOf(this.get("selectableStatuses")||[],"DELETED")>-1})},sync:function(e,t,i){switch(e){case"update":var s=n(this);s.action&&(e="create"),i.attrs=s;break;case"delete":e="create",i=i||{},i.url=t.url()+"/delete",i.attrs||(i.attrs={}),i.attrs.deleteAppGroup=!!i.deleteAppGroup}return a.prototype.sync.call(this,e,t,i)},parse:function(e){return this.createdBy||(this.createdBy=new t.Model),this.createdBy.set(this.createdBy.parse(e.createdBy)),delete e.createdBy,e}}),p=e.Collection.extend({model:l,initialize:function(e,t){if(this.options=o.clone(t||{}),!this.options.instanceId)throw new Error("Missing Arguments");this.instanceId=this.options.instanceId},url:function(){return e.tpl("/api/internal/instance/{{instanceId}}/grouppush")(this.options)},parse:function(e){return this.setPagination(e.nextMappingsPageUrl),e.mappings},bulkRetry:function(){return s.post(this.url()+"/bulkretryerror")}});return{Model:l,Collection:p}}.apply(t,n),!(void 0!==s&&(e.exports=s))},function(e,t,i){var n,s;n=[i(2),i(291)],s=function(e,t){function i(e){var t=e.toJSON();return t.searchExpression||delete t.searchExpressionType,t.descriptionSearchExpression||delete t.descriptionSearchExpressionType,t}var n=e._,s=e.BaseModel.extend({idAttribute:"mappingRuleId",defaults:{name:void 0,searchExpression:void 0,searchExpressionType:void 0,descriptionSearchExpression:void 0,descriptionSearchExpressionType:void 0,status:t.ACTIVE,sourceAppInstanceId:void 0},initialize:function(){this.on("change:__active__ change:status",function(){this.hasChanged("__active__")&&this.set("status",this.get("__active__")?t.ACTIVE:t.INACTIVE),this.hasChanged("status")&&this.set("__active__",this.get("status")===t.ACTIVE)},this),this.set("__active__",this.get("status")===t.ACTIVE)},sync:function(t,s,o){switch(t){case"create":o.attrs=i(s);break;case"update":o.attrs=n(i(s)).pick("name","searchExpression","searchExpressionType","descriptionSearchExpression","descriptionSearchExpressionType","status");break;case"delete":var a=o.deleteMappings?"DELETE_MAPPINGS_AND_DELETE_APP_GROUPS":"KEEP_MAPPINGS";o.data=JSON.stringify({action:a}),o.contentType="application/json"}return e.BaseModel.prototype.sync.call(this,t,s,o)}}),o=e.Collection.extend({model:s,initialize:function(e,t){if(!t||!t.instanceId)throw new Error("Missing Arguments");this.instanceId=t.instanceId},url:function(){return"/api/internal/instance/"+this.instanceId+"/grouppushrules"}});return{Model:s,Collection:o}}.apply(t,n),!(void 0!==s&&(e.exports=s))},function(e,t,i){var n,s;n=[i(2),i(234),i(292),i(293),i(295),i(296),i(213),i(291),i(362),i(363),i(69),i(364)],s=function(e,t,i,n,s,o,a,r,l,p,d,c){var u=e.$,h=e._,m=e.internal.util,f=m.Class,g=m.Events,_=m.SettingsModel,v=f.extend({BOUNCE_TIME:20,initialize:function(){this.container=u(this.options.grouppushcontainer),this.settings=new _(this.options),this.rules=new n.Collection(null,{instanceId:this.options.appInstanceId}),this.mappings=new i.Collection(null,{instanceId:this.options.appInstanceId}),this.listenTo(this.rules,g.DELETE,function(e){this._deleteRule(e)}),this.listenTo(this.mappings,g.DELETE,function(e){this._invokeDeleteModalDialog([e])}),this.listenTo(this.mappings,"add change",function(e){d.get(e,{delayed:!0,condition:function(e){return e.get("ui_status")===r.PENDING}}).start()}),this._initState()},_doRender:function(){this.container.html(this._createMaterView().render().el),this.settings.get("grouppushEnabled")&&(this.mappings.reset(),this._fetch(),this.rules.fetch())},render:function(){var e=new t.Model({id:this.options.appInstanceId}),i=new c.Model;i.instance=this.options.appInstanceId,u.when(e.fetch(),i.fetch()).then(h.bind(function(){this.settings.set("grouppushEnabled",h.contains(e.get("features"),"GROUP_PUSH")),this.settings.set("enhancementsSupported",i.get("enhancementsSupported")),this._doRender()},this))},_initState:function(){this.state=new s,this.listenTo(this.state,"change:search",function(){this.state.get("search")&&this.state.set("filter","All")}),this.listenTo(this.state,"change:filter",function(){this.state.hasChanged("mode")||this.state.set("mode",a.DISPLAY),this.state.hasChanged("search")||this.state.unset("search")}),this.listenTo(this.rules,"add",function(e){this.state.get("mode")==a.ADD_RULE&&this.state.set({mode:a.DISPLAY,filter:"rule."+e.id})}),this.listenTo(this.state,"change:mode",function(){switch(this.state.get("mode")){case a.ADD:case a.ADD_RULE:this.state.set({filter:this.state.get("addMode")?"rule.NULL":"rule.AUTO","empty.title":"Groups you choose above will show up here","empty.subtitle":" "}),this.mappings.reset();break;case a.EDIT:this.mappings.invoke("set","__checked__",!1);break;case a.DISPLAY:h.contains([a.ADD,a.ADD_RULE],this.state.previous("mode"))&&this.state.trigger("change:filter")}}),this.listenTo(this.state,"change:search change:filter",h.debounce(h.bind(this._fetch,this),this.BOUNCE_TIME))},_setStatusAll:function(e,t){this.state.set("mode",a.DISPLAY),h.defer(function(i){i.each(function(i){h.defer(function(){i.get("__checked__")&&i.get("status")!=e&&(i.set("status",e,t),i.save())})})},this.mappings)},_createMaterView:function(){this.masterView=new o({state:this.state,settings:this.settings,collection:this.mappings,rules:this.rules});var e=this;return this.masterView.listen(g.ACTIVATE,function(){e._setStatusAll(r.ACTIVE,{silent:!0})}),this.masterView.listen(g.DEACTIVATE,function(){e._setStatusAll(r.INACTIVE)}),this.masterView.listen(g.DELETE,function(){e._invokeDeleteModalDialog(e.mappings.where({__checked__:!0,deleteable:!0}))}),this.masterView},_deleteRule:function(e){this.modalDialog=new p,this.modalDialog.render(),this.listenTo(this.modalDialog,g.DELETE,function(t){e.destroy({deleteMappings:t}),this.state.set({mode:a.DISPLAY,filter:"All"})})},_invokeDeleteModalDialog:function(e){this.modalDialog=new l,this.listenTo(this.modalDialog,g.DELETE,function(t){h(e).invoke("destroy",{deleteAppGroup:t}),this.state.set("mode",a.DISPLAY),e[0]instanceof n.Model&&this.state.set("filter","All")}),this.modalDialog.render()},_fetch:function(){if(!h.contains([a.ADD,a.ADD_RULE],this.state.get("mode"))){var e={data:{}},t=this.state.get("search");t&&t.length>=3&&(e.data.q=t),this.state.get("mappingRuleId")&&(e.data.ruleId=this.state.get("mappingRuleId")),"Error"==this.state.get("filter")&&(e.data.status="ERROR"),this._setEmptyTitles(e.data.q),this.mappings.fetch(e)}},_setEmptyTitles:function(t){t?this.state.set({"empty.title":e.tpl('No groups found for "{{query}}"')({query:t}),"empty.subtitle":"Please refine your search and try again."}):this.state.set({"empty.title":"No groups found for this filter","empty.subtitle":" "})},remove:function(){this.container.empty()}});return v}.apply(t,n),!(void 0!==s&&(e.exports=s))},function(e,t,i){var n,s;n=[i(2),i(213)],s=function(e,t){return e.internal.util.StateMachine.extend({local:{mode:["string",!1,t.DISPLAY],filter:["string",!1,"All"]},derived:{editMode:{deps:["mode"],fn:function(e){return e===t.EDIT}},addMode:{deps:["mode"],fn:function(e){return e===t.ADD}},addRuleMode:{deps:["mode"],fn:function(e){return e===t.ADD_RULE}},mappingRuleId:{deps:["filter"],fn:function(e){return(e||"").split(".")[1]}}}})}.apply(t,n),!(void 0!==s&&(e.exports=s))},function(e,t,i){var n,s;n=[i(2),i(297),i(361)],s=function(e,t,i){return e.View.extend({template:'<h2 class="margin-0 margin-btm-10">Push Groups to {{appName}}</h2>',getTemplateData:function(){return this.settings.toJSON()},initialize:function(){this.settings.get("grouppushEnabled")?this.add(t):this.add(i)}})}.apply(t,n),!(void 0!==s&&(e.exports=s))},function(e,t,i){var n,s;n=[i(2),i(298),i(300)],s=function(e,t,i){return e.internal.views.datalist.DataList.extend({stateEvents:{"change:addMode change:addRuleMode":"toggleClass"},initialize:function(){this.add(t),this.add(i),this.toggleClass()},toggleClass:function(){var e=!(!this.state.get("addMode")&&!this.state.get("addRuleMode"));this.$el.toggleClass("data-list-inline-form-active",e)}})}.apply(t,n),!(void 0!==s&&(e.exports=s))},function(e,t,i){var n,s;n=[i(2),i(299)],s=function(e,t){var i=e.internal.views.datalist.Sidebar;return i.extend({initialize:function(){this.add(t)}})}.apply(t,n),!(void 0!==s&&(e.exports=s))},function(e,t,i){var n,s;n=[i(2)],s=function(e){function t(e,t){var n=new i({state:e,label:t.get("name"),value:"rule."+t.id,className:"gp-rule-filter"});return n.listenTo(t,"destroy",function(){this.remove()}),n}var i=e.internal.views.datalist.components.SidebarFilter,n=e.internal.views.datalist.SidebarFilterSet,s=n.extend({title:"Pushed Groups",initialize:function(){this.add(new i({state:this.state,label:"All",value:"All"})),this.add(new i({state:this.state,label:"Errors",value:"Error"})),this.add(new i({state:this.state,label:"By name",value:"rule.NULL"})),this.settings.get("pushToAD")||this.add(new i({state:this.state,label:"By rule",value:"rule.AUTO"})),this.listenTo(this.options.rules,"add",function(e){this.add(t(this.state,e))})}});return s}.apply(t,n),!(void 0!==s&&(e.exports=s))},function(e,t,i){var n,s;n=[i(2),i(213),i(301),i(311),i(350),i(355),i(359)],s=function(e,t,i,n,s,o,a){var r=e.internal.views.datalist.Content;return r.extend({Main:n,Toolbar:i,toggle:function(){var e=!(!this.state.get("addMode")&&!this.state.get("addRuleMode"));this.$(".data-list-content").toggle(!e)},stateEvents:function(){var e=this.settings.get("pushToAD")?o:s,i={"change:addMode change:addRuleMode":"toggle"};return i["change:mode"]=function(){switch(this.state.get("mode")){case t.ADD:this.first().$el.after(new e(this.options).render().el);break;case t.ADD_RULE:this.first().$el.after(new a(this.options).render().el)}},i}})}.apply(t,n),!(void 0!==s&&(e.exports=s))},function(e,t,i){var n,s;n=[i(2),i(213),i(302),i(305),i(310)],s=function(e,t,i,n,s){return e.View.extend({stateEvents:{"change:mode":"render"},render:function(){switch(this.empty(),e.View.prototype.render.apply(this,arguments),this.state.get("mode")){case t.EDIT:this.add(i);break;case t.ADD:this.add(s);break;case t.ADD_RULE:this.add(s);break;case t.DISPLAY:this.add(n)}return this}})}.apply(t,n),!(void 0!==s&&(e.exports=s))},function(e,t,i){var n,s;n=[i(2),i(303),i(213),i(304)],s=function(e,t,i,n){var s=e.internal.views.datalist.ToolBar;return s.extend({initialize:function(){this.add(n.createBulkDeleteButton(this.options)),this.add(n.createBulkDeactivateButton(this.options)),this.add(n.createBulkActivateButton(this.options)),this.add(n.createCloseButton(this.options,{className:"float-r link-button-wide",title:"Cancel"}));var e=this;t.escapeKeyHandler(null,function(){e.state.set("mode",i.DISPLAY)})}})}.apply(t,n),!(void 0!==s&&(e.exports=s))},function(e,t,i){var n,s;n=[i(2)],s=function(e){function t(e,t,s,o,a){var r=t+".OKTA_GENERIC_KEY_BINDINGS."+Math.random();return e||(e=document),n(e).on(r,function(e){e.preventDefault(),e.stopPropagation();var t=e.which||e.keyCode;t===s&&(o(),i.isFunction(a)&&(a=a()),a!==!1&&n(document).off(r))}),r}var i=e._,n=e.$,s=e.internal.util.Keys;return{escapeKeyHandler:function(e,i,n){return t.call(this,e,"keyup",s.ESC,i,n)},enterKeyHandler:function(e,i,n){return t.call(this,e,"keyup",s.RETURN,i,n)}}}.apply(t,n),!(void 0!==s&&(e.exports=s))},function(e,t,i){var n,s;n=[i(2),i(213),i(291)],s=function(e,t,i){function n(t,i){var n=e._.clone(i||{});e._.isFunction(t.enabled)&&l.initialize(t,t.enabled),e._.isFunction(t.action)&&l.action(t,t.action);var s=e._.pick(t,"title","type","icon","className","initialize","events"),o=a.extend(s);return new o(n)}var s=e.internal.util.Keys,o=e.internal.util.Events,a=e.internal.views.components.BaseButtonLink,r="reset add remove change:ui_status change:__checked__",l={initialize:function(t,i){var n=function(){this.toggle(i.call(this))};t.initialize=function(){this.listenTo(this.collection,r,e._.debounce(n,5)),n.call(this)}},action:function(e,t){e.events||(e.events={});var i=function(e){e.preventDefault(),t.call(this)};e.events.click=i,e.events.keypress=function(e){var t=e.keyCode||e.which;t===s.RETURN&&i.call(this,e)}}};return{createCloseButton:function(i,s){return n(e._.extend({type:"Close",title:"Close",className:"link-button-wide",action:function(){this.state.set({mode:t.DISPLAY})}},s||{}),i)},createBulkEditButton:function(e){return n({type:"Edit",title:"Bulk Edit",icon:"edit-16",enabled:function(){return this.collection.size()>0},action:function(){this.state.set({mode:t.EDIT})}},e)},createBulkDeleteButton:function(e){return n({type:"Delete",title:"Delete",icon:"remove-16-color",action:function(){this.broadcast(o.DELETE)},enabled:function(){return this.collection.where({__checked__:!0,deleteable:!0}).length>0}},e)},createBulkDeactivateButton:function(e){return n({type:"Deactivate",title:"Deactivate",icon:"inactive-sync-16",action:function(){this.broadcast(o.DEACTIVATE)},enabled:function(){return this.collection.filter(function(e){return e.get("__checked__")&&e.get("status")!=i.INACTIVE}).length>0}},e)},createBulkActivateButton:function(e){return n({type:"Activate",title:"Activate",icon:"active-sync-16",action:function(){this.broadcast(o.ACTIVATE)},enabled:function(){return this.collection.filter(function(e){return e.get("__checked__")&&e.get("status")!=i.ACTIVE}).length>0}},e)},createSaveAndAddButton:function(e){return n({type:"SaveAndAdd",title:"Save & Add Another",className:"button-primary link-button-wide",action:function(){this.trigger(o.SUBMIT)}},e)},createSaveButton:function(e){return n({type:"Save",title:"Add Group",className:"button-primary link-button-wide",action:function(){this.trigger(o.SUBMIT,{close:!0})}},e)}}}.apply(t,n),!(void 0!==s&&(e.exports=s))},function(e,t,i){var n,s;n=[i(2),i(304),i(306),i(307),i(26)],s=function(e,t,i,n){var s=e._,o=e.$,a=e.internal.views.datalist.ToolBar,r=e.internal.views.datalist.components.SearchBox,l=e.tpl("/api/internal/instance/{{appInstanceId}}/grouppush/refreshAppGroups"),p=a.extend({initialize:function(){this.add(i),(this.settings.get("enhancementsSupported")||this.settings.hasFeature("GROUP_PUSH_ENHANCEMENTS_AD"))&&this.add(e.createButton({title:e.loc("grouppush.refreshAppGroups.button.title"),className:"appgroups-refresh-button",icon:"app-refresh-16",click:function(){var t=l(this.settings.toJSON());o.post(t).done(s.bind(function(){this.notify("success",e.loc("grouppush.import.start.success"))},this)).fail(s.bind(function(){this.notify("error",e.loc("grouppush.import.error"))},this))}})),this.add(t.createBulkEditButton(this.options)),(this.settings.get("enhancementsSupported")||this.settings.hasFeature("GROUP_PUSH_ENHANCEMENTS_AD"))&&this.add(n),this.add(new r(s.extend({float:"right"},this.options)))},postRender:function(){(this.settings.get("enhancementsSupported")||this.settings.hasFeature("GROUP_PUSH_ENHANCEMENTS_AD"))&&this.$(".appgroups-refresh-button").qtip({content:{text:e.loc("grouppush.refreshAppGroups.tooltip.text","messages",[this.settings.get("appName")])},style:{classes:"qtip-custom qtip-shadow",tip:!0,width:{min:60,max:270},border:{radius:3}},position:{my:"bottom center",at:"top center"},show:"mouseover"})}});return p}.apply(t,n),!(void 0!==s&&(e.exports=s))},function(e,t,i){var n,s;n=[i(2),i(213)],s=function(e,t){return e.DropDown.extend({icon:"add-16-white",title:"Push Groups",className:"button-primary",attributes:{"data-se":"add-mapping"},initialize:function(){this.addItem({title:"Find groups by name",subtitle:"Search for specific groups to push.",icon:"add-16-color",seleniumId:"add-manual-mapping",enabled:function(){return this.settings.hasPermission("manage")||this.settings.hasPermission("manageAppConfig")},click:function(){this.state.set("mode",t.ADD)}}),this.settings.get("pushToAD")||this.addItem({title:"Find groups by rule",subtitle:"Create a search rule that pushes any groups that match the rule.",icon:"add-16-color",seleniumId:"add-mapping-rule",enabled:function(){return this.settings.hasPermission("manage")||this.settings.hasPermission("manageAppConfig")},click:function(){this.state.set("mode",t.ADD_RULE)}})}})}.apply(t,n),!(void 0!==s&&(e.exports=s))},function(e,t,i){var n,s;n=[i(2),i(308),i(309)],s=function(e,t,i){return e.View.extend({initialize:function(){this.add(e.createButton({icon:"configure-16",className:"grouppush-settings-toolbar-button",enabled:function(){return this.settings.hasPermission("manage")||this.settings.hasPermission("manageAppConfig")},click:function(){var e=new i.Model;e.instanceId=this.collection.instanceId,new t({model:e}).render()}}))}})}.apply(t,n),!(void 0!==s&&(e.exports=s))},function(e,t,i){var n,s;n=[i(2)],s=function(e){var t=e._;return e.FormDialog.extend({title:e.loc("grouppush.groupPushSettingsModal.title"),autoSave:!0,initialize:function(){this.model.fetch().done(t.bind(function(){this.addInput({type:"checkbox",name:"renameGroups",label:e.loc("grouppush.groupPushSettingsModal.renameGroups.label"),placeholder:e.loc("grouppush.groupPushSettingsModal.renameGroups.text")})},this)),this.listenTo(this,"save",this.remove)}})}.apply(t,n),!(void 0!==s&&(e.exports=s))},function(e,t,i){var n,s;n=[i(2)],s=function(e){var t=e.tpl("/api/internal/instance/{{instanceId}}/grouppush/settings"),i=e.Model.extend({props:{renameGroups:"boolean"},urlRoot:function(){return t(this)}});return{Model:i}}.apply(t,n),!(void 0!==s&&(e.exports=s))},function(e,t,i){var n,s;n=[i(2),i(304)],s=function(e,t){var i=e.internal.views.datalist.ToolBar;return i.extend({initialize:function(){this.add(t.createCloseButton(this.options))}})}.apply(t,n),!(void 0!==s&&(e.exports=s))},function(e,t,i){var n,s;n=[i(2),i(312),i(343),i(345),i(346)],
s=function(e,t,i,n,s){var o=e.internal.views.datalist.Table;return o.extend({item:t,header:i,footer:n,caption:s})}.apply(t,n),!(void 0!==s&&(e.exports=s))},function(e,t,i){var n,s;n=[i(2),i(313),i(339)],s=function(e,t,i){return e.View.extend({tagName:"tbody",initialize:function(){this.add(t),this.add(i)}})}.apply(t,n),!(void 0!==s&&(e.exports=s))},function(e,t,i){var n,s;n=[i(2),i(314),i(315),i(316),i(317),i(318)],s=function(e,t,i,n,s,o){var a=e.View.extend({tagName:"tr",initialize:function(){this.add(t),this.add(i),(this.settings.get("enhancementsSupported")||this.settings.hasFeature("GROUP_PUSH_ENHANCEMENTS_AD"))&&this.add(n),this.add(s),this.add(o),this.listenTo(this.model,"sync",this.render)}});return a}.apply(t,n),!(void 0!==s&&(e.exports=s))},function(e,t,i){var n,s;n=[i(2)],s=function(e){var t='<input class="gscheckbox" type="checkbox" name="checkbox">';return e.View.extend({tagName:"td",className:"checkbox",events:{change:function(){this.model.set("__checked__",this.$input.prop("checked"))}},modelEvents:{"change:__checked__":function(){this.$("input").prop("checked",arguments[1])}},stateEvents:{"change:editMode":"toggle"},render:function(){return this.$el.html(t),this.$input=this.$("input"),this.toggle(),this},toggle:function(){this.$el.toggle(!!this.state.get("editMode"))}})}.apply(t,n),!(void 0!==s&&(e.exports=s))},function(e,t,i){var n,s;n=[i(2)],s=function(e){var t='\t      <div class="clearfix">\t        <div class="group-logo-wrap float-l">\t          <span class="icon group-logos-24 icon-24 okta-group-logo logo-{{sourceGroupAppName}}"></span>\t        </div>\t        <div class="grouppush-group-info-field-details">\t          <a href="/admin/group/{{sourceUserGroupId}}" class="gs-group-name" title="{{sourceGroupName}}">\t            {{sourceGroupName}}\t          </a>\t          <p class="gs-group-desc{{#if GROUP_PUSH_ENHANCEMENTS}}-GROUP_PUSH_ENHANCEMENTS{{/if}} text-light"\t          title="{{sourceGroupDescription}}">\t            {{sourceGroupDescription}}\t          </p>\t        </div>\t      </div>\t    ',i=e.View.extend({tagName:"td",className:function e(){var e="groupsync-okta-info";return(this.settings.get("enhancementsSupported")||this.settings.hasFeature("GROUP_PUSH_ENHANCEMENTS_AD"))&&(e+="-GROUP_PUSH_ENHANCEMENTS"),e},template:t,getTemplateData:function(){return{sourceGroupAppName:this.model.get("sourceGroupAppName"),sourceUserGroupId:this.model.get("sourceUserGroupId"),sourceGroupName:this.model.get("sourceGroupName"),sourceGroupDescription:this.model.get("sourceGroupDescription")||"No description",GROUP_PUSH_ENHANCEMENTS:this.settings.get("enhancementsSupported")||this.settings.hasFeature("GROUP_PUSH_ENHANCEMENTS_AD")}}});return i}.apply(t,n),!(void 0!==s&&(e.exports=s))},function(e,t,i){var n,s;n=[i(2)],s=function(e){return e.View.extend({tagName:"td",className:"groupsync-remote-info",template:e.tpl('\t      <div class="clearfix">\t        <div class="group-logo-wrap float-l">\t          <span class="icon group-logos-24 icon-24 okta-group-logo logo-{{targetGroupAppName}}"></span>\t        </div>\t        <div class="grouppush-group-info-field-details">\t          <a href="/admin/group/{{targetAppGroupUserGroupId}}" class="gs-group-name" title="{{targetGroupName}}">\t            {{targetGroupName}}\t          </a>\t          <p class="gs-group-desc text-light" title="{{targetGroupDescription}}">{{targetGroupDescription}}</p>\t        </div>\t      </div>\t    '),getTemplateData:function(){return{targetGroupAppName:this.model.get("targetGroupAppName"),targetAppGroupUserGroupId:this.model.get("targetAppGroupUserGroupId"),targetGroupName:this.model.get("targetGroupName"),targetGroupDescription:this.model.get("targetGroupDescription")||"No description"}}})}.apply(t,n),!(void 0!==s&&(e.exports=s))},function(e,t,i){var n,s;n=[i(2)],s=function(e){var t=e.View.extend({tagName:"td",className:"groupsync-target-info",template:"\t      <p>\t        {{lastPushTime}}\t      </p>\t    ",modelEvents:{"change:lastPushTime":"render"},getTemplateData:function(){return{lastPushTime:this.model.get("lastPushTime")||"Not pushed yet"}}});return t}.apply(t,n),!(void 0!==s&&(e.exports=s))},function(e,t,i){var n,s;n=[i(2),i(319),i(338)],s=function(e,t,i){var n=e.View.extend({tagName:"td",className:"okta-groupsync-status",initialize:function(){this.add(i),this.add(t)}});return n}.apply(t,n),!(void 0!==s&&(e.exports=s))},function(e,t,i){var n,s;n=[i(2),i(291),i(320),i(321),i(322),i(323),i(324),i(325)],s=function(e,t,i,n,s,o,a,r){function l(e){throw new Error(e)}function p(e){e!=t.PENDING&&(d.each(this.model.get("selectableStatuses"),function(t){if(t!=e){var i=c[t]||l("No class defined for status "+t);this.add(i,"ul.options-wrap")}},this),e===t.ACTIVE&&this.add(a,"ul.options-wrap"),(this.settings.get("enhancementsSupported")||this.settings.hasFeature("GROUP_PUSH_ENHANCEMENTS_AD"))&&(this.settings.hasPermission("manage")||this.settings.hasPermission("manageAppConfig"))&&this.add(r,"ul.options-wrap"))}var d=e._,c={ACTIVE:n,INACTIVE:s,DELETED:o},u='\t    <a href="#" class="link-button {{className}} link-button-icon option-selected">\t      <span class="icon {{icon}}"></span>\t      {{title}}\t      {{#unless isPending}}\t        <span class="icon-dm"></span>\t      {{/unless}}\t    </a>\t    <div class="options clearfix" style="display: none;">\t      <ul class="options-wrap clearfix"></ul>\t    </div>\t  ';return e.View.extend({className:"gs-status-dropdown dropdown more-actions",events:{"click a.option-selected":function(e){e.preventDefault()}},template:u,modelEvents:{"change:ui_status":"render"},getTemplateData:function(){return d.extend({},i.getData(this.model.get("ui_status")),{isPending:"PENDING"==this.model.get("ui_status")})},preRender:function(){this.empty()},postRender:function(){p.call(this,this.model.get("ui_status"))}})}.apply(t,n),!(void 0!==s&&(e.exports=s))},function(e,t,i){var n,s;n=[i(291)],s=function(e){return{getData:function(t){var i={};i[e.ACTIVE]={className:"text-dark-green",icon:"active-sync-16",title:"Active"},i[e.INACTIVE]={className:"text-light",icon:"inactive-sync-16",title:"Inactive"},i[e.ERROR]={className:"text-error-red",icon:"error-sync-16",title:"Error"},i[e.PENDING]={className:"text-light dropdown-disabled",icon:"time-16",title:"Pushing"};var n=i[t];return n.status=t,n}}}.apply(t,n),!(void 0!==s&&(e.exports=s))},function(e,t,i){var n,s;n=[i(2),i(291)],s=function(e,t){var i='\t    <a class="icon-16">\t      <span class="icon active-sync-16"></span>\t      Activate group push\t      <p class="option-subtitle">Start pushing group memberships.</p>\t   </a>\t  ';return e.View.extend({tagName:"li",className:"option",events:{click:function(e){e.preventDefault(),this.model.set("status",t.ACTIVE,{silent:this.options.silent!==!1}),this.model.save()}},render:function(){return this.$el.html(i),this}})}.apply(t,n),!(void 0!==s&&(e.exports=s))},function(e,t,i){var n,s;n=[i(2),i(291)],s=function(e,t){var i='\t    <a class="icon-16">\t      <span class="icon inactive-sync-16"></span>\t      Deactivate group push\t      <p class="option-subtitle">Stop pushing group memberships.\t      Existing memberships are unaffected.</p>\t   </a>\t  ';return e.View.extend({tagName:"li",className:"option",events:{click:function(e){e.preventDefault(),this.model.set("status",t.INACTIVE),this.model.save()}},render:function(){return this.$el.html(i),this}})}.apply(t,n),!(void 0!==s&&(e.exports=s))},function(e,t,i){var n,s;n=[i(2)],s=function(e){var t=e.internal.util.Events.DELETE,i='\t    <a class="icon-16 ">\t      <span class="icon remove-16-red"></span>\t      Unlink pushed group\t      <p class="option-subtitle">Stop pushing group memberships and optionally delete the pushed group.</p>\t    </a>\t  ';return e.View.extend({tagName:"li",className:"option",events:{click:function(e){e.preventDefault(),this.model.trigger(t,this.model)}},render:function(){return this.$el.html(i),this}})}.apply(t,n),!(void 0!==s&&(e.exports=s))},function(e,t,i){var n,s;n=[i(2)],s=function(e){return e.View.extend({tagName:"li",className:"option",template:'\t      <a class="icon-16">\t        <span class="icon password-sync-16-green"></span>\t        Push now\t        <p class="option-subtitle">Push this group\'s memberships to {{appName}}</p>\t     </a>\t    ',events:{click:function(e){e.preventDefault(),this.model.set({action:"PUSH"},{silent:!0}),this.model.save(),this.model.unset("action",{silent:!0})}},getTemplateData:function(){return this.settings.toJSON()}})}.apply(t,n),!(void 0!==s&&(e.exports=s))},function(e,t,i){var n,s;n=[i(2),i(326)],s=function(e,t){var i=e._;return e.View.extend({tagName:"li",className:"option",template:'\t      <a class="icon-16">\t        <span class="icon link-16-blue"></span>\t        Change linked group\t        <p class="option-subtitle">Link this group to a different group in {{appName}}.</p>\t      </a>\t    ',events:{click:function(e){e.preventDefault();var i=new t(this.options);i.render()}},getTemplateData:function(){var t=e.View.prototype.getTemplateData.apply(this,arguments);return i.extend(t,{appName:this.settings.get("appName")})}})}.apply(t,n),!(void 0!==s&&(e.exports=s))},function(e,t,i){var n,s;n=[i(2),i(327),i(328),i(337)],s=function(e,t,i,n){return e.FormDialog.extend({title:"Change Linked Group",className:"grouppush-change-linked-group-modal",autoSave:!0,initialize:function(){this.add('\t        <p class="grouppush-change-linked-group-modal-instructions">\t          Choose a different group to link to or create a new group in {{targetGroupAppDisplayName}}\t        </p>\t      '),this.add(t),this.add(i),this.listenTo(this.model,"change:existingAppGroupId",this.handleExistingAppGroupIdChange),this.listenTo(this.model,"change:newAppGroupName",this.handleNewAppGroupNameChange)},handleExistingAppGroupIdChange:function(){var e=this.model.get("existingAppGroupId"),t=this.model.get("targetAppGroupId");this.deleteGroupOptionsView&&this.deleteGroupOptionsView.remove(),e&&e!=t&&(this.deleteGroupOptionsView=new n({model:this.model,name:"deleteAppGroup"}),this.add(this.deleteGroupOptionsView))},handleNewAppGroupNameChange:function(){var e=this.model.get("newAppGroupName"),t=this.model.get("targetGroupName");this.deleteGroupOptionsView&&this.deleteGroupOptionsView.remove(),e&&e!=t&&(this.deleteGroupOptionsView=new n({model:this.model,name:"deleteAppGroup"}),this.add(this.deleteGroupOptionsView))}})}.apply(t,n),!(void 0!==s&&(e.exports=s))},function(e,t,i){var n,s;n=[i(2)],s=function(e){var t=e._;return e.View.extend({className:"grouppush-local-group-display",template:'\t      <div class="group-logo-wrap">\t        <span class="icon group-logos-24 icon-24 okta-group-logo logo-{{appName}}"></span>\t      </div>\t      <a href="/admin/group/{{userGroupId}}" class="gs-group-name" title="{{userGroupName}}">{{userGroupName}}</a>\t    ',initialize:function(){this.isNewMapping=!this.model.get("mappingId")},getTemplateData:function(){var i=e.View.prototype.getTemplateData.apply(this,arguments);return t.extend(i,this.isNewMapping?this.state.get("selectedGroupInfo"):{appName:this.model.get("sourceGroupAppName"),userGroupId:this.model.get("sourceUserGroupId"),userGroupName:this.model.get("sourceGroupName")})}})}.apply(t,n),!(void 0!==s&&(e.exports=s))},function(e,t,i){var n,s;n=[i(2),i(309),i(329),i(330),i(331),i(332),i(333),i(334),i(335)],s=function(e,t,i,n,s,o,a,r,l){var p=e.$,d=e._;return e.View.extend({className:"grouppush-group-link-details",initialize:function(){if(this.isNewMapping=!this.model.get("mappingId"),this.isNewMapping){var e=this.state.get("selectedGroupInfo").userGroupName;this.checkRenameRemoteGroups().then(d.bind(function(){return this.checkRemoteGroupMatch(e)},this)).then(d.bind(this.setupView,this))}else this.checkRenameRemoteGroups().then(d.bind(this.setupView,this)),this.model.set("__newAppGroupName__",this.model.get("targetGroupName")),this.model.set("__existingAppGroupId__",this.model.get("targetAppGroupId"))},setupView:function(){this.isNewMapping&&this.add(a),this.add(o),this.listenTo(this.model,"change:__createLinkMode__",function(){"create"===this.model.get("__createLinkMode__")?this.switchToGroupTextBox():"link"===this.model.get("__createLinkMode__")&&this.switchToGroupSelector()}),this.setInitialDetailsView()},setInitialDetailsView:function(){this.model.get("__remoteGroupMatchFound__")||!this.isNewMapping?this.model.set("__createLinkMode__","link"):this.model.set("__createLinkMode__","create")},switchToGroupTextBox:function(){this.callout&&this.callout.remove(),this.stopListening(this.model,"change:existingAppGroupId"),this.isNewMapping?this.model.set("newAppGroupName",this.state.get("selectedGroupInfo").userGroupName):this.model.set("newAppGroupName",this.model.get("__newAppGroupName__")),this.model.unset("existingAppGroupId"),this.remoteGroupSelector&&this.remoteGroupSelector.remove(),this.remoteGroupTextBox&&this.remoteGroupTextBox.remove(),this.adGroupPushDetails&&this.adGroupPushDetails.remove();var e="newAppGroupName";this.model.get("__renameRemoteGroups__")&&!this.model.get("__remoteGroupMatchFound__")&&this.isNewMapping&&(e="__newAppGroupName__",this.model.set(e,this.model.get("newAppGroupName")),this.model.unset("newAppGroupName")),this.remoteGroupTextBox=new n({model:this.model,settings:this.settings,name:e,type:"text",appUniqueName:this.settings.get("appUniqueName")}),this.add(this.remoteGroupTextBox),this.isNewMapping&&this.settings.get("pushToAD")&&(this.adGroupPushDetails=new l({model:this.model}),this.add(this.adGroupPushDetails))},switchToGroupSelector:function(){this.model.set("existingAppGroupId",this.model.get("__existingAppGroupId__")),this.model.unset("newAppGroupName"),this.isNewMapping&&this.listenTo(this.model,"change:existingAppGroupId",this.checkLinkMatch),this.remoteGroupSelector&&this.remoteGroupSelector.remove(),this.remoteGroupTextBox&&this.remoteGroupTextBox.remove(),this.adGroupPushDetails&&this.adGroupPushDetails.remove(),this.remoteGroupSelector=new s({model:this.model,name:"existingAppGroupId",settings:this.settings,state:this.state}),this.remoteGroupSelector.appInstanceId=this.settings.get("appInstanceId"),this.add(this.remoteGroupSelector)},checkRenameRemoteGroups:function(){var e=p.Deferred();return this.groupPushSettings=new t.Model,this.groupPushSettings.instanceId=this.settings.get("appInstanceId"),this.groupPushSettings.fetch().done(d.bind(function(){return this.model.set("__renameRemoteGroups__",this.groupPushSettings.get("renameGroups")),e.resolve()},this)),e.promise()},checkRemoteGroupMatch:function(e){var t,n=p.Deferred();return this.settings.get("pushToAD")?t=new r.Collection(this.settings.get("appInstanceId"),this.model.get("distinguishedName")):(t=new i.Collection,t.instanceId=this.settings.get("appInstanceId")),t.searchQuery=e,t.fetch().done(d.bind(function(){var i=t.find(function(t){return t.get("appGroupName").toLowerCase()===e.toLowerCase()});return this.model.set("__remoteGroupMatchFound__",i),this.model.set("__existingAppGroupId__",i?i.get("appGroupId"):null),n.resolve()},this)),n.promise()},checkLinkMatch:function(){this.model.get("__renameRemoteGroups__")&&this.remoteGroupSelector&&this.model.get("existingAppGroupId")&&(this.remoteGroupSelector.toStringValue().toLowerCase()!==this.state.get("selectedGroupInfo").userGroupName.toLowerCase()?(this.callout&&this.callout.remove(),this.callout=e.createCallout({type:"warning",size:"compact",appName:this.settings.get("appName"),content:"Linking to this group will rename the group in {{appName}}"}),this.add(this.callout)):this.callout&&this.callout.remove())}})}.apply(t,n),!(void 0!==s&&(e.exports=s))},function(e,t,i){var n,s;n=[i(2)],s=function(e){var t=e.tpl("/api/internal/instance/{{instanceId}}/grouppush/autocompleteAppGroups?q={{searchQuery}}"),i=e.Model.extend({props:{appGroupName:"string",appGroupId:"string"}}),n=e.Collection.extend({model:i,url:function(){return t(this)}});return{Model:i,Collection:n}}.apply(t,n),!(void 0!==s&&(e.exports=s))},function(e,t,i){var n,s;n=[i(2)],s=function(e){var t=e._,i=e.internal.views.forms.inputs.TextBox;return i.extend({tagName:"div",className:"remote-group-search-input-container",template:e.tpl('\t      <span class="icon-only icon-16 logo-{{appUniqueName}}"></span>\t      <input type="{{type}}"\t        placeholder="{{placeholder}}"\t        name="{{name}}"\t        id="{{inputId}}"\t        value="{{value}}"/>\t    '),initialize:function(){this.isNewMapping=!this.model.get("mappingId"),t.defer(t.bind(this.processEnableDisable,this)),this.listenTo(this.model,"change:__renameRemoteGroups__",this.processEnableDisable)},postRender:function(){this.$el.removeClass("input-fix")},processEnableDisable:function(){this.model.get("__renameRemoteGroups__")?this.disable():this.enable()}})}.apply(t,n),!(void 0!==s&&(e.exports=s))},function(e,t,i){var n,s;n=[i(2),i(44)],s=function(e,t){var i=e._,n=e.$,s=e.internal.views.forms.inputs.GroupSelect,o=e.tpl('\t    <div class="active-result clearfix">\t      <span class="icon group-logos-16 icon-16 okta-group-logo logo-{{appUniqueName}}"></span>\t      <span>{{name}}</span>\t    </div>\t  '),a=e.tpl('\t    <div>\t      <span class="icon group-logos-16 icon-16 okta-group-logo logo-{{appUniqueName}}"></span>\t      <span>{{name}}</span>\t    </div>\t  ');return s.extend({tagName:"div",template:e.tpl('<input name="{{name}}" id="{{inputId}}" type="hidden"></input>'),formatInputTooShort:e.loc("oform.groupselect.short_input"),nameAttribute:"appGroupName",initialize:function(){if(this.isNewMapping=!this.model.get("mappingId"),this.settings.get("pushToAD")){var t="/api/internal/instance/{{instanceId}}/grouppush/autocompleteADAppGroups?selectedOU={{selectedOU}}";this.apiURL=e.tpl(t)({instanceId:this.settings.get("appInstanceId"),selectedOU:this.model.get("distinguishedName")})}else this.apiURL=e.tpl("/api/internal/instance/{{instanceId}}/grouppush/autocompleteAppGroups")({instanceId:this.settings.get("appInstanceId")});i.bindAll(this,"parse"),this.$el.addClass("grouppush-remote-group-selector")},postRender:function(){this.checkDisabled()},checkDisabled:function(){this.isNewMapping&&this.model.get("__remoteGroupMatchFound__")&&this.model.get("__renameRemoteGroups__")&&this.disable()},parse:function(e){var t={name:e.appGroupName,id:e.appGroupId,appUniqueName:this.settings.get("appUniqueName")};return t},formatSelection:function(e){return e.empty?e.name:a(e)},formatResult:function(e,i,n,s){if(e.empty)return this.selectEmptyOptionTemplate();var a=[];return t.util.markMatch(e.name,n.term,a,s),e.highlightedName=a.join(""),o(e)},toStringValue:function(){return this._entity.name},prefetch:function(e,t){var s=this.getModelValue();if(!s)return e([]),void this.checkDisabled();var o;o=this.isNewMapping?this.state.get("selectedGroupInfo").userGroupName.toLowerCase():this.model.get("targetGroupName");var a=n.get(this.apiURL,this.buildPrefetchQuery(o),i.bind(function(t){var n=i.filter(t,function(e){return e.appGroupName.toLowerCase()===o});e(n),this.checkDisabled()},this));t&&a.error(t)},buildPrefetchQuery:function(e){return{q:e}}})}.apply(t,n),!(void 0!==s&&(e.exports=s))},function(e,t,i){var n,s;n=[i(2)],s=function(e){return e.DropDown.extend({title:"Create Group",icon:"add-16-color",itemWidth:130,width:130,items:[{title:"Create Group",icon:"add-16-color",click:function(){this.model.set("__createLinkMode__","create")},enableWhen:{__remoteGroupMatchFound__:function(e){var t=this.model.get("__renameRemoteGroups__"),i=!this.model.get("mappingId");return!i||!(i&&e&&t)}}},{title:"Link Group",icon:"link-16-blue",click:function(){this.model.set("__createLinkMode__","link")}}],initialize:function(){this.isNewMapping=!this.model.get("mappingId"),this.listenTo(this.model,"change:__createLinkMode__",function(){"create"===this.model.get("__createLinkMode__")?this.setSelectedOption("Create Group","add-16-color"):"link"===this.model.get("__createLinkMode__")&&this.setSelectedOption("Link Group","link-16-blue")})},postRender:function(){this.isNewMapping&&this.model.get("__remoteGroupMatchFound__")&&this.model.get("__renameRemoteGroups__")&&this.disable()},disable:function(){this.$("a").addClass("disabled")},setSelectedOption:function(e,t){this.title=e,this.icon=t,this.render()}})}.apply(t,n),!(void 0!==s&&(e.exports=s))},function(e,t,i){var n,s;n=[i(2)],s=function(e){return e.View.extend({tagName:"div",className:"grouppush-remote-group-match-message",template:e.tpl("\t      {{#if matchFound}}\t        Match\t      {{else}}\t        No Match\t      {{/if}}\t      found\t    "),getTemplateData:function(){var t=e.View.prototype.getTemplateData.apply(this,arguments);return t.matchFound=!!this.model.get("__remoteGroupMatchFound__"),t}})}.apply(t,n),!(void 0!==s&&(e.exports=s))},function(e,t,i){var n,s;n=[i(2)],s=function(e){var t=e.tpl("/api/internal/instance/{{instanceId}}/grouppush/autocompleteADAppGroups?q={{searchQuery}}&selectedOU={{selectedOU}}"),i=e.Model.extend({props:{appGroupName:"string",appGroupId:"string"}}),n=e.Collection.extend({model:i,initialize:function(e,t){this.instanceId=e,this.selectedOU=t},url:function(){return t(this)}});return{Model:i,Collection:n}}.apply(t,n),!(void 0!==s&&(e.exports=s))},function(e,t,i){var n,s;n=[i(2),i(336)],s=function(e,t){return e.Form.extend({noButtonBar:!0,initialize:function(){this.addInput({label:"Group scope:",type:"radio",name:"groupScope",options:t.GroupScopeOptions}),this.addInput({label:"Group type:",type:"radio",name:"groupType",options:t.GroupTypeOptions})}})}.apply(t,n),!(void 0!==s&&(e.exports=s))},function(e,t,i){var n,s;n=[],s=function(){return{GroupScopeOptions:{"DOMAIN LOCAL":"Domain local",GLOBAL:"Global",UNIVERSAL:"Universal"},GroupTypeOptions:{SECURITY:"Security",DISTRIBUTION:"Distribution"}}}.apply(t,n),!(void 0!==s&&(e.exports=s))},function(e,t,i){var n,s;n=[i(2)],s=function(e){return e.internal.views.forms.BaseInput.extend({tagName:"div",className:"grouppush-delete-group-options",template:e.tpl('\t      <p class="grouppush-change-linked-group-modal-instructions">\t        What do you want to do with the previously linked group?\t      </p>\t      <div class="checkbox-wrap">\t        <label>\t          <input type="radio" name="deleteMembership" value="true" checked="checked">\t          <strong>Delete the group in the target app</strong>\t          <p class="explain-text checkbox-wrap-sub-option margin-top-5">\t            Delete the group and all associated memberships.</p>\t        </label>\t      </div>\t      <div class="checkbox-wrap grouppush-delete-group-options-leave-target-groups">\t        <label>\t          <input type="radio" name="deleteMembership" value="false">\t          <strong>Leave the group in the target app</strong>\t          <p class="explain-text checkbox-wrap-sub-option margin-top-5">\t            {{#if renameRemoteGroups}}\t              This option is not available when renaming groups is enabled.\t            {{else}}\t              Okta stops pushing memberships and the group remains in the target.\t            {{/if}}\t          </p>\t        </label>\t      </div>\t    '),events:{"click input":"handleSelectedChange"},initialize:function(){this.options.renameRemoteGroups=this.model.get("__renameRemoteGroups__")===!0},postRender:function(){this.model.get("__renameRemoteGroups__")&&(this.$(".grouppush-delete-group-options-leave-target-groups").addClass("disabled"),this.$(".grouppush-delete-group-options-leave-target-groups input").prop("disabled",!0)),this.handleSelectedChange()},handleSelectedChange:function(){this.model.set(this.options.name,"true"===this.$("input[name=deleteMembership]:checked").val())}})}.apply(t,n),!(void 0!==s&&(e.exports=s))},function(e,t,i){var n,s;n=[i(2),i(291)],s=function(e,t){var i='<span class="icon info-16-gray"></span>',n=e.View.extend({tagName:"a",className:"collapsible-open link-button link-button-icon option-selected icon-only",attributes:{href:"#"},events:{click:function(e){e.preventDefault(),this.model.set("__expand__",this.model.get("__expand__")!==!0)}},modelEvents:{"change:ui_status":"toggleClass"},render:function(){return this.$el.html(i),this.toggleClass(),this},toggleClass:function(){this.$el.toggleClass("button-error",this.model.get("status")===t.ERROR)}});return n}.apply(t,n),!(void 0!==s&&(e.exports=s))},function(e,t,i){var n,s;n=[i(2),i(340),i(341),i(342),i(303)],s=function(e,t,i,n,s){function o(){var e=this,t=this.model.get("__expand__");a.call(this),t?e.$el.show().find(".data-list-row-expander-wrap").slideDown(p.ROW_EXPANDER_TRANSITION):this.$(".data-list-row-expander-wrap").slideUp(p.ROW_EXPANDER_TRANSITION,function(){e.$el.hide()})}function a(){this.settings.get("enhancementsSupported")||this.settings.hasFeature("GROUP_PUSH_ENHANCEMENTS_AD")?this.$("td").attr("colspan",this.state.get("editMode")?5:4):this.$("td").attr("colspan",this.state.get("editMode")?4:3)}function r(){this.model.set("__expand__",!1)}var l=e._,p=e.internal.util.Time,d=e.tpl('\t    <td>\t      <div class="data-list-row-expander-wrap" style="display: none"> \t        <span class="data-list-row-arrow-up"></span>\t        <div class="grouppush-custom-error-message"></div>\t        {{#if pushErrorMessage}}\t        <div class="infobox infobox-error margin-btm-10">{{pushErrorMessage}}\t          <span class="icon error-16"></span>\t        </div>\t        {{/if}}\t        <dl class="data-list-row-details clearfix">\t          <dt>Created by</dt>\t          <dd>{{createdBy}}</dd>\t          <dt>Created</dt>\t          <dd>{{creationTime}} </dd>\t          <dt>Push type</dt>\t          <dd>{{type}}</dd>\t          \t          {{#if pushToAD}}\t            <dt>Target OU</dt>\t            <dd>{{targetOU}}</dd>\t            <dt>SAM Account Name</dt>\t            <dd>{{samAccountName}}</dd>\t            <dt>Group Scope</dt>\t            <dd>{{groupScope}}</dd>\t          {{/if}}\t        </dl>\t      </div>\t    </td>\t  '),c={createDuplicateGroupError:t,linkDuplicateGroupError:i,linkedGroupDeletedError:n},u=e.View.extend({tagName:"tr",className:"data-list-row-expander",template:d,modelEvents:function(){var e={"change:pushErrorMessage":"render","change:__expand__":o};return e["change:ui_status"]=l.bind(r,this),e},stateEvents:{"change:editMode":a},initialize:function(){this.$el.hide();var e=l.bind(r,this);s.escapeKeyHandler(null,e,!1),(this.settings.get("enhancementsSupported")||this.settings.hasFeature("GROUP_PUSH_ENHANCEMENTS_AD"))&&(this.showPushError(),this.listenTo(this.model,"sync",this.showPushError))},getTemplateData:function(){var t=this.model.get("pushErrorType"),i=e.View.prototype.getTemplateData.apply(this,arguments);return i=l.extend(i,{createdBy:this.model.createdBy.get("name"),creationTime:this.model.get("creationTime"),type:this.model.get("ruleId")?"By rule":"By name",pushErrorMessage:this.model.get("pushErrorMessage"),pushToAD:!1}),this.model.get("samAccountName")&&(i=l.extend(i,{targetOU:this.model.get("distinguishedName"),samAccountName:this.model.get("samAccountName"),groupScope:this.model.get("groupScope"),pushToAD:!0})),(this.settings.get("enhancementsSupported")||this.settings.hasFeature("GROUP_PUSH_ENHANCEMENTS_AD"))&&t&&c[t]&&(i.pushErrorMessage=null),i},postRender:function(){a.call(this)},showPushError:function(){var e=this.model.get("pushErrorType");e?!this.pushError&&c[e]&&(this.pushError=new c[e]({model:this.model,settings:this.settings}),this.add(this.pushError,".grouppush-custom-error-message")):this.pushError&&this.pushError.remove()}});return u}.apply(t,n),!(void 0!==s&&(e.exports=s))},function(e,t,i){var n,s;n=[i(2),i(326)],s=function(e,t){return e.View.extend({tagName:"div",template:e.tpl('\t      <div class="infobox infobox-error">\t        <span class="icon error-16"></span>\t        <p>\t          Group creation failed.  <b>{{targetGroupName}}</b> already exists in {{targetGroupAppDisplayName}}.\t          <a href="#">Change the linked group</a> to start pushing group memberships.\t        </p>\t      </div>\t    '),events:{"click a":"openChangeLinkedGroupModal"},openChangeLinkedGroupModal:function(e){e.preventDefault();var i=new t(this.options);i.render()}})}.apply(t,n),!(void 0!==s&&(e.exports=s))},function(e,t,i){var n,s;n=[i(2),i(326)],s=function(e,t){return e.View.extend({tagName:"div",template:e.tpl('\t      <div class="infobox infobox-error">\t        <p>\t          <span class="icon error-16"></span>\t          Linking to {{targetGroupAppDisplayName}} group failed.\t          <b>{{targetGroupName}}</b> already exists in {{targetGroupAppDisplayName}}.\t          Delete the group in {{targetGroupAppDisplayName}} or\t          <a href="#">change the linked group</a> to start pushing group memberships.\t        </p>\t      </div>\t    '),events:{"click a":"openChangeLinkedGroupModal"},openChangeLinkedGroupModal:function(e){e.preventDefault();var i=new t(this.options);i.render()}})}.apply(t,n),!(void 0!==s&&(e.exports=s))},function(e,t,i){var n,s;n=[i(2),i(326)],s=function(e,t){return e.View.extend({tagName:"div",template:e.tpl('\t      <div class="infobox infobox-error">\t        <p>\t          <span class="icon error-16"></span>\t          Linked group is missing in {{targetGroupAppDisplayName}}.\t          <a href="#">Change the linked group</a> to resume pushing group memberships.\t        </p>\t      </div>\t    '),events:{"click a":"openChangeLinkedGroupModal"},openChangeLinkedGroupModal:function(e){e.preventDefault();var i=new t(this.options);i.render()}})}.apply(t,n),!(void 0!==s&&(e.exports=s))},function(e,t,i){var n,s;n=[i(2),i(344)],s=function(e,t){function i(){this.$(".check-all").toggle(this.state.get("editMode"))}return e.View.extend({tagName:"thead",template:'\t      <tr>\t        <th class="check-all"></th>\t        <th class="groupsync-okta-info-header{{#if GROUP_PUSH_ENHANCEMENTS}}-GROUP_PUSH_ENHANCEMENTS{{/if}}">\t          Group in Okta\t        </th>\t        {{#if GROUP_PUSH_ENHANCEMENTS}}\t          <th class="groupsync-remote-info-header">Group in {{appName}}</th>\t        {{/if}}\t        <th class="groupsync-target-info-header">Last Push</th>\t        <th class="status">Push Status</th>\t      </tr>\t    ',stateEvents:{"change:editMode":i},initialize:function(){this.add(t,".check-all")},getTemplateData:function(){var t=e.View.prototype.getTemplateData.apply(this,arguments);return t.appName=this.settings.get("appName"),(this.settings.get("enhancementsSupported")||this.settings.hasFeature("GROUP_PUSH_ENHANCEMENTS_AD"))&&(t.GROUP_PUSH_ENHANCEMENTS=!0),t},render:function(){return e.View.prototype.render.apply(this,arguments),i.call(this),this}})}.apply(t,n),!(void 0!==s&&(e.exports=s))},function(e,t,i){var n,s;n=[i(2)],s=function(e){return e.View.extend({tagName:"input",attributes:{type:"checkbox"},events:{change:function(){this.collection.invoke("set","__checked__",this.$el.prop("checked"))}},collectionEvents:{"reset add remove change:__checked__":"render"},render:function(){var e=this.collection.where({__checked__:!0});return this.check(e.length&&e.length===this.collection.size()),this},check:function(e){this.$el.prop("checked",e)}})}.apply(t,n),!(void 0!==s&&(e.exports=s))},function(e,t,i){var n,s;n=[i(2)],s=function(e){function t(){this.$el.toggle(this.collection.hasMore())}function i(){this.$("td").attr("colspan",this.state.get("editMode")?4:3)}var n=e.internal.views.datalist.components.LoadMore,s=e.View.extend({tagName:"tfoot",className:"data-list-pager-footer",template:"\t      <tr>\t        <td></td>\t      </tr>\t    ",collectionEvents:{request:function(){this.$el.hide()},sync:t},stateEvents:{"change:editMode":i},initialize:function(){this.add(n,"td")},render:function(){return e.View.prototype.render.apply(this,arguments),t.call(this),i.call(this),this}});return s}.apply(t,n),!(void 0!==s&&(e.exports=s))},function(e,t,i){var n,s;n=[i(2),i(347),i(349)],s=function(e,t,i){var n=e._;return e.View.extend({tagName:"tbody",className:"gp-mapping-rule-row data-list-context-bar-table",stateEvents:{"change:filter":"render"},render:function(){this.empty(),n.contains(["All","Error","By name","By rule"],this.state.get("filter"))?this.add(i):this.state.get("mappingRuleId")&&this.add(t),
e.View.prototype.render.apply(this,arguments)}})}.apply(t,n),!(void 0!==s&&(e.exports=s))},function(e,t,i){var n,s;n=[i(2),i(348)],s=function(e,t){function i(){this.$("td").first().toggle(this.state.get("editMode"))}var n=e.tpl("\t      <td>&nbsp;</td>\t      <td colspan=\"{{colspan}}\">\t        <h4><strong>Rule name</strong> {{name}}</h4>\t        <h4>\t          <strong>Criteria</strong> Group name {{searchExpressionType}} '{{searchExpression}}'\t          {{#if descriptionSearchExpression}}\t              AND Group description {{descriptionSearchExpressionType}} '{{descriptionSearchExpression}}'\t          {{/if}}\t        </h4>\t      </td>\t      <td></td>\t  "),s=e.View.extend({tagName:"tr",className:"data-list-context-bar data-list-context-bar-highlight",events:{"change select":function(){this.rule.set({status:this.$("select").val()}),this.rule.save()}},stateEvents:{"change:mappingRuleId":"render","change:editMode":i},render:function(){if(this.$el.empty().hide(),this.rule=this.options.rules.get(this.state.get("mappingRuleId")),this.rule){var e=this.rule.toJSON();e.searchExpressionType=e.searchExpressionType.replace("_"," ").toLowerCase(),e.descriptionSearchExpression&&(e.descriptionSearchExpressionType=e.descriptionSearchExpressionType.replace("_"," ").toLowerCase()),e.colspan=this.settings.get("enhancementsSupported")?3:2,this.$el.html(n(e)).show(),this.$("select").val(this.rule.get("status")),i.call(this),this.$("td").last().html(new t({model:this.rule}).render().el)}return this}});return s}.apply(t,n),!(void 0!==s&&(e.exports=s))},function(e,t,i){var n,s;n=[i(2),i(291)],s=function(e,t){function i(e,i){var n={};n[t.ACTIVE]={title:"Active",className:"text-dark-green",icon:"active-sync-16 gp-rule-dropdown"},n[t.INACTIVE]={title:"Inactive",className:"text-disabled",icon:"inactive-sync-16 gp-rule-dropdown"};var s=n[e];return s&&s[i]}var n=e.internal.util.Events;return e.DropDown.extend({modelEvents:{"change:status":"render"},title:function(){return i(this.model.get("status"),"title")},icon:function(){return i(this.model.get("status"),"icon")},className:function(){return i(this.model.get("status"),"className")},items:[{icon:"active-sync-16",title:"Activate rule",subtitle:"Start pushing groups that match your search expression.",click:function(){this.model.save({status:t.ACTIVE})},showWhen:{status:t.INACTIVE}},{icon:"inactive-sync-16",title:"Deactivate rule",subtitle:"Stop automatically syncing new groups matching your search expression.  Groups previously matched by this rule are unaffected.",click:function(){this.model.save({status:t.INACTIVE})},showWhen:{status:t.ACTIVE}},{icon:"remove-16-red",title:"Delete rule",subtitle:"Permanently remove the rule and optionally remove pushed groups found by the rule.",click:function(){this.model.trigger(n.DELETE,this.model)}}]})}.apply(t,n),!(void 0!==s&&(e.exports=s))},function(e,t,i){var n,s;n=[i(2),i(292),i(69),i(42)],s=function(e,t,i){var n=e._,s='\t    <td colspan="5" class="data-list-context-bar-highlight">\t      <h3>All errors resolved</h3>\t    </td>\t  ',o=e.tpl('\t    <td colspan="5" class="data-list-context-bar-error">\t      <div class="data-list-retry-spinner" style="display: none">\t        <h3>Retrying push...</h3>\t        <div class="spinner"></div>\t      </div>\t      <h3 class="float-l">{{errors}} group{{#if isPlural}}s have{{else}} has an{{/if}}\t      error{{#if isPlural}}s{{/if}}. Click Retry All Groups to re-push all groups that have an error.</h3>\t      <a class="gp-bulk-retry link-button link-button-icon button-primary float-r" href="#">Retry All Groups\t      <span class="icon active-sync-16-reverse"></span>\t      </a>\t      {{#if showErrorLink}}\t        <p class="clear"><a class="gp-show-errors" href="#">Show Errors</a></p>\t      {{/if}}\t    </td>\t  ');return e.View.extend({tagName:"tr",className:"data-list-context-bar data-list-context-bar-error",attributes:{style:"display: none"},pollerOptions:{delay:5e3,data:{status:"ERROR"}},events:{"click .gp-bulk-retry":function(e){e.preventDefault(),this.collection.bulkRetry().then(n.bind(function(){n.delay(n.bind(function(){n.invoke(this.collection.where({status:"ERROR"}),"fetch")},this),1e3),this.retrying=!0,this.render()},this))},"click .gp-show-errors":function(e){e.preventDefault(),this.state.set("filter","Error")}},initialize:function(){this.errors=new t.Collection([],{instanceId:this.collection.instanceId}),this.poller=i.get(this.errors,this.pollerOptions).start(),this.listenTo(this.collection,"change:status",function(){this.poller.stop().start()}),this.listenTo(this.errors,"add remove reset",this.toggle)},render:function(){return this.options.errorsResolved?(this.retrying=!1,this.$el.html(s)):(this.$el.html(o({errors:this.errors.length,isPlural:1!=this.errors.length,showErrorLink:"error"!==(this.state.get("filter")||"").toLowerCase()})),this.retrying&&this.spin()),this},remove:function(){return this.poller.stop(),e.View.prototype.remove.apply(this,arguments)},toggle:function(){var e=this.errors.length>0,t=this.$el.is(":visible");this.options.errorsResolved=!e,e&&!t&&this.$el.fadeIn(),this.render()},spin:function(){this.$(".spinner").spin({size:"medium",top:"0",left:"15px"}),this.$("div").show()}})}.apply(t,n),!(void 0!==s&&(e.exports=s))},function(e,t,i){var n,s;n=[i(2),i(292),i(351),i(213),i(353),i(354)],s=function(e,t,i,n,s,o){var a=e._,r=e.internal.util.Events.SUBMIT;return e.View.extend({initialize:function(){this.model=new t.Model,this.form=new i(a.extend({},this.options,{model:this.model})),this.add(this.form),this.settings.get("enhancementsSupported")?this.listenTo(this.model,"change:userGroupId",this.addMappingGroupDetails):(this.buttonBar=new s(this.options),this.add(this.buttonBar),this.addButtonBarEventListeners()),this.listenTo(this.form,"cancel",function(){this.state.set("mode",n.DISPLAY)}),this.listenTo(this.state,"change:addMode",this.remove)},addButtonBarEventListeners:function(){this.stopListening(this.buttonBar,r),this.listenTo(this.buttonBar,r,function(e){this.targetModel=this.model.clone(),this.listenTo(this.targetModel,"all",function(){this.model.trigger.apply(this.model,arguments)}),this.collection.create(this.targetModel,{wait:!0,success:a.bind(function(){e&&e.close&&this.state.set("mode",n.DISPLAY),this.model.reset(),delete this.targetModel},this)})})},addMappingGroupDetails:function(){this.buttonBar&&this.buttonBar.remove(),this.mappingGroupDetails&&this.mappingGroupDetails.remove(),this.buttonBar=new s(this.options),this.mappingGroupDetails=new o({settings:this.settings,state:this.state,collection:new e.Collection([this.model])}),this.add(this.mappingGroupDetails),this.add(this.buttonBar),this.addButtonBarEventListeners()}})}.apply(t,n),!(void 0!==s&&(e.exports=s))},function(e,t,i){var n,s;n=[i(2),i(352),i(291)],s=function(e,t,i){return e.Form.extend({attributes:{name:"ADD"},title:"Push groups by name",subtitle:function(){return e.tpl("Choose a group in Okta to create in {{appName}} and have its memberships automatically pushed, or link to an existing group in {{appName}}")(this.settings.toJSON())},noButtonBar:!0,className:"add-mapping-form data-list-inline-form",initialize:function(){this.model.set("__status__",this.model.get("status")==i.ACTIVE),this.listenTo(this.model,"change:__status__",function(){this.model.set("status",this.model.get("__status__")?i.ACTIVE:i.INACTIVE)}),this.addInput({label:!1,input:new t(this.options)}),this.addInput({label:!1,type:"checkbox",name:"__status__",placeholder:"Push group memberships immediately"})}})}.apply(t,n),!(void 0!==s&&(e.exports=s))},function(e,t,i){var n,s;n=[i(2),i(105)],s=function(e){var t=e._,i=e.internal.views.forms.inputs.TextBox,n=10,s=e.tpl('\t    <div class="active-result clearfix">\t      <span class="icon group-logos-24 icon-24 okta-group-logo logo-{{appName}}"></span>\t      <p class="gs-group-selector-group-name">{{userGroupName}}</p>\t      <p class="gs-group-selector-group-description">\t        {{#if appDescription}}{{appDescription}}{{else}}\t        {{i18n code="grouppush.groupSelector.suggestion.emptyDescription"}}{{/if}}\t      </p>\t    </div>\t  '),o=e.tpl("/api/internal/instance/{{instanceId}}/grouppush/autocomplete?cb={{cb}}&limit={{limit}}&q=%QUERY"),a=i.extend({className:"gs-search-box-wrap float-l",attributes:{"data-se":"group-auto-complete",style:"width: 95%"},initialize:function(){this.limit=this.options.limit||n,this.options.type="text",this.options.placeholder=e.loc("grouppush.groupSelector.placeholder"),this.options.wide=!0,this.source=new Bloodhound({limit:this.limit,remote:{url:o({instanceId:this.collection.instanceId,limit:this.limit,cb:name}),cache:!1},datumTokenizer:function(e){return Bloodhound.tokenizers.whitespace(e.groupName)},queryTokenizer:Bloodhound.tokenizers.whitespace}),this.source.initialize(),this.listenTo(this.collection,"add",this.reset)},postRender:function(){this.$("input").removeAttr("id")},autocomplete:function(){var e=""+t.uniqueId("typeahead"),i=this;return this.$("input").typeahead("destroy"),this.$("input").typeahead(null,{name:e,displayKey:"userGroupName",minLength:1,source:this.source.ttAdapter(),templates:{suggestion:s}}).on("typeahead:selected",function(e,t){i.state.set("selectedGroupInfo",t),i.model.set("userGroupId",t.userGroupId),i.settings.get("pushToAD")&&i.model.set("groupName",t.userGroupName)}),this.source.clearRemoteCache(),this},editMode:function(){return i.prototype.editMode.apply(this,arguments),this.$el.removeClass("input-fix"),this.autocomplete(),this},reset:function(){this.$("input").val(""),this.autocomplete()}});return a}.apply(t,n),!(void 0!==s&&(e.exports=s))},function(e,t,i){var n,s;n=[i(2),i(304)],s=function(e,t){var i=e.internal.views.datalist.ToolBar;return i.extend({template:'\t      <div class="grouppush-add-mapping-group-details-datalist-toolbar-container">\t      </div>\t    ',initialize:function(){this.add(t.createSaveButton(this.options),".grouppush-add-mapping-group-details-datalist-toolbar-container",{bubble:!0}),this.add(t.createSaveAndAddButton(this.options),".grouppush-add-mapping-group-details-datalist-toolbar-container",{bubble:!0})}})}.apply(t,n),!(void 0!==s&&(e.exports=s))},function(e,t,i){var n,s;n=[i(2),i(327),i(328)],s=function(e,t,i){var n=e._;return e.DataList.extend({className:"grouppush-add-mapping-group-details-datalist",columns:[{label:"Group",view:t},{label:"Match result & push action",view:i}],headerClassNames:["col-org-goup-name","col-push-action"],postRender:function(){n.isArray(this.headerClassNames)&&this.headerClassNames.length&&this.setHeaderStyle()},setHeaderStyle:function(){var e=this.$(".data-list-table thead th");e.each(n.bind(function(e,t){this.$(t).addClass(this.headerClassNames[e])},this))}})}.apply(t,n),!(void 0!==s&&(e.exports=s))},function(e,t,i){var n,s;n=[i(289),i(2),i(356),i(213),i(353),i(354)],s=function(e,t,i,n,s,o){var a=t._,r=t.internal.util.Events;return t.View.extend({stateEvents:{"change:addMode":"remove"},initialize:function(){this.model=new e.Model,this.form=new i(a.extend({},this.options,{model:this.model})),this.add(this.form),this.settings.hasFeature("GROUP_PUSH_ENHANCEMENTS_AD")?this.listenTo(this.model,"change:userGroupId change:distinguishedName",this.handleGroupSelected):(this.buttonBar=new s(this.options),this.add(this.buttonBar),this.addButtonBarEventListeners()),this.listenTo(this.form,"cancel",function(){this.state.set("mode",n.DISPLAY)})},addButtonBarEventListeners:function(){this.stopListening(this.buttonBar,r.SUBMIT),this.listenTo(this.buttonBar,r.SUBMIT,function(e){this.form.clearErrors(),this.targetModel=this.model.clone(),this.listenTo(this.targetModel,"all",function(){this.model.trigger.apply(this.model,arguments)}),this.collection.create(this.targetModel,{wait:!0,success:a.bind(function(){e&&e.close&&this.state.set("mode",n.DISPLAY),this.model.reset(),delete this.targetModel},this)})})},handleGroupSelected:function(){var e=(this.state.get("selectedGroupInfo")||{}).userGroupName,t=this.model.get("distinguishedName");e&&t&&""!==e.trim()&&""!==t.trim()?this.addMappingGroupDetails():this.removeMappingGroupDetails()},addMappingGroupDetails:function(){this.buttonBar&&this.buttonBar.remove(),this.mappingGroupDetails&&this.mappingGroupDetails.remove(),this.buttonBar=new s(this.options),this.mappingGroupDetails=new o({settings:this.settings,state:this.state,collection:new t.Collection([this.model])}),this.add(this.mappingGroupDetails),this.add(this.buttonBar),this.addButtonBarEventListeners()},removeMappingGroupDetails:function(){this.buttonBar&&this.buttonBar.remove(),this.mappingGroupDetails&&this.mappingGroupDetails.remove()}})}.apply(t,n),!(void 0!==s&&(e.exports=s))},function(e,t,i){var n,s;n=[i(2),i(352),i(357),i(336)],s=function(e,t,i,n){var s=e._;return e.Form.extend({attributes:{name:"ADD"},title:"Push groups by name",subtitle:function(){return e.tpl("\t        Choose a group in Okta to create \t        it in {{appName}} and have its memberships \t        automatically pushed.")(this.settings.toJSON())},noButtonBar:!0,className:"data-list-inline-form gp-add-ad-mapping-form",initialize:function(){this.addInput({label:"Find group",name:"groupName",input:new t(s.extend({},this.options,{name:"groupName"}))}),this.settings.hasFeature("GROUP_PUSH_ENHANCEMENTS_AD")||this.addInput({label:"SAM Account Name:",type:"text",name:"samAccountName",explain:"Tip: Change this if you use a different naming convention in AD. \t        If you want to link this group to an existing group in Active Directory, \t        make sure the SAM account name and the settings below match.",placeholder:!1}),this.addInput({label:"Push group to the following OU:",name:"distinguishedName",input:new i(s.extend({},this.options,{name:"distinguishedName"}))}),this.settings.hasFeature("GROUP_PUSH_ENHANCEMENTS_AD")||(this.addInput({label:"Group scope:",type:"radio",name:"groupScope",options:n.GroupScopeOptions}),this.addInput({label:"Group type:",type:"radio",name:"groupType",options:n.GroupTypeOptions})),this.listenTo(this.model,"change:userGroupId",function(){if(this.model._changing!==!1){var e=(this.state.get("selectedGroupInfo")||{}).userGroupName;e=e.replace(new RegExp("^[. ]+"),""),e=e.replace(new RegExp("[. ]+$"),""),e=e.replace(/[\:\!\#\$\%\^\{\}\\\~\"\,\/\[\]\@<>\+\=\;\?\*]/g,""),this.model.set("samAccountName",e),this.settings.hasFeature("GROUP_PUSH_ENHANCEMENTS_AD")||this.at(1).render()}})}})}.apply(t,n),!(void 0!==s&&(e.exports=s))},function(e,t,i){var n,s;n=[i(2),i(358)],s=function(e){var t=e._,i=e.$,n=e.internal.views.forms.BaseInput,s='<a id="orgunittree-resizer" class="link-button normal float-n margin-0 rounded-0 rounded-btm-4 center"href="#" >Show more</a>';return n.extend({tagName:"div",className:"ad-ou-tree-wrap",events:{},template:e.tpl("/api/internal/instance/{{instanceId}}/grouppush/outree?rootnode={{rootNode}}"),editMode:function(){return this.$el.addClass(this.className),this._renderTree("enable"),this},readMode:function(){return this._renderTree("disabled"),this},update:function(e){this.model.set(this.options.name,e)},_renderTree:function(e){t.defer(function(t,i){i(t.el).fancytree({checkbox:!0,selectMode:1,source:{url:t.template({instanceId:t.collection.instanceId,rootNode:"root"}),dataType:"json"},debugLevel:0,lazyload:function(e,n){n.result=i.ajax({url:t.template({instanceId:t.collection.instanceId,rootNode:n.node.key}),dataType:"json"})},select:function(e,i){t.update(i.node.key)},dblclick:function(e,t){t.node.toggleSelected()}}),i(t.el).fancytree(e),i(t.el).after(s)},this,i)}})}.apply(t,n),!(void 0!==s&&(e.exports=s))},function(e,t,i){var n,s;n=[i(6),i(24)],s=function(e){!function(e,t,i,n){"use strict";function s(t){t=t||"",e.error("Not implemented: "+t)}function o(t,i){t||(i=i?": "+i:"",e.error("Assertion failed"+i))}function a(e,i){var n,s,o=t.console?t.console[e]:null;if(o)if(o.apply)o.apply(t.console,i);else{for(s="",n=0;n<i.length;n++)s+=i[n];o(s)}}function r(t,i,n,s){var o,a,r,l=e.map(e.trim(t).split("."),function(e){return parseInt(e,10)}),p=e.map(Array.prototype.slice.call(arguments,1),function(e){return parseInt(e,10)});for(o=0;o<p.length;o++)if(a=l[o]||0,r=p[o]||0,a!==r)return a>r;return!0}function l(e,t,i,n,s){var o=function(){var i=t[e],o=n[e],a=t.ext[s],r=function(){return i.apply(t,arguments)};return function(){var e=t._local,i=t._super;try{return t._local=a,t._super=r,o.apply(t,arguments)}finally{t._local=e,t._super=i}}}();return o}function p(t,i,n,s){for(var o in n)"function"==typeof n[o]?"function"==typeof t[o]?t[o]=l(o,t,i,n,s):"_"===o.charAt(0)?t.ext[s][o]=l(o,t,i,n,s):e.error("Could not override tree."+o+". Use prefix '_' to create tree."+s+"._"+o):"options"!==o&&(t.ext[s][o]=n[o])}function d(t,i){return t===n?e.Deferred(function(){this.resolve()}).promise():e.Deferred(function(){this.resolveWith(t,i)}).promise()}function c(t,i){return t===n?e.Deferred(function(){this.reject()}).promise():e.Deferred(function(){this.rejectWith(t,i)}).promise()}function u(e,t){return function(){e.resolveWith(t)}}function h(e){return e=e.toLowerCase(),function(t){return t.title.toLowerCase().indexOf(e)>=0}}function m(t,i){var n,s,a,r;for(this.parent=t,this.tree=t.tree,this.ul=null,this.li=null,this.isStatusNode=!1,this.data={},n=0,s=b.length;n<s;n++)a=b[n],this[a]=i[a];i.data&&e.extend(this.data,i.data);for(a in i)A[a]||e.isFunction(i[a])||w[a]||(this.data[a]=i[a]);null==this.key&&(this.key="_"+_._nextNodeKey++),i.active&&(o(null===this.tree.activeNode,"only one active node allowed"),this.tree.activeNode=this),this.children=null,r=i.children,r&&r.length&&this._setChildren(r)}function f(t){this.widget=t,this.$div=t.element,this.options=t.options,this.ext={},this._id=e.ui.fancytree._nextId++,this._ns=".fancytree-"+this._id,this.activeNode=null,this.focusNode=null,this.lastSelectedNode=null,this.systemFocusElement=null,this.statusClassPropName="span",this.ariaPropName="li",this.nodeContainerAttrName="li",this.$div.find(">ul.fancytree-container").remove();var i,n={tree:this};this.rootNode=new m(n,{title:"root",key:"root_"+this._id,children:null}),this.rootNode.parent=null,i=e("<ul>",{class:"ui-fancytree fancytree-container"}).appendTo(this.$div),this.$container=i,this.rootNode.ul=i[0],null==this.options.debugLevel&&(this.options.debugLevel=_.debugLevel),this.options.tabbable&&this.$container.attr("tabindex","0"),this.options.aria&&this.$container.attr("role","tree").attr("aria-multiselectable",!0)}if(e.ui.fancytree&&e.ui.fancytree.version)return void e.ui.fancytree.warn("Fancytree: ignored duplicate include");var g,_=null,v="active expanded focus folder lazy selected unselectable".split(" "),y={},b="expanded extraClasses folder hideCheckbox key lazy selected title tooltip unselectable".split(" "),A={},w={active:!0,children:!0,data:!0,focus:!0};for(g=0;g<v.length;g++)y[v[g]]=!0;for(g=0;g<b.length;g++)A[b[g]]=!0;m.prototype={_findDirectChild:function(e){var t,i,n=this.children;if(n)if("string"==typeof e){for(t=0,i=n.length;t<i;t++)if(n[t].key===e)return n[t]}else{if("number"==typeof e)return this.children[e];if(e.parent===this)return e}return null},_setChildren:function(e){o(e&&(!this.children||0===this.children.length),"only init supported"),this.children=[];for(var t=0,i=e.length;t<i;t++)this.children.push(new m(this,e[t]))},addChildren:function(t,i){var n,s,a,r=null,l=[];for(e.isPlainObject(t)&&(t=[t]),this.children||(this.children=[]),n=0,s=t.length;n<s;n++)l.push(new m(this,t[n]));return r=l[0],null==i?this.children=this.children.concat(l):(i=this._findDirectChild(i),a=e.inArray(i,this.children),o(a>=0,"insertBefore must be an existing child"),this.children.splice.apply(this.children,[a,0].concat(l))),(!this.parent||this.parent.ul||this.tr)&&this.render(),3===this.tree.options.selectMode&&this.fixSelection3FromEndNodes(),r},addNode:function(e,t){switch(t!==n&&"over"!==t||(t="child"),t){case"after":return this.getParent().addChildren(e,this.getNextSibling());case"before":return this.getParent().addChildren(e,this);case"child":case"over":return this.addChildren(e)}o(!1,"Invalid mode: "+t)},applyPatch:function(t){if(null===t)return this.remove(),d(this);var i,n,s,o={children:!0,expanded:!0,parent:!0};for(i in t)s=t[i],o[i]||e.isFunction(s)||(A[i]?this[i]=s:this.data[i]=s);return t.hasOwnProperty("children")&&(this.removeChildren(),t.children&&this._setChildren(t.children)),this.isVisible()&&(this.renderTitle(),this.renderStatus()),n=t.hasOwnProperty("expanded")?this.setExpanded(t.expanded):d(this)},collapseSiblings:function(){return this.tree._callHook("nodeCollapseSiblings",this)},copyTo:function(e,t,i){return e.addNode(this.toDict(!0,i),t)},countChildren:function(e){var t,i,n,s=this.children;if(!s)return 0;if(n=s.length,e!==!1)for(t=0,i=n;t<i;t++)n+=s[t].countChildren();return n},debug:function(e){this.tree.options.debugLevel>=2&&(Array.prototype.unshift.call(arguments,this.toString()),a("debug",arguments))},discard:function(){if(this.lazy&&e.isArray(this.children))return this.removeChildren(),this.setExpanded(!1)},findAll:function(t){t=e.isFunction(t)?t:h(t);var i=[];return this.visit(function(e){t(e)&&i.push(e)}),i},findFirst:function(t){t=e.isFunction(t)?t:h(t);var i=null;return this.visit(function(e){if(t(e))return i=e,!1}),i},_changeSelectStatusAttrs:function(e){var t=!1;switch(e){case!1:t=this.selected||this.partsel,this.selected=!1,this.partsel=!1;break;case!0:t=!this.selected||!this.partsel,this.selected=!0,this.partsel=!0;break;case n:t=this.selected||!this.partsel,this.selected=!1,this.partsel=!0;break;default:o(!1,"invalid state: "+e)}return this.debug("fixSelection3AfterLoad() _changeSelectStatusAttrs()",e,t),t&&this.renderStatus(),t},fixSelection3AfterClick:function(){var e=this.isSelected();this.visit(function(t){t._changeSelectStatusAttrs(e)}),this.fixSelection3FromEndNodes()},fixSelection3FromEndNodes:function(){function e(t){var i,s,o,a,r,l,p,d=t.children;if(d){for(l=!0,p=!1,i=0,s=d.length;i<s;i++)o=d[i],a=e(o),a!==!1&&(p=!0),a!==!0&&(l=!1);r=!!l||!!p&&n}else r=!!t.selected;return t._changeSelectStatusAttrs(r),r}o(3===this.tree.options.selectMode,"expected selectMode 3"),e(this),this.visitParents(function(e){var t,i,s,o,a=e.children,r=!0,l=!1;for(t=0,i=a.length;t<i;t++)s=a[t],(s.selected||s.partsel)&&(l=!0),s.unselectable||s.selected||(r=!1);o=!!r||!!l&&n,e._changeSelectStatusAttrs(o)})},fromDict:function(t){for(var i in t)A[i]?this[i]=t[i]:"data"===i?e.extend(this.data,t.data):e.isFunction(t[i])||w[i]||(this.data[i]=t[i]);t.children?(this.removeChildren(),this.addChildren(t.children)):this.renderTitle()},getChildren:function(){return this.hasChildren()===n?n:this.children},getFirstChild:function(){return this.children?this.children[0]:null},getIndex:function(){return e.inArray(this,this.parent.children)},getIndexHier:function(t){t=t||".";var i=[];return e.each(this.getParentList(!1,!0),function(e,t){i.push(t.getIndex()+1)}),i.join(t)},getKeyPath:function(e){var t=[],i=this.tree.options.keyPathSeparator;return this.visitParents(function(e){e.parent&&t.unshift(e.key)},!e),i+t.join(i)},getLastChild:function(){return this.children?this.children[this.children.length-1]:null},getLevel:function(){for(var e=0,t=this.parent;t;)e++,t=t.parent;return e},getNextSibling:function(){if(this.parent){var e,t,i=this.parent.children;for(e=0,t=i.length-1;e<t;e++)if(i[e]===this)return i[e+1]}return null},getParent:function(){return this.parent},getParentList:function(e,t){for(var i=[],n=t?this:this.parent;n;)(e||n.parent)&&i.unshift(n),n=n.parent;return i},getPrevSibling:function(){if(this.parent){var e,t,i=this.parent.children;for(e=1,t=i.length;e<t;e++)if(i[e]===this)return i[e-1]}return null},hasChildren:function(){return this.lazy?null==this.children?n:0!==this.children.length&&(1!==this.children.length||!this.children[0].isStatusNode||n):!!this.children},hasFocus:function(){return this.tree.hasFocus()&&this.tree.focusNode===this},isActive:function(){return this.tree.activeNode===this},isChildOf:function(e){return this.parent&&this.parent===e},isDescendantOf:function(e){if(!e||e.tree!==this.tree)return!1;for(var t=this.parent;t;){if(t===e)return!0;t=t.parent}return!1},isExpanded:function(){return!!this.expanded},isFirstSibling:function(){var e=this.parent;return!e||e.children[0]===this},isFolder:function(){return!!this.folder},isLastSibling:function(){var e=this.parent;return!e||e.children[e.children.length-1]===this},isLazy:function(){return!!this.lazy},isLoading:function(){s()},isRoot:function(){return this.tree.rootNode===this},isSelected:function(){return!!this.selected},isVisible:function(){var e,t,i=this.getParentList(!1,!1);for(e=0,t=i.length;e<t;e++)if(!i[e].expanded)return!1;return!0},makeVisible:function(){var e,t,i=this.getParentList(!1,!1);for(e=0,t=i.length;e<t;e++)i[e].setExpanded(!0)},moveTo:function(t,i,s){i!==n&&"over"!==i||(i="child");var a,r=this.parent,l="child"===i?t:t.parent;if(this!==t){if(!this.parent)throw"Cannot move system root";if(l.isDescendantOf(this))throw"Cannot move a node to it's own descendant";if(1===this.parent.children.length?(this.parent.children=this.parent.lazy?[]:null,this.parent.expanded=!1):(a=e.inArray(this,this.parent.children),o(a>=0),this.parent.children.splice(a,1)),this.parent=l,l.hasChildren())switch(i){case"child":l.children.push(this);break;case"before":a=e.inArray(t,l.children),o(a>=0),l.children.splice(a,0,this);break;case"after":a=e.inArray(t,l.children),o(a>=0),l.children.splice(a+1,0,this);break;default:throw"Invalid mode "+i}else l.children=[this];s&&t.visit(s,!0),this.tree!==t.tree&&(this.warn("Cross-tree moveTo is experimantal!"),this.visit(function(e){e.tree=t.tree},!0)),l.expanded||r.ul.removeChild(this.li),r.isDescendantOf(l)||r.render(),l.isDescendantOf(r)||l===r||l.render()}},lazyLoad:function(t){(t||this.hasChildren()===n)&&this.discard(),o(!e.isArray(this.children));var i=this.tree._triggerNodeEvent("lazyload",this);return o("boolean"!=typeof i,"lazyload event must return source in data.result"),this.tree._callHook("nodeLoadChildren",this,i)},render:function(e,t){return this.tree._callHook("nodeRender",this,e,t)},renderTitle:function(){return this.tree._callHook("nodeRenderTitle",this)},renderStatus:function(){return this.tree._callHook("nodeRenderStatus",this)},remove:function(){return this.parent.removeChild(this)},removeChild:function(e){return this.tree._callHook("nodeRemoveChild",this,e)},removeChildren:function(){return this.tree._callHook("nodeRemoveChildren",this)},scheduleAction:function(e,t){this.tree.timer&&clearTimeout(this.tree.timer),this.tree.timer=null;var i=this;switch(e){case"cancel":break;case"expand":this.tree.timer=setTimeout(function(){i.tree.debug("setTimeout: trigger expand"),i.setExpanded(!0)},t);break;case"activate":this.tree.timer=setTimeout(function(){i.tree.debug("setTimeout: trigger activate"),i.setActive(!0)},t);break;default:throw"Invalid mode "+e}},scrollIntoView:function(t,i){t=t===!0?{duration:200,queue:!1}:t;var n,s=new e.Deferred,o=e(this.span).position().top,a=e(this.span).height(),r=this.tree.$container,l=r[0].scrollTop,p=Math.max(0,r.innerHeight()-r[0].clientHeight),d=r.height()-p,c=null;return o<0?c=l+o:o+a>d&&(c=l+o-d+a,i&&(n=i?e(i.span).position().top:0,o-n>d&&(c=l+o))),null!==c?t?r.animate({scrollTop:c},t):(r[0].scrollTop=c,s.resolveWith(this)):s.resolveWith(this),s.promise()},setActive:function(e){return this.tree._callHook("nodeSetActive",this,e)},setExpanded:function(e){return this.tree._callHook("nodeSetExpanded",this,e)},setFocus:function(e){return this.tree._callHook("nodeSetFocus",this,e)},setSelected:function(e){return this.tree._callHook("nodeSetSelected",this,e)},setTitle:function(e){this.title=e,this.renderTitle()},sortChildren:function(e,t){var i,n,s=this.children;if(s){if(e=e||function(e,t){var i=e.title.toLowerCase(),n=t.title.toLowerCase();return i===n?0:i>n?1:-1},s.sort(e),t)for(i=0,n=s.length;i<n;i++)s[i].children&&s[i].sortChildren(e,"$norender$");"$norender$"!==t&&this.render()}},toDict:function(t,i){var n,s,o,a={},r=this;if(e.each(b,function(e,t){(r[t]||r[t]===!1)&&(a[t]=r[t])}),e.isEmptyObject(this.data)||(a.data=e.extend({},this.data),e.isEmptyObject(a.data)&&delete a.data),i&&i(a),t&&this.hasChildren())for(a.children=[],n=0,s=this.children.length;n<s;n++)o=this.children[n],o.isStatusNode||a.children.push(o.toDict(!0,i));return a},toggleExpanded:function(){return this.tree._callHook("nodeToggleExpanded",this)},toggleSelected:function(){return this.tree._callHook("nodeToggleSelected",this)},toString:function(){return"<FancytreeNode(#"+this.key+", '"+this.title+"')>"},visit:function(e,t){var i,n,s=!0,o=this.children;if(t===!0&&(s=e(this),s===!1||"skip"===s))return s;if(o)for(i=0,n=o.length;i<n&&(s=o[i].visit(e,!0),s!==!1);i++);return s},visitParents:function(e,t){if(t&&e(this)===!1)return!1;for(var i=this.parent;i;){if(e(i)===!1)return!1;i=i.parent}return!0},warn:function(e){Array.prototype.unshift.call(arguments,this.toString()),a("warn",arguments)}},f.prototype={_makeHookContext:function(t,i,s){var o,a;return t.node!==n?(i&&t.originalEvent!==i&&e.error("invalid args"),o=t):t.tree?(a=t.tree,o={node:t,tree:a,widget:a.widget,options:a.widget.options,originalEvent:i}):t.widget?o={node:null,tree:t,widget:t.widget,options:t.widget.options,originalEvent:i}:e.error("invalid args"),s&&e.extend(o,s),o},_callHook:function(t,i,n){var s=this._makeHookContext(i),o=this[t],a=Array.prototype.slice.call(arguments,2);return e.isFunction(o)||e.error("_callHook('"+t+"') is not a function"),a.unshift(s),o.apply(this,a)},activateKey:function(e){var t=this.getNodeByKey(e);return t?t.setActive():this.activeNode&&this.activeNode.setActive(!1),t},applyPatch:function(t){var i,n,s,a,r,l,p=t.length,d=[];for(n=0;n<p;n++)s=t[n],o(2===s.length,"patchList must be an array of length-2-arrays"),a=s[0],r=s[1],l=null===a?this.rootNode:this.getNodeByKey(a),l?(i=new e.Deferred,d.push(i),l.applyPatch(r).always(u(i,l))):this.warn("could not find node with key '"+a+"'");return e.when.apply(e,d).promise()},count:function(){return this.rootNode.countChildren()},debug:function(e){this.options.debugLevel>=2&&(Array.prototype.unshift.call(arguments,this.toString()),a("debug",arguments))},generateFormElements:function(t,i){var n,s=t!==!1?"ft_"+this._id:t,o=i!==!1?"ft_"+this._id+"_active":i,a="fancytree_result_"+this._id,r=this.$container.find("div#"+a);r.length?r.empty():r=e("<div>",{id:a}).hide().appendTo(this.$container),s&&(n=this.getSelectedNodes(3===this.options.selectMode),e.each(n,function(t,i){r.append(e("<input>",{type:"checkbox",name:s,value:i.key,checked:!0}))})),o&&this.activeNode&&r.append(e("<input>",{type:"radio",name:o,value:this.activeNode.key,checked:!0}))},getActiveNode:function(){return this.activeNode},getFirstChild:function(){return this.rootNode.getFirstChild()},getFocusNode:function(e){return this.focusNode},getNodeByKey:function(e,t){var n,s;return!t&&(n=i.getElementById(this.options.idPrefix+e))?n.ftnode?n.ftnode:null:(t=t||this.rootNode,s=null,t.visit(function(t){if(t.key===e)return s=t,!1},!0),s)},getSelectedNodes:function(e){var t=[];return this.rootNode.visit(function(i){if(i.selected&&(t.push(i),e===!0))return"skip"}),t},hasFocus:function(){return _.focusTree===this},info:function(e){this.options.debugLevel>=1&&(Array.prototype.unshift.call(arguments,this.toString()),a("info",arguments))},loadKeyPath:function(t,i,s){function o(e,t,n){i.call(_,t,"loading"),t.lazyLoad().done(function(){_.loadKeyPath.call(_,c[e],i,t).always(u(n,_))}).fail(function(s){_.warn("loadKeyPath: error loading: "+e+" (parent: "+f+")"),i.call(_,t,"error"),n.reject()})}var a,r,l,p,d,c,h,m,f=s||this.rootNode,g=this.options.keyPathSeparator,_=this;for(e.isArray(t)||(t=[t]),c={},l=0;l<t.length;l++)for(p=t[l],p.charAt(0)===g&&(p=p.substr(1)),m=p.split(g);m.length;){if(d=m.shift(),h=f._findDirectChild(d),!h){this.warn("loadKeyPath: key not found: "+d+" (parent: "+f+")"),i.call(this,d,"error");break}if(0===m.length){i.call(this,h,"ok");break}if(h.lazy&&h.hasChildren()===n){i.call(this,h,"loaded"),c[d]?c[d].push(m.join(g)):c[d]=[m.join(g)];break}i.call(this,h,"loaded"),
f=h}a=[];for(d in c)h=f._findDirectChild(d),r=new e.Deferred,a.push(r),o(d,h,r);return e.when.apply(e,a).promise()},nodeClick:function(e){var t,i,n=e.originalEvent,s=e.targetType,o=e.node;if("expander"===s)this._callHook("nodeToggleExpanded",e);else if("checkbox"===s)this._callHook("nodeToggleSelected",e),this._callHook("nodeSetFocus",e,!0);else{if(i=!1,t=!0,o.folder)switch(e.options.clickFolderMode){case 2:i=!0,t=!1;break;case 3:t=!0,i=!0}t&&(this.nodeSetFocus(e),this._callHook("nodeSetActive",e,!0)),i&&this._callHook("nodeToggleExpanded",e)}"a"===n.target.localName&&"fancytree-title"===n.target.className&&n.preventDefault()},nodeCollapseSiblings:function(e){var t,i,n,s=e.node;if(s.parent)for(t=s.parent.children,i=0,n=t.length;i<n;i++)t[i]!==s&&t[i].expanded&&this._callHook("nodeSetExpanded",t[i],!1)},nodeDblclick:function(e){"title"===e.targetType&&4===e.options.clickFolderMode&&this._callHook("nodeToggleExpanded",e),"title"===e.targetType&&e.originalEvent.preventDefault()},nodeKeydown:function(t){function i(e){if(e)return e.makeVisible(),o.ctrlKey||!l.autoActivate?e.setFocus():e.setActive()}var n,s,o=t.originalEvent,a=t.node,r=t.tree,l=t.options,p=!0,d=e.ui.keyCode,c=null;switch(a||(this.rootNode.getFirstChild().setFocus(),a=t.node=this.focusNode,a.debug("Keydown force focus on first node")),o.which){case d.NUMPAD_ADD:case 187:r.nodeSetExpanded(t,!0);break;case d.NUMPAD_SUBTRACT:case 189:r.nodeSetExpanded(t,!1);break;case d.SPACE:l.checkbox?r.nodeToggleSelected(t):r.nodeSetActive(t,!0);break;case d.ENTER:r.nodeSetActive(t,!0);break;case d.BACKSPACE:i(a.parent);break;case d.LEFT:a.expanded?(r.nodeSetExpanded(t,!1),i(a)):a.parent&&a.parent.parent&&i(a.parent);break;case d.RIGHT:a.expanded||!a.children&&!a.lazy?a.children&&a.children.length&&i(a.children[0]):(r.nodeSetExpanded(t,!0),i(a));break;case d.UP:for(c=a.getPrevSibling();c&&c.expanded&&c.children&&c.children.length;)c=c.children[c.children.length-1];!c&&a.parent&&a.parent.parent&&(c=a.parent),i(c);break;case d.DOWN:if(a.expanded&&a.children&&a.children.length)c=a.children[0];else for(s=a.getParentList(!1,!0),n=s.length-1;n>=0&&!(c=s[n].getNextSibling());n--);i(c);break;default:p=!1}p&&o.preventDefault()},nodeLoadChildren:function(t,i){var n,s,a=t.tree,r=t.node;return e.isFunction(i)&&(i=i()),i.url&&(n=e.extend({},t.options.ajax,i),n.debugDelay?(s=n.debugDelay,e.isArray(s)&&(s=s[0]+Math.random()*(s[1]-s[0])),r.debug("nodeLoadChildren waiting debug delay "+Math.round(s)+"ms"),n.debugDelay=!1,i=e.Deferred(function(t){setTimeout(function(){e.ajax(n).done(function(){t.resolveWith(this,arguments)}).fail(function(){t.rejectWith(this,arguments)})},s)})):i=e.ajax(n),i=i.then(function(i,n,s){var o;return"string"==typeof i&&e.error("Ajax request returned a string (did you get the JSON dataType wrong?)."),t.options.postProcess?(o=a._triggerNodeEvent("postProcess",t,t.originalEvent,{response:i,dataType:this.dataType}),i=e.isArray(o)?o:i):i&&i.hasOwnProperty("d")&&t.options.enableAspx&&(i="string"==typeof i.d?e.parseJSON(i.d):i.d),i},function(e,t,i){return a._makeHookContext(r,null,{error:e,args:Array.prototype.slice.call(arguments),message:i,details:e.status+": "+i})})),e.isFunction(i.promise)&&(a.nodeSetStatus(t,"loading"),i.done(function(){a.nodeSetStatus(t,"ok")}).fail(function(e){var i;i=e.node&&e.error&&e.message?e:a._makeHookContext(r,null,{error:e,args:Array.prototype.slice.call(arguments),message:e?e.message||e.toString():""}),a._triggerNodeEvent("loaderror",i,null),a.nodeSetStatus(t,"error",i.message,i.details)})),e.when(i).done(function(t){o(e.isArray(t),"expected array of children"),r._setChildren(t),r.parent&&a._triggerNodeEvent("loadChildren",r)})},nodeLoadKeyPath:function(e,t){},nodeMakeVisible:function(e){var t,i,n=e.node.getParentList(!1,!1);for(t=0,i=n.length;t<i;t++)n[t].setExpanded(!0)},nodeRemoveChild:function(t,i){var n,s=t.node,a=t.options,r=e.extend({},t,{node:i}),l=s.children;return _.debug("nodeRemoveChild()",s.toString(),i.toString()),1===l.length?(o(i===l[0]),this.nodeRemoveChildren(t)):(this.activeNode&&(i===this.activeNode||this.activeNode.isDescendantOf(i))&&this.activeNode.setActive(!1),this.focusNode&&(i===this.focusNode||this.focusNode.isDescendantOf(i))&&(this.focusNode=null),this.nodeRemoveMarkup(r),this.nodeRemoveChildren(r),n=e.inArray(i,l),o(n>=0),i.visit(function(e){e.parent=null},!0),a.removeNode&&a.removeNode.call(t.tree,{type:"removeNode"},r),void l.splice(n,1))},nodeRemoveChildMarkup:function(t){var i=t.node;_.debug("nodeRemoveChildMarkup()",i.toString()),i.ul&&(e(i.ul).remove(),i.visit(function(e){e.li=e.ul=null}),i.ul=null)},nodeRemoveChildren:function(t){var i,s=t.node,o=s.children,a=t.options;_.debug("nodeRemoveChildren()",s.toString()),o&&(this.activeNode&&this.activeNode.isDescendantOf(s)&&this.activeNode.setActive(!1),this.focusNode&&this.focusNode.isDescendantOf(s)&&(this.focusNode=null),this.nodeRemoveChildMarkup(t),i=e.extend({},t),s.visit(function(e){e.parent=null,a.removeNode&&(i.node=e,a.removeNode.call(t.tree,{type:"removeNode"},i))}),s.children=n,this.nodeRenderStatus(t))},nodeRemoveMarkup:function(t){var i=t.node;_.debug("nodeRemoveMarkup()",i.toString()),i.li&&(e(i.li).remove(),i.li=null),this.nodeRemoveChildMarkup(t)},nodeRender:function(t,n,s,a,r){var l,p,d,c,u,h,m=t.node,f=t.tree,g=t.options,_=g.aria,v=!1,y=m.parent,b=!y,A=m.children;if(o(b||y.ul,"parent UL must exist"),b||(m.li&&(n||m.li.parentNode!==m.parent.ul)&&(m.li.parentNode!==m.parent.ul&&this.warn("unlink "+m+" (must be child of "+m.parent+")"),this.nodeRemoveMarkup(t)),m.li||(v=!0,m.li=i.createElement("li"),m.li.ftnode=m,m.key&&g.generateIds&&(m.li.id=g.idPrefix+m.key),m.span=i.createElement("span"),m.span.className="fancytree-node",_&&e(m.span).attr("aria-labelledby","ftal_"+m.key),m.li.appendChild(m.span),this.nodeRenderTitle(t),g.createNode&&g.createNode.call(f,{type:"createNode"},t)),g.renderNode&&g.renderNode.call(f,{type:"renderNode"},t)),A){if(b||m.expanded||s===!0){for(m.ul||(m.ul=i.createElement("ul"),(a!==!0||r)&&m.expanded||(m.ul.style.display="none"),_&&e(m.ul).attr("role","group"),m.li.appendChild(m.ul)),c=0,u=A.length;c<u;c++)h=e.extend({},t,{node:A[c]}),this.nodeRender(h,n,s,!1,!0);for(l=m.ul.firstChild,c=0,u=A.length-1;c<u;c++)p=A[c],d=l.ftnode,p!==d?(m.debug("_fixOrder: mismatch at index "+c+": "+p+" != "+d),m.ul.insertBefore(p.li,d.li)):l=l.nextSibling}}else m.ul&&(this.warn("remove child markup for "+m),this.nodeRemoveChildMarkup(t));b||(this.nodeRenderStatus(t),v&&y.ul.appendChild(m.li))},nodeRenderTitle:function(e,t){var i,s,o,a,r,l=e.node,p=e.tree,d=e.options,c=d.aria,u=l.getLevel(),h=[],m=l.data.icon;t!==n&&(l.title=t),l.span&&(u<d.minExpandLevel?u>1&&c&&h.push("<span role='button' class='fancytree-expander'></span>"):c&&h.push("<span role='button' class='fancytree-expander'></span>"),d.checkbox&&l.hideCheckbox!==!0&&!l.isStatusNode&&(c?h.push("<span role='checkbox' class='fancytree-checkbox'></span>"):h.push("<span class='fancytree-checkbox'></span>")),a=c?" role='img'":"",m&&"string"==typeof m?(s="/"===m.charAt(0)?m:d.imagePath+m,h.push("<img src='"+s+"' alt='' />")):l.data.iconclass?h.push("<span "+a+" class='fancytree-custom-icon "+l.data.iconclass+"'></span>"):m===!0||m!==!1&&d.icons!==!1?h.push("<span "+a+" class='fancytree-icon fancytree-expander'></span>"):h.push("<span "+a+" class='fancytree-icon fancytree-expander12'></span>"),o="",d.renderTitle&&(o=d.renderTitle.call(p,{type:"renderTitle"},e)||""),o||(r=l.tooltip?" title='"+l.tooltip.replace(/\"/g,"&quot;")+"'":"",i=c?" id='ftal_"+l.key+"'":"",a=c?" role='treeitem'":"",o="<span "+a+" class='fancytree-title'"+i+r+">"+l.title+"</span>"),h.push(o),l.span.innerHTML=h.join(""))},nodeRenderStatus:function(t){var i=t.node,n=t.tree,s=t.options,o=i.hasChildren(),a=i.isLastSibling(),r=s.aria,l=e(i.span).find(".fancytree-title"),p=s._classNames,d=[],c=i[n.statusClassPropName];c&&(d.push(p.node),n.activeNode===i&&d.push(p.active),n.focusNode===i?(d.push(p.focused),r&&l.attr("aria-activedescendant",!0)):r&&l.removeAttr("aria-activedescendant"),i.expanded?(d.push(p.expanded),r&&l.attr("aria-expanded",!0)):r&&l.removeAttr("aria-expanded"),i.folder&&d.push(p.folder),o!==!1&&d.push(p.hasChildren),a&&d.push(p.lastsib),i.lazy&&null==i.children&&d.push(p.lazy),i.partsel&&d.push(p.partsel),i.selected?(d.push(p.selected),r&&l.attr("aria-selected",!0)):r&&l.attr("aria-selected",!1),i.extraClasses&&d.push(i.extraClasses),o===!1?d.push(p.combinedExpanderPrefix+"n"+(a?"l":"")):d.push(p.combinedExpanderPrefix+(i.expanded?"e":"c")+(i.lazy&&null==i.children?"d":"")+(a?"l":"")),d.push(p.combinedIconPrefix+(i.expanded?"e":"c")+(i.folder?"f":"")),c.className=d.join(" "),i.li&&(i.li.className=a?p.lastsib:""))},nodeSetActive:function(t,i){var n,s=t.node,a=t.tree,r=t.options,l=s===a.activeNode;return i=i!==!1,s.debug("nodeSetActive",i),l===i?d(s):i&&this._triggerNodeEvent("beforeActivate",s,t.originalEvent)===!1?c(s,["rejected"]):void(i?(a.activeNode&&(o(a.activeNode!==s,"node was active (inconsistency)"),n=e.extend({},t,{node:a.activeNode}),a.nodeSetActive(n,!1),o(null===a.activeNode,"deactivate was out of sync?")),r.activeVisible&&a.nodeMakeVisible(t),a.activeNode=s,a.nodeRenderStatus(t),a.nodeSetFocus(t),a._triggerNodeEvent("activate",s)):(o(a.activeNode===s,"node was not active (inconsistency)"),a.activeNode=null,this.nodeRenderStatus(t),t.tree._triggerNodeEvent("deactivate",s)))},nodeSetExpanded:function(t,i){var s,o,a,r,l,p,u=t.node,h=t.tree,m=t.options;if(i=i!==!1,u.debug("nodeSetExpanded("+i+")"),u.expanded&&i||!u.expanded&&!i)return u.debug("nodeSetExpanded("+i+"): nothing to do"),d(u);if(i&&!u.lazy&&!u.hasChildren())return c(u,["empty"]);if(!i&&u.getLevel()<m.minExpandLevel)return c(u,["locked"]);if(this._triggerNodeEvent("beforeExpand",u,t.originalEvent)===!1)return c(u,["rejected"]);if(o=new e.Deferred,i&&!u.expanded&&m.autoCollapse){l=u.getParentList(!1,!0),p=m.autoCollapse;try{for(m.autoCollapse=!1,a=0,r=l.length;a<r;a++)this._callHook("nodeCollapseSiblings",l[a])}finally{m.autoCollapse=p}}return o.done(function(){t.tree._triggerNodeEvent(i?"expand":"collapse",t),m.autoScroll&&u.getLastChild().scrollIntoView(!0,u)}),s=function(n){var s,o,a,r;if(u.expanded=i,h._callHook("nodeRender",t,!1,!1,!0),u.ul)if(a="none"!==u.ul.style.display,r=!!u.expanded,a===r)u.warn("nodeSetExpanded: UL.style.display already set");else{if(m.fx)return s=m.fx.duration||200,o=m.fx.easing,u.debug("nodeSetExpanded: animate start..."),void e(u.ul).animate(m.fx,s,o,function(){u.debug("nodeSetExpanded: animate done"),n()});u.ul.style.display=u.expanded||!parent?"":"none"}n()},i&&u.lazy&&u.hasChildren()===n?(u.debug("nodeSetExpanded: load start..."),u.lazyLoad().done(function(){u.debug("nodeSetExpanded: load done"),o.notifyWith&&o.notifyWith(u,["loaded"]),s(function(){o.resolveWith(u)})}).fail(function(e){s(function(){o.rejectWith(u,["load failed ("+e+")"])})})):s(function(){o.resolveWith(u)}),u.debug("nodeSetExpanded: returns"),o.promise()},nodeSetFocus:function(t,i){t.node.debug("nodeSetFocus("+i+")");var n,s=t.tree,o=t.node;if(i=i!==!1,s.focusNode){if(s.focusNode===o&&i)return void o.debug("nodeSetFocus("+i+"): nothing to do");n=e.extend({},t,{node:s.focusNode}),s.focusNode=null,this._triggerNodeEvent("blur",n),this._callHook("nodeRenderStatus",n)}i&&(_.focusTree!==s&&(o.debug("nodeSetFocus: forcing container focus"),this._callHook("treeSetFocus",t,!0,!0)),this.nodeMakeVisible(t),s.focusNode=o,this._triggerNodeEvent("focus",t),t.options.autoScroll&&o.scrollIntoView(),this._callHook("nodeRenderStatus",t))},nodeSetSelected:function(e,t){var i=e.node,n=e.tree,s=e.options;if(t=t!==!1,i.debug("nodeSetSelected("+t+")",e),!i.unselectable){if(i.selected&&t||!i.selected&&!t)return!!i.selected;if(this._triggerNodeEvent("beforeSelect",i,e.originalEvent)===!1)return!!i.selected;t&&1===s.selectMode?n.lastSelectedNode&&n.lastSelectedNode.setSelected(!1):3===s.selectMode&&(i.selected=t,i.fixSelection3AfterClick()),i.selected=t,this.nodeRenderStatus(e),n.lastSelectedNode=t?i:null,n._triggerNodeEvent("select",e)}},nodeSetStatus:function(t,i,n,s){var o,a,r=t.node,l=t.tree,p=t.options._classNames;switch(o=function(){var e=r.children?r.children[0]:null;if(e&&e.isStatusNode){try{r.ul&&(r.ul.removeChild(e.li),e.li=null)}catch(e){}1===r.children.length?r.children=[]:r.children.shift()}},a=function(t){var i=r.children?r.children[0]:null;return i&&i.isStatusNode?(e.extend(i,t),l._callHook("nodeRender",i)):(t.key="_statusNode",r._setChildren([t]),r.children[0].isStatusNode=!0,l.render()),r.children[0]},i){case"ok":o(),e(r.span).removeClass(p.loading),e(r.span).removeClass(p.error);break;case"loading":e(r.span).removeClass(p.error),e(r.span).addClass(p.loading),r.parent||a({title:l.options.strings.loading+(n?" ("+n+") ":""),tooltip:s,extraClasses:"fancytree-statusnode-wait"});break;case"error":e(r.span).removeClass(p.loading),e(r.span).addClass(p.error),a({title:l.options.strings.loadError+(n?" ("+n+") ":""),tooltip:s,extraClasses:"fancytree-statusnode-error"});break;default:e.error("invalid status "+i)}},nodeToggleExpanded:function(e){return this.nodeSetExpanded(e,!e.node.expanded)},nodeToggleSelected:function(e){return this.nodeSetSelected(e,!e.node.selected)},treeClear:function(e){var t=e.tree;t.activeNode=null,t.focusNode=null,t.$div.find(">ul.fancytree-container").empty(),t.rootNode.children=null},treeCreate:function(e){},treeDestroy:function(e){},treeInit:function(e){this.treeLoad(e)},treeLoad:function(t,i){var n,o,a,r=t.tree,l=t.widget.element,p=e.extend({},t,{node:this.rootNode});if(r.rootNode.children&&this.treeClear(t),i=i||this.options.source)"string"==typeof i&&s();else switch(n=l.data("type")||"html"){case"html":o=l.find(">ul:first"),o.addClass("ui-fancytree-source ui-helper-hidden"),i=e.ui.fancytree.parseHtml(o);break;case"json":i=e.parseJSON(l.text()),i.children&&(i.title&&(r.title=i.title),i=i.children);break;default:e.error("Invalid data-type: "+n)}return a=this.nodeLoadChildren(p,i).done(function(){r.render(),3===t.options.selectMode&&r.rootNode.fixSelection3FromEndNodes(),r._triggerTreeEvent("init",!0)}).fail(function(){r.render(),r._triggerTreeEvent("init",!1)})},treeOnFocusInOut:function(t){var i="focusin"===t.type,n=e.ui.fancytree.getNode(t);try{this.debug("treeOnFocusInOut("+i+"), node=",n),o(!this._inFocusHandler,"Focus handler recursion"),this.systemFocusElement=i?t.target:null,this._inFocusHandler=!0,n?this._callHook("nodeSetFocus",n,i):this._callHook("treeSetFocus",this,i)}finally{this._inFocusHandler=!1}},treeSetFocus:function(e,t,i){t=t!==!1,this.debug("treeSetFocus("+t+"), _calledByNodeSetFocus: "+i),this.debug("    focusNode: "+this.focusNode),this.debug("    activeNode: "+this.activeNode),_.focusTree&&(this===_.focusTree&&t||(_.focusTree.focusNode&&_.focusTree.focusNode.setFocus(!1),_.focusTree.$container.removeClass("fancytree-treefocus"),this._triggerTreeEvent("blurTree"),_.focusTree=null)),t&&_.focusTree!==this?(_.focusTree=this,this.$container.addClass("fancytree-treefocus"),this.systemFocusElement||(this.debug("Set `:focus` to container"),this.$container.focus()),this.focusNode||i||(this.activeNode?this.activeNode.setFocus():this.rootNode.hasChildren()&&this.warn("NOT setting focus to first child")),this._triggerTreeEvent("focusTree")):_.focusTree=null},reactivate:function(e){var t=this.activeNode;t&&(this.activeNode=null,t.setActive(),e&&t.setFocus())},reload:function(e){return this._callHook("treeClear",this),this._callHook("treeLoad",this,e)},render:function(e,t){return this.rootNode.render(e,t)},setFocus:function(e){return this._callHook("treeSetFocus",this,e)},toDict:function(e,t){var i=this.rootNode.toDict(!0,t);return e?i:i.children},toString:function(){return"<Fancytree(#"+this._id+")>"},_triggerNodeEvent:function(e,t,i,s){var o=this._makeHookContext(t,i,s),a=this.widget._trigger(e,i,o);return a!==!1&&o.result!==n?o.result:a},_triggerTreeEvent:function(e,t){var i=this._makeHookContext(this,t),s=this.widget._trigger(e,t,i);return s!==!1&&i.result!==n?i.result:s},visit:function(e){return this.rootNode.visit(e,!1)},warn:function(e){Array.prototype.unshift.call(arguments,this.toString()),a("warn",arguments)}},e.widget("ui.fancytree",{options:{activeVisible:!0,ajax:{type:"GET",cache:!1,dataType:"json"},aria:!1,autoActivate:!0,autoCollapse:!1,autoScroll:!1,checkbox:!1,clickFolderMode:4,debugLevel:null,disabled:!1,enableAspx:!0,extensions:[],fx:{height:"toggle",duration:200},generateIds:!1,icons:!0,idPrefix:"ft_",keyboard:!0,keyPathSeparator:"/",minExpandLevel:1,selectMode:2,strings:{loading:"Loading&#8230;",loadError:"Load error!"},tabbable:!0,_classNames:{node:"fancytree-node",folder:"fancytree-folder",combinedExpanderPrefix:"fancytree-exp-",combinedIconPrefix:"fancytree-ico-",hasChildren:"fancytree-has-children",active:"fancytree-active",selected:"fancytree-selected",expanded:"fancytree-expanded",lazy:"fancytree-lazy",focused:"fancytree-focused",partsel:"fancytree-partsel",lastsib:"fancytree-lastsib",loading:"fancytree-loading",error:"fancytree-error"},lazyload:null,postProcess:null},_create:function(){this.tree=new f(this),this.$source=this.source||"json"===this.element.data("type")?this.element:this.element.find(">ul:first");var t,i,s,a=this.options.extensions,r=this.tree;for(s=0;s<a.length;s++)i=a[s],t=e.ui.fancytree._extensions[i],t||e.error("Could not apply extension '"+i+"' (it is not registered, did you forget to include it?)"),this.tree.options[i]=e.extend(!0,{},t.options,this.tree.options[i]),o(this.tree.ext[i]===n,"Extension name must not exist as Fancytree.ext attribute: '"+i+"'"),this.tree.ext[i]={},p(this.tree,r,t,i),r=t;this.tree._callHook("treeCreate",this.tree)},_init:function(){this.tree._callHook("treeInit",this.tree),this._bind()},_setOption:function(t,i){var n=!0,s=!1;switch(t){case"aria":case"checkbox":case"icons":case"minExpandLevel":case"tabbable":this.tree._callHook("treeCreate",this.tree),s=!0;break;case"source":n=!1,this.tree._callHook("treeLoad",this.tree,i)}this.tree.debug("set option "+t+"="+i+" <"+typeof i+">"),n&&e.Widget.prototype._setOption.apply(this,arguments),s&&this.tree.render(!0,!1)},destroy:function(){this._unbind(),this.tree._callHook("treeDestroy",this.tree),this.tree.$div.find(">ul.fancytree-container").remove(),this.$source&&this.$source.removeClass("ui-helper-hidden"),e.Widget.prototype.destroy.call(this)},_unbind:function(){var t=this.tree._ns;this.element.unbind(t),this.tree.$container.unbind(t),e(i).unbind(t)},_bind:function(){var t=this,n=this.options,s=this.tree,o=s._ns,a=e.support.selectstart?"selectstart":"mousedown";this._unbind(),s.debug("bind events; container: ",s.$container),s.$container.bind("focusin"+o+" focusout"+o,function(e){s.debug("Tree container got event "+e.type),s.treeOnFocusInOut.call(s,e)}).delegate("span.fancytree-title",a+o,function(e){s.debug("<span> got event "+e.type),e.preventDefault()}),e(i).bind("keydown"+o,function(e){if(s.debug("doc got event "+e.type+", hasFocus:"+s.hasFocus()),n.disabled||n.keyboard===!1||!s.hasFocus())return!0;var t=s.focusNode,i=s._makeHookContext(t||s,e),o=s.phase;try{return s.phase="userEvent",t?s._triggerNodeEvent("keydown",t,e)!==!1&&s._callHook("nodeKeydown",i):s._triggerTreeEvent("keydown",e)!==!1&&s._callHook("nodeKeydown",i)}finally{s.phase=o}}),this.element.bind("click"+o+" dblclick"+o,function(e){if(n.disabled)return!0;var i,s=_.getEventTarget(e),o=s.node,a=t.tree,r=a.phase;if(!o)return!0;i=a._makeHookContext(o,e);try{switch(a.phase="userEvent",e.type){case"click":return i.targetType=s.type,a._triggerNodeEvent("click",i,e)!==!1&&a._callHook("nodeClick",i);case"dblclick":return i.targetType=s.type,a._triggerNodeEvent("dblclick",i,e)!==!1&&a._callHook("nodeDblclick",i)}}finally{a.phase=r}})},getActiveNode:function(){return this.tree.activeNode},getNodeByKey:function(e){return this.tree.getNodeByKey(e)},getRootNode:function(){return this.tree.rootNode},getTree:function(){return this.tree}}),_=e.ui.fancytree,e.extend(e.ui.fancytree,{version:"development",buildType:"develop",debugLevel:2,_nextId:1,_nextNodeKey:1,_extensions:{},focusTree:null,_FancytreeClass:f,_FancytreeNodeClass:m,jquerySupports:{positionMyOfs:r(e.ui.version,1,9)},assert:function(e,t){return o(e,t)},debug:function(t){e.ui.fancytree.debugLevel>=2&&a("log",arguments)},error:function(e){a("error",arguments)},getEventTargetType:function(e){return this.getEventTarget(e).type},getEventTarget:function(e){var t=e&&e.target?e.target.className:"",i={node:this.getNode(e.target),type:n};return/\bfancytree-title\b/.test(t)?i.type="title":/\bfancytree-expander\b/.test(t)?i.type=i.node.hasChildren()===!1?"prefix":"expander":/\bfancytree-checkbox\b/.test(t)?i.type="checkbox":/\bfancytree-icon\b/.test(t)?i.type="icon":/\bfancytree-node\b/.test(t)&&(i.type="title"),i},getNode:function(e){if(e instanceof m)return e;for(e.selector!==n?e=e[0]:e.originalEvent!==n&&(e=e.target);e;){if(e.ftnode)return e.ftnode;e=e.parentNode}return null},info:function(t){e.ui.fancytree.debugLevel>=1&&a("info",arguments)},parseHtml:function(t){var i,s,o,a,r,l,p,d=t.find(">li"),c=[];return d.each(function(){var d,u,h=e(this),m=h.find(">span:first",this),f=m.length?null:h.find(">a:first"),g={tooltip:null,data:{}};for(m.length?g.title=m.html():f&&f.length?(g.title=f.html(),g.data.href=f.attr("href"),g.data.target=f.attr("target"),g.tooltip=f.attr("title")):(g.title=h.html(),a=g.title.search(/<ul/i),a>=0&&(g.title=g.title.substring(0,a))),g.title=e.trim(g.title),s=0,o=v.length;s<o;s++)g[v[s]]=n;for(l=this.className.split(" "),i=[],s=0,o=l.length;s<o;s++)p=l[s],y[p]?g[p]=!0:i.push(p);g.extraClasses=i.join(" "),r=h.attr("title"),r&&(g.tooltip=r),r=h.attr("id"),r&&(g.key=r),d=h.data(),d&&!e.isEmptyObject(d)&&(u=d.json,delete d.json,e.extend(g.data,d),u&&e.extend(g.data,u)),t=h.find(">ul:first"),t.length?g.children=e.ui.fancytree.parseHtml(t):g.children=g.lazy?n:null,c.push(g)}),c},registerExtension:function(t,i){e.ui.fancytree._extensions[t]=i},warn:function(e){a("warn",arguments)}})}(e,window,document)}.apply(t,n),/*!
	 * jquery.fancytree.js
	 * Dynamic tree view control, with support for lazy loading of branches.
	 * https://github.com/mar10/fancytree/
	 *
	 * Copyright (c) 2006-2013, Martin Wendt (http://wwWendt.de)
	 * Released under the MIT license
	 * https://github.com/mar10/fancytree/wiki/LicenseInfo
	 *
	 * @version DEVELOPMENT
	 * @date DEVELOPMENT
	 */
!(void 0!==s&&(e.exports=s))},function(e,t,i){var n,s;n=[i(2),i(213),i(293),i(360)],s=function(e,t,i,n){return e.View.extend({className:"data-list-inline-form-wrap",initialize:function(){var e=new i.Model({sourceAppInstanceId:null}),s=new n({model:e,settings:this.settings});this.add(s),this.listenTo(s,"cancel",function(){this.state.set("mode",t.DISPLAY)}),this.listenTo(s,"save",function(e){this.options.rules.create(e,{wait:!0})}),this.listenTo(this.state,"change:addRuleMode",this.remove)}})}.apply(t,n),!(void 0!==s&&(e.exports=s))},function(e,t,i){var n,s;n=[i(2)],s=function(e){return e.Form.extend({save:"Create Rule",title:"Push groups by rule",subtitle:function(){return e.tpl("Create a search rule that pushes any matching groups to {{appName}} automatically.")(this.settings.toJSON())},className:"data-list-inline-form gp-add-rule-form",layout:"o-form-3-4",attributes:{name:"ADD_RULE"},initialize:function(){this.addInput({type:"text",name:"name",label:"Rule name",placeholder:"Enter a name for this rule...",wide:!0});var e={STARTS_WITH:"starts with",ENDS_WITH:"ends with",CONTAINS:"contains"};this.addInput({label:"Group name",multi:2,input:[{type:"select",name:"searchExpressionType",options:e},{type:"text",name:"searchExpression",placeholder:"Enter string to match..."}]}),this.addInput({label:"Group description",multi:2,input:[{type:"select",name:"descriptionSearchExpressionType",options:e},{type:"text",name:"descriptionSearchExpression",placeholder:"Enter string to match..."}]}),this.addInput({type:"checkbox",name:"__active__",placeholder:"Immediately push groups found by this rule"})}})}.apply(t,n),!(void 0!==s&&(e.exports=s))},function(e,t,i){var n,s;n=[i(2)],s=function(e){return e.View.extend({className:"gp-disabled-message",template:'\t      <div class="infobox infobox-md clearfix"> \t      <span class="icon info-24"></span>\t      <h2>You need to enable provisioning to start pushing groups to {{appName}}</h2>\t      <p>\t        Group push allows you to use your existing groups in Okta and push them to {{appName}}.\t        Once a group is pushed, Okta automatically sends user membership changes\t        to the corresponding group in {{appName}}.\t      </p>\t      <a class="link-button link-button-big" href="#tab-user-management">Enable Provisioning</a>\t      </div>\t    ',getTemplateData:function(){return this.settings.toJSON()}})}.apply(t,n),!(void 0!==s&&(e.exports=s))},function(e,t,i){var n,s;n=[i(2)],s=function(e){var t=e.internal.util.Events;return e.ModalDialog.extend({title:"Delete Group",template:'\t      <div class="padding-20">\t        <h3 class="padding-0 margin-btm-5">What do you want to do with this group?</h3>\t        <p class="text-light">No user accounts are deleted with either option.</p>\t      </div>\t      <div class="option-explain margin-rl margin-btm-25 rounded-top-4">\t        <div class="checkbox-wrap rounded-top-4">\t          <label>\t            <input type="radio" name="deleteMembership" value="true" checked="checked">\t            <strong>Delete the group in the target app (recommended)</strong>\t            <p class="explain-text checkbox-wrap-sub-option margin-top-5">\t              Delete the group in the target app.  User accounts won\'t be deleted.</p>\t          </label>\t        </div>\t        <div class="checkbox-wrap">\t          <label>\t            <input type="radio" name="deleteMembership" value="false">\t            <strong>Leave the group in the target app</strong>\t            <p class="explain-text checkbox-wrap-sub-option margin-top-5">\t              Okta stops pushing memberships and the group remains in the target.</p>\t          </label>\t        </div>\t      </div>\t      <div class="button-bar button-bar-border-top clearfix">\t        <input type="button" class="button button-primary delete-membership" value="Delete"/>\t        <input type="button" class="button cancel " value="Cancel"/>\t      </div>\t    ',events:{"click input.cancel":"remove","click .simplemodal-close":"remove","click .delete-membership":function(){this.trigger(t.DELETE,this.val()),this.remove()}},params:{minWidth:500},val:function(){return"true"===this.$("input[name=deleteMembership]:checked").val()}})}.apply(t,n),!(void 0!==s&&(e.exports=s))},function(e,t,i){var n,s;n=[i(2)],s=function(e){var t=e.internal.util.Events.DELETE;return e.ModalDialog.extend({title:"Delete Mapping Rule",template:'\t      <div class="padding-20">\t        <h3 class="padding-0 margin-btm-5">What do you want to do with this rule?</h3>\t        <p class="text-light">No user accounts are deleted with either option.</p>\t      </div>\t      <div class="option-explain margin-rl margin-btm-25 rounded-top-4">\t        <div class="checkbox-wrap rounded-top-4">\t          <label>\t            <input type="radio" name="deleteMappings" value="true" checked="checked">\t            <strong>Delete the associated groups</strong>\t            <p class="explain-text checkbox-wrap-sub-option margin-top-5">\t              Delete the rule and all associated groups.</p>\t          </label>\t        </div>\t        <div class="checkbox-wrap">\t          <label>\t            <input type="radio" name="deleteMappings" value="false">\t            <strong>Leave associated groups</strong>\t            <p class="explain-text checkbox-wrap-sub-option margin-top-5">\t              Okta will stop mapping new groups using this rule, but exisitng groups will not be deleted</p>\t          </label>\t        </div>\t      </div>\t      <div class="button-bar button-bar-border-top clearfix">\t        <input type="button" class="button button-primary delete-rule" value="Delete"/>\t        <input type="button" class="button cancel " value="Cancel"/>\t      </div>\t    ',events:{"click input.cancel":"remove","click .simplemodal-close":"remove","click .delete-rule":function(){this.trigger(t,this.val()),this.remove()}},params:{minWidth:500},val:function(){return"true"===this.$("input[name=deleteMappings]:checked").val()}})}.apply(t,n),!(void 0!==s&&(e.exports=s))},function(e,t,i){var n,s;n=[i(2)],s=function(e){var t=e.tpl("/api/internal/instance/{{instance}}/grouppush/enhancementsSupported"),i=e.Model.extend({props:{enhancementsSupported:"boolean"},urlRoot:function(){return t(this)}});return{Model:i}}.apply(t,n),!(void 0!==s&&(e.exports=s))},function(e,t,i){var n,s;n=[i(2),i(366),i(377),i(397),i(372),i(396),i(371),i(398)],s=function(e,t,i,n,s,o,a,r){var l=e.$,p=e._,d=function(e){var t=new i(e);t.render()};return e.Controller.extend({View:t,initialize:function(){this.collection=new s.Collection(null,{appInstanceId:this.options.appInstanceId,isHostedApp:this.settings.get("isHostedApp"),isAfWFeatureEnabled:this.settings.hasFeature("ANDROID_FOR_WORK")}),this.appInstanceEASSettingsModel=new n.Model({},{appInstanceId:this.options.appInstanceId}),this.androidForWorkSettingsModel=new r},deleteApp:function(t){this.confirm({title:"Confirm Deletion",content:e.tpl('\t          <h4>Are you sure you want to delete your <span class="bold">uploaded app {{name}}</span>?</h4>\t          <div class="infobox infobox-warning clearfix">\t            <span class="icon warning-16"></span>\t            <p>\t              <span class="bold">\t              {{i18n code="mobile.mobileclientassignments.nativeApp.form.deploy.delete.warning.permanent"}}\t              </span><br>\t              {{i18n code="mobile.mobileclientassignments.nativeApp.form.deploy.delete.warning.store"}}\t              <span class="bold">\t              {{i18n code="mobile.mobileclientassignments.nativeApp.form.deploy.delete.warning.uninstall"}}\t              </span>\t            </p>\t          </div>\t        ')(t.toJSON()),save:e.loc("delete"),ok:function(){t.destroy({wait:!0,success:p.bind(function(e){this.notifyDelete(e,!0)},this),error:p.bind(function(e){this.notifyDelete(e,!1)},this)})}})},fetchSettingsData:function(e){var t=this,i=e.settingsModel,n=e.configuredMobileAppModel;n&&(i=new o({nativeAppId:n.get("nativeAppId")},{platform:n.get("platform")})),i.fetch().done(p.bind(function(e){var t={androidInstallPermissionUrl:e.androidInstallPermissionUrl,isInstallPermissionApprovedInGoogle:p.isEmpty(e.androidInstallPermissionUrl),appConfigurations:e.appConfigurations,permissions:e.permissions};n?(n.set(t),n.setConfigsWithInferredTypes(t.appConfigurations),this.addAppPreferences({configuredMobileAppModel:n})):this.addAppPreferences({configuredMobileAppData:p.extend({nativeAppId:i.get("nativeAppId"),platform:"ANDROID"},t)})},this)).fail(function(e){t.notify("error",e.responseJSON.errorSummary,{width:350})})},addAppPreferences:function(e){var t=e.configuredMobileAppData,i=e.configuredMobileAppModel,n={type:this.settings.get("isHostedApp")?"HOSTED":"OAN"};if(i)i.set(n),this.editAppPreferences(i);else if(t){var o=p.defaults(t,n),a=p.defaults({parse:!0,isAfWFeatureEnabled:this.settings.hasFeature("ANDROID_FOR_WORK"),isAfWConfiguredForOrg:!!this.androidForWorkSettingsModel.get("enterpriseId")},this.settings.pick("appInstanceId")),r=new s.Model(o,a);this.editAppPreferences(r)}},editAppPreferences:function(e){e.listenTo(e,"sync",p.bind(function(){e.get("error")||this.collection.add(e)},this));var t={state:this.state,settings:this.settings,configurationModel:e};e.get("isIOSApp")&&(void 0!==e.get("fileName")&&e.set("appLocation","keep"),p.extend(t,{nativeAppsSummary:new a(null,{apps:this.collection,hasAndroidForWorkPolicySetup:!!this.androidForWorkSettingsModel.get("enterpriseId")})})),this._showEditModal(e,t)},toJSON:function(t){return e.Controller.prototype.toJSON.call(this,p.defaults(t||{},p.pick(this,"appInstanceEASSettingsModel","androidForWorkSettingsModel")))},notifyDelete:function(t,i){var n=i?"mobile.mobileclientassignments.nativeApp.delete.notify.success":"mobile.mobileclientassignments.nativeApp.delete.notify.error";this.notify(i?"success":"error",e.loc(n,"messages",[t.get("name")]),{width:350})},render:function(){var t=arguments;this._fetchModels().then(p.bind(function(){e.Controller.prototype.render.apply(this,t),this.collection.setIsAfWConfiguredForOrg(!!this.androidForWorkSettingsModel.get("enterpriseId")),this.collection.fetch().done(p.bind(function(){if(this.options.mobileAppId){var e=this.collection.findWhere({mobileAppId:this.options.mobileAppId});e&&this.editAppPreferences(e)}},this))},this))},_showEditModal:function(e,t){var i=this;e.isNew()&&e.get("nativeAppId")&&e.get("isHostedApp")?(e.setAppConfigurations(),this.state.trigger("edit-configuration",e)):e.isNew()?d(t):e.fetch().done(function(){e.setAppConfigurations(),d(t)}).fail(function(e){i.notify("error",e.responseJSON.errorSummary,{width:350})})},_fetchModels:function(){return this.settings.hasFeature("MOBILE_MIM")&&this.settings.hasFeature("ANDROID_FOR_WORK")?l.when(this.appInstanceEASSettingsModel.fetch(),this.androidForWorkSettingsModel.fetch()):this.settings.hasFeature("MOBILE_MIM")?l.when(this.appInstanceEASSettingsModel.fetch()):l.Deferred().resolve().promise()}})}.apply(t,n),!(void 0!==s&&(e.exports=s))},function(e,t,i){var n,s;n=[i(2),i(367),i(375)],s=function(e,t,i){return e.View.extend({template:'\t      <h2>{{i18n code="mobile.mobileclientassignments.header"}}</h2>\t    ',initialize:function(){this.add(t),this.settings.hasFeature("MOBILE_MIM")&&this.settings.hasPermission("EXCHANGE_ACTIVE_SYNC")&&this.add(i)},getTemplateData:function(){return{appInstanceName:this.settings.get("appInstanceName")}}})}.apply(t,n),!(void 0!==s&&(e.exports=s))},function(e,t,i){var n,s;n=[i(2),i(368),i(374)],s=function(e,t,i){return e.View.extend({className:"margin-top-15 clearfix",initialize:function(){this.add(t),this.settings.get("isHostedApp")&&this.add(i)}})}.apply(t,n),!(void 0!==s&&(e.exports=s))},function(e,t,i){var n,s;n=[i(2),i(369),i(370),i(371)],s=function(e,t,i,n){var s=e._;return e.DataList.extend({className:"o-form-theme padding-0 mobile-apps-datalist form-wrap",emptyState:{title:e.loc("mobile.mobileclientassignments.nativeApp.list.empty.title"),subtitle:function(){return!!this.settings.get("isHostedApp")&&e.loc("mobile.mobileclientassignments.nativeApp.list.empty.subtitle")}},toolbar:[e.View.extend({className:"header",template:'{{i18n code="mobile.mobileclientassignments.nativeApp.list.title"}}'})],columns:[{className:"mobile-app-details",template:'\t          <p class="mobile-app-name">{{name}}</p>\t          <p class="mobile-app-platform">{{display.platform.device}}</p>\t        ',initialize:function(){this.listenTo(this.model,"sync",this.render)}},{className:"mobile-app-preferences",view:e.View.extend({template:'\t            {{#if active}}\t              <div class="active-deploy-status">\t                <span class="icon confirm-16-green"></span>\t                {{i18n code="mobile.mobileclientassignments.nativeApp.column.deployed"}}\t              </div>\t              <ul>{{#each settings}}<li>{{summary}}</li>{{/each}}</ul>\t            {{else}}\t              <div class="inactive-deploy-status">\t                {{i18n code="mobile.mobileclientassignments.nativeApp.column.notDeployed"}}\t              </div>\t            {{/if}}\t          ',initialize:function(){this.listenTo(this.model,"sync",this.render)},getTemplateData:function(){return s.extend({},this.model.toJSON(),{settings:s.filter(t.getDistributionOptionSettings(),function(e,t){return this.model.get(t)&&(!e.afwOnly||this.model.isAfWConfiguredForOrg)},this)})}})},{className:"mobile-app-actions",actions:[{attributes:{"data-se":"edit-mobile-app"},icon:"edit-16",click:function(){this.model.get("isUnconfiguredOANApp")?this.state.invoke("fetchSettingsData",{configuredMobileAppModel:this.model}):this.state.invoke("editAppPreferences",this.model)},enabled:function(){return!this.settings.get("shouldHideEditCapabilities")&&this.settings.hasPermission("manageMobileApp")}},{attributes:{"data-se":"delete-mobile-app"},icon:"cancel-16",click:function(){this.state.invoke("deleteApp",this.model)},visible:function(){return this.model.get("isHostedApp")&&this.settings.hasFeature("HOSTED_APPSTORE")},enabled:function(){return!this.settings.get("shouldHideEditCapabilities")&&this.settings.hasPermission("manageMobileApp")}}]}],initialize:function(){this.settings.get("isHostedApp")&&this.settings.hasFeature("HOSTED_APPSTORE")&&this.listenToOnce(this.collection,"sync",function(){this.add(new i(s.extend({},this.options,{model:new n(null,{apps:this.collection,hasAndroidForWorkPolicySetup:!!this.options.androidForWorkSettingsModel.get("enterpriseId")})})),".data-list-toolbar")})}})}.apply(t,n),!(void 0!==s&&(e.exports=s))},function(e,t,i){var n,s;n=[i(2)],s=function(e){var t="/admin/app/google/",i="/admin/app/google/instance/",n=e.loc,s=e.tpl,o=e._;return{ANDROID_RUNTIME_PERMISSIONS_QUICK_PICK_OPTIONS:{PROMPT:n("mobile.mobileclientassignments.nativeApp.form.runTimePermissions.quickPick.options.prompt"),ALLOW:n("mobile.mobileclientassignments.nativeApp.form.runTimePermissions.quickPick.options.allow"),DENY:n("mobile.mobileclientassignments.nativeApp.form.runTimePermissions.quickPick.options.deny"),CUSTOMIZE:n("mobile.mobileclientassignments.nativeApp.form.runTimePermissions.quickPick.options.customize")},ANDROID_RUNTIME_PERMISSION_OPTIONS:{PROMPT:n("mobile.mobileclientassignments.nativeApp.form.runTimePermissions.options.prompt"),ALLOW:n("mobile.mobileclientassignments.nativeApp.form.runTimePermissions.options.allow"),DENY:n("mobile.mobileclientassignments.nativeApp.form.runTimePermissions.options.deny")},NONE_ANDROID_RUNTIME_PERMISSION_OPTION:{NONE:n("mobile.mobileclientassignments.nativeApp.form.runTimePermissions.quickPick.options.none")},MANAGED_APP_CONFIGURATION_INTEGER_INCLUSIVE_RANGE:{MAX:Math.pow(2,31)-1,MIN:-Math.pow(2,31)},getPolicyWipeText:function(e,t){var i="";return e?i=n("devices.wipe.policy.disallow.hint"):t&&(i=n("devices.wipe.policy.device.disallow.hint")),i},shouldDisableDeviceAction:function(e){return!this[e.options.secMethod](e.status)||!e.managePermission||!e.options.actionSupportedByPlatform},getManagedAppConfigurationType:function(e){switch(e){case"ANDROID":return{STRING:"String",BOOLEAN:"Boolean",INT:"Integer",MULTISELECT:"Multi"};case"iOS":return{STRING:"String",BOOLEAN:"Boolean",INT:"Integer"};default:return{}}},getDeviceStatusIcon:function(e,t){return"WIPE_SENT"===t?"warning-16-yellow":this.getEnrollmentStatusIcon(e)},getDeviceStatusText:function(e,t){return"WIPE_SENT"===t?"Pending Factory Reset":this.getEnrollmentStatusText(e)},getEnrollmentStatusIcon:function(e){var t="success-16-green",i="remove-16",n="omm-enrolling-16",s="warning-16-yellow",a="error-16-red",r={NEW:n,AUTHENTICATED:n,ENROLLING:n,COMPLETED:t,ENROLLED:t,DEPROVISIONED:i,EXPIRED:s,CHECKOUT:i,ERROR:a,ERASED:i};return o.has(r,e)?r[e]:a},getEnrollmentStatusText:function(e){var t={NEW:"Enrolling",AUTHENTICATED:"Enrolling",ENROLLING:n("devices.status.enrolling","enduser"),COMPLETED:"Enrolled",ENROLLED:n("devices.status.enrolled","enduser"),DEPROVISIONED:n("devices.status.deprovisioned","enduser"),EXPIRED:n("devices.status.expired","enduser"),CHECKOUT:"Deprovisioned",ERROR:n("devices.status.error","enduser"),ERASED:n("devices.status.erased","enduser")};return o.has(t,e)?t[e]:void 0!==e?e:"Unavailable"},getDeviceIcon:function(e,t){var i={ANDROID:{SMARTPHONE:"icon-android-phone-32",TABLET:"icon-android-tab-32"},IOS:{SMARTPHONE:"icon-iphone-32",TABLET:"icon-ipad-32",POD:"icon-ipod-touch-32"},OSX:{LAPTOP:"icon-laptop-32"},WINDOWS:{LAPTOP:"icon-laptop-32"},UNKNOWN:"icon-unknown-32"};return o.has(i,e)&&o.has(i[e],t)?i[e][t]:i.UNKNOWN},getJailBreakText:function(e){var t={ANDROID:"Rooted",IOS:"Jailbroken",UNKNOWN:""};return o.has(t,e)?t[e]:t.UNKNOWN},getName:function(e){return null===e.get("deviceName")?"Unknown":e.get("deviceName")},getDisplayNameByDeviceType:function(e,t){t||(t=!1);var i={IOS_UNIVERSAL:{platform:"iOS",device:"Universal"},IOS_IPAD:{platform:"iOS",device:"iPad"},IOS_IPHONE:{platform:"iOS",device:"iPhone"},ANDROID_UNIVERSAL:{platform:"Android",device:"Universal"}},n=i[e];return n?t?n.platform+" ("+n.device+")":n.device:"Unknown"},getDeviceOS:function(e){var t={iOS:n("os.ios"),IOS:n("os.ios"),ANDROID:n("os.android"),OSX:n("os.osx"),WINDOWS:n("os.windows")};return e&&t[e]?t[e]:"Unknown"},getDeviceType:function(e){!o.isString(e)&&(e="");var t=e.toLowerCase().replace(/(?:^|\s)[a-z]/g,function(e){return e.toUpperCase()});return t},canUnenroll:function(e){return"Enrolled"===this.getEnrollmentStatusText(e)},canWipe:function(e){return"Enrolled"===this.getEnrollmentStatusText(e)},getDistributionOptionSettings:function(){return{installFromAppStore:{label:n("mobile.mobileclientassignments.nativeApp.form.distribution.installFromAppStore.full"),summary:n("mobile.mobileclientassignments.nativeApp.form.distribution.installFromAppStore.summary"),platform:"ALL"},promptToInstall:{label:n("mobile.mobileclientassignments.nativeApp.form.distribution.promptToInstall.full"),summary:n("mobile.mobileclientassignments.nativeApp.form.distribution.promptToInstall.summary"),platform:"IOS"},manageIfInstalled:{label:n("mobile.mobileclientassignments.nativeApp.form.distribution.manageIfInstalled.full"),summary:n("mobile.mobileclientassignments.nativeApp.form.distribution.manageIfInstalled.summary"),platform:"IOS"},silentInstall:{label:n("mobile.mobileclientassignments.nativeApp.form.distribution.silentInstall.full"),summary:n("mobile.mobileclientassignments.nativeApp.form.distribution.silentInstall.summary"),platform:"ANDROID",afwOnly:!0}}},getAndroidRuntimePermissionsQuickPickSelection:function(e){if(!o.isArray(e)&&(e=[]),o.isEmpty(e))return"NONE";var t;return o.each(["PROMPT","ALLOW","DENY"],function(i){t||o.every(e,function(e){return e.state===i})&&(t=i)}),t||(t="CUSTOMIZE"),t},getAndroidRuntimePermissionNames:function(e){!o.isArray(e)&&(e=[]);var t;return o.isEmpty(e)||(t=o.map(e,o.iteratee("displayName"))),t},getGoogleAppSAMLInstructionURL:function(e){return s("http://saml-doc.okta.com/SAML_Docs/How-to-Enable-SAML-2.0-in-Google-Apps.html?baseAdminUrl={{{urlProtocol}}}//{{{urlHost}}}&app=google&instanceId={{id}}")({urlProtocol:window.location.protocol,urlHost:window.location.host,id:e})},getGoogleAppLicenseManagementURL:function(e){return s("https://admin.google.com/{{domain}}/AdminHome?fral=1#DomainSettings/licensemanagerkey=GOOGLE.GAB&notab=1&subtab=subscriptions&subtabchild=managelicenses")({domain:e})},getGoogleAppOAuthLink:function(e){return s(t+"{{id}}/oauth/authorize")({id:e})},getGoogleAppSignOnModeLink:function(e){return s(i+"{{id}}/#tab-signon")({id:e})},getGoogleAppUserProvisionLink:function(e){return s(i+"{{id}}/#tab-user-management")({id:e})},getAppVersionStringOrEmptyString:function(e){return e?"v"+e:""}}}.apply(t,n),!(void 0!==s&&(e.exports=s))},function(e,t,i){var n,s;n=[i(2)],s=function(e){return e.DropDown.extend({title:e.loc("mobile.mobileclientassignments.nativeApp.add.label"),attributes:{"data-se":"add-native-app-dropdown"},optionWidth:285,modelEvents:{change:"render"},items:function t(){var t=[{icon:"icon-ios-16",attributes:{"data-se":"ios-option"},enableWhen:{hasAllIOS:!1},click:function(){this.state.invoke("addAppPreferences",{configuredMobileAppData:{platform:"iOS"}})},title:function(){return this.model.get("hasAllIOS")?e.loc("mobile.mobileclientassignments.nativeApp.add.title.ios"):this.model.get("hasIPhone")?e.loc("mobile.mobileclientassignments.nativeApp.add.title.ipad"):this.model.get("hasIPad")?e.loc("mobile.mobileclientassignments.nativeApp.add.title.iphone"):e.loc("mobile.mobileclientassignments.nativeApp.add.title.ios")},subtitle:function(){return this.model.get("hasAllIOS")?this.model.get("hasIPhoneAndIPad")?e.loc("mobile.mobileclientassignments.nativeApp.add.subtitle.hasIPhoneAndIPad"):e.loc("mobile.mobileclientassignments.nativeApp.add.subtitle.hasUniversal"):this.model.get("hasIPhone")?e.loc("mobile.mobileclientassignments.nativeApp.add.subtitle.ipad"):this.model.get("hasIPad")?e.loc("mobile.mobileclientassignments.nativeApp.add.subtitle.iphone"):e.loc("mobile.mobileclientassignments.nativeApp.add.subtitle.ios")}}];return this.settings.hasFeature("ANDROID_FOR_WORK")&&t.push({icon:"icon-android-16",attributes:{"data-se":"android-option"},click:function(){this.state.invoke("addAppPreferences",{configuredMobileAppData:{platform:"ANDROID"}})},enableWhen:{hasAndroid:!1,hasAndroidForWorkPolicySetup:!0},title:e.loc("mobile.mobileclientassignments.nativeApp.add.title.android"),subtitle:function(){return this.model.get("hasAndroidForWorkPolicySetup")?this.model.get("hasAndroid")?e.loc("mobile.mobileclientassignments.nativeApp.add.subtitle.hasAndroid"):e.loc("mobile.mobileclientassignments.nativeApp.add.subtitle.android"):e.loc("mobile.mobileclientassignments.nativeApp.add.subtitle.noAfWPolicy")}}),t}})}.apply(t,n),!(void 0!==s&&(e.exports=s))},function(e,t,i){var n,s;n=[i(2),i(372)],s=function(e,t){var i=e._;return e.Model.extend({local:{hasAllIOS:["boolean",!0,!1],hasIPad:["boolean",!0,!1],hasIPhone:["boolean",!0,!1],hasIPhoneAndIPad:["boolean",!0,!1],hasIOSUniversal:["boolean",!0,!1],hasAndroid:["boolean",!0,!1],hasAndroidForWorkPolicySetup:["boolean",!0,!1]},initialize:function(e,n){if(!n)throw new Error("missing required options");if(!(n.apps&&n.apps instanceof t.Collection))throw new Error("missing native wizard apps");if(!i.isBoolean(n.hasAndroidForWorkPolicySetup))throw new Error("missing hasAndroidForWorkPolicySetup");this.apps=n.apps,this.set("hasAndroidForWorkPolicySetup",n.hasAndroidForWorkPolicySetup),this.setWizardAppAttributes(),this.listenTo(this.apps,"add remove reset",this.setWizardAppAttributes)},setWizardAppAttributes:function(){this.set({hasAllIOS:this._hasAllIOS(),hasIPad:this._hasIPad(),hasIPhone:this._hasIPhone(),hasIPhoneAndIPad:this._hasIPhoneAndIPad(),hasIOSUniversal:this._hasIOSUniversal(),hasAndroid:this._hasAndroid()})},_hasAllIOS:function(){return this._hasIOSUniversal()||this._hasIPhoneAndIPad()},_hasIPad:function(){return this.apps.where({deviceType:"IOS_IPAD"}).length>0},_hasIPhone:function(){return this.apps.where({deviceType:"IOS_IPHONE"}).length>0},_hasIPhoneAndIPad:function(){return this._hasIPhone()&&this._hasIPad()},_hasIOSUniversal:function(){return this.apps.where({deviceType:"IOS_UNIVERSAL"}).length>0},_hasAndroid:function(){return this.apps.where({deviceType:"ANDROID_UNIVERSAL"}).length>0}})}.apply(t,n),!(void 0!==s&&(e.exports=s))},function(e,t,i){var n,s;n=[i(2),i(369),i(373)],s=function(e,t,i){var n=e._,s={iOS:"Public ID",ANDROID:"PublicId"},o={iOS:"User Email Address",ANDROID:"UserEmail"},a=function(e){return t.getAndroidRuntimePermissionsQuickPickSelection(e)},r=e.tpl("/api/internal/v1/appInstance/{{appInstanceId}}/configuredMobileApp"),l=e.Model.extend({idAttribute:"mobileAppId",props:{file:"string",mobileAppId:"string",nativeAppId:"string",appVersion:"string",name:"string",mobileAppIconPath:"string",configuredMobileAppId:"string",platform:{type:"string",values:["iOS","ANDROID"],value:"iOS"},type:{type:"string",values:["HOSTED","APPSTORE_LINK","OAN"]},manageIfInstalled:["boolean",!0,!1],active:["boolean",!0,!1],promptToInstall:["boolean",!0,!1],silentInstall:["boolean",!0,!1],fileName:"string",linkURL:"string",uploadDate:"string",deviceType:"string",objectKey:"string",fileHash:"string",error:"string",permissions:"array",androidInstallPermissionUrl:"string",appConfigurations:"array"},local:{installFromAppStore:["boolean",!0,!0],appLocation:{type:"string",values:["upload","keep"],value:"upload"},toDeploy:["boolean",!1,!1],uploadedFileName:"string",uploadedFileObjectKey:"string",prefillUserName:"boolean",boxPublicId:"string",isInstallPermissionApprovedInGoogle:["boolean",!0,!1],isInstallPermissionApprovedInOkta:["boolean",!0,!1],androidRuntimePermissionQuickPick:"string",enableManagedAppConfig:["boolean",!0,!1],configsWithInferredTypes:"object",isBoxEmmModeSelected:["boolean",!1,!1]},derived:{"display.platform.device":{deps:["deviceType"],fn:function(e){return t.getDisplayNameByDeviceType(e,!0)}},isHostedApp:{deps:["type"],fn:function(e){return"HOSTED"===e}},isOANApp:{deps:["type"],fn:function(e){return!e||"OAN"===e}},isAndroidApp:{deps:["platform"],fn:function(e){return"ANDROID"==e}},isIOSApp:{deps:["platform"],fn:function(e){return"iOS"==e}},fileExtension:{deps:["isAndroidApp"],fn:function(e){return e?".apk":".ipa"}},isConfiguredAndroidHostedApp:{deps:["isAndroidApp","configuredMobileAppId","isHostedApp"],fn:function(e,t,i){return e&&t&&i}},isUnconfiguredOANApp:{deps:["configuredMobileAppId","isOANApp"],fn:function(e,t){return!e&&t}},isUnconfiguredAndroidHostedApp:{deps:["isAndroidApp","configuredMobileAppId","isHostedApp"],fn:function(e,t,i){return e&&!t&&i}},hasAndroidRuntimePermission:{deps:["isAndroidApp","androidRuntimePermissionQuickPick"],fn:function(e,t){return e&&t&&"NONE"!==t}},isAfwMailApp:{deps:["nativeAppId"],fn:function(e){return"com.google.android.apps.work.pim"===e||"com.google.android.gm"===e}}},url:function e(){var e=this.collection&&this.collection.url()||r(this),t=this.get("configuredMobileAppId");return e+(t?"/"+t:"")},isNew:function(){return!this.get("configuredMobileAppId")},constructor:function(t,i){t||(t={}),i||(i={}),this.appInstanceId=i.appInstanceId?i.appInstanceId:this._getCollectionProperty("appInstanceId",i),this.isAfWFeatureEnabled=n.isBoolean(i.isAfWFeatureEnabled)?i.isAfWFeatureEnabled:this._getCollectionProperty("isAfWFeatureEnabled",i,!1),this.isAfWConfiguredForOrg=n.isBoolean(i.isAfWConfiguredForOrg)?i.isAfWConfiguredForOrg:this._getCollectionProperty("isAfWConfiguredForOrg",i,!1),e.Model.apply(this,arguments),this._setBoxEMMAttributes(),this._addListener(),this.setConfigsWithInferredTypes(t.appConfigurations)},setConfigsWithInferredTypes:function(e){this.set("configsWithInferredTypes",new i.Collection(e||[],{platform:this.get("platform")}));var t=this.get("configsWithInferredTypes");this.isBoxForEMMApp()&&this._setBoxForEmmConfigsFromInferredTypes(t)},_setBoxForEmmConfigsFromInferredTypes:function(e){var t=e.findWhere({key:s[this.get("platform")]});t&&t.get("value")&&this.set({isBoxEmmModeSelected:!0,boxPublicId:t.get("value")});var i=e.findWhere({key:o[this.get("platform")]});this.set("prefillUserName",!n.isUndefined(i)&&!!i.get("value")||this.isNew())},parse:function(e){return n.isArray(e)?n.each(e,function(e){return this._parseModelResponse(e)},this):e=this._parseModelResponse(e),e},validate:function(){var t=[],i=this.isBoxForEMMApp(),s=this.get("configsWithInferredTypes");this.get("toDeploy")&&this.get("isBoxEmmModeSelected")&&!this.get("boxPublicId")&&(t.boxPublicId=e.loc("mobile.mobileclientassignments.nativeApp.form.deployWithoutPublicId")),this.isAfWFeatureEnabled&&this.get("isAndroidApp")&&!this.get("isInstallPermissionApprovedInOkta")&&(t.isInstallPermissionApprovedInOkta=e.loc("mobile.mobileclientassignments.nativeApp.form.error.deployWithoutApproval"));var o=s.validate(i||this.get("isIOSApp")&&1===s.length&&s.at(0).isNew()&&n.isEmpty(s.at(0).get("displayKey")));return n.isEmpty(o)||this.set("enableManagedAppConfig",!0),n.extend(t,o),t},toJSON:function(){return this.set("active",this.get("toDeploy")),e.Model.prototype.toJSON.apply(this,arguments)},isBoxForEMMApp:function(){return!this.get("isHostedApp")&&(this.get("isIOSApp")&&"com.box.mdmios"===this.get("nativeAppId")||this.isAfWFeatureEnabled&&this.isAfWConfiguredForOrg&&this.get("isAndroidApp")&&"com.box.android"===this.get("nativeAppId"))},setAppConfigurations:function(){var e=this.get("configsWithInferredTypes");this.isBoxForEMMApp()&&this._convertAppConfigurationsForBoxEMM(e),this.set("appConfigurations",e.toJSON())},_convertAppConfigurationsForBoxEMM:function(e){var t=function(e,t,i,s){var o={configStatus:s?"ACTIVE":"INACTIVE",key:t,displayKey:t,value:i,displayValue:i},a=e.findWhere({key:t});n.isEmpty(a)?e.add(o):a.set(o)},i=this.get("boxPublicId"),a=this.get("prefillUserName"),r=this.get("platform");this.get("isAndroidApp")&&!this.get("isBoxEmmModeSelected")?(t(e,s[r],"",!1),t(e,o[r],this.isNew()?"appuser.userName":null,!1),t(e,"EmmName","",!1),t(e,"ManagementId","",!1),this._setBoxForEmmConfigsFromInferredTypes(e)):(t(e,s[r],i,!0),t(e,o[r],a?"appuser.userName":null,!0),this.get("isAndroidApp")&&(t(e,"EmmName","Generic EMM",!0),t(e,"ManagementId",i,!0)))},_addListener:function(){this.on("change:appLocation",function(){"keep"===this.get("appLocation")&&this.set({fileName:this.get("uploadedFileName"),objectKey:this.get("uploadedFileObjectKey")})}),this.on("sync",function(e,t){this.setConfigsWithInferredTypes(t.appConfigurations)}),this.isAfWFeatureEnabled&&(this.on("change:permissions",function(){this.set("androidRuntimePermissionQuickPick",a(this.get("permissions")))}),this.on("change:androidInstallPermissionUrl",function(){var e=this._getInstallPermissionApprovedValue(this.get("androidInstallPermissionUrl"));this.set({isInstallPermissionApprovedInGoogle:e,isInstallPermissionApprovedInOkta:e})}))},_setBoxEMMAttributes:function(){this.isBoxForEMMApp()&&this.set({enableManagedAppConfig:!0,manageIfInstalled:!0,isBoxEmmModeSelected:this.get("isBoxEmmModeSelected")||this.get("isIOSApp")})},_getCollectionProperty:function(e,t,i){return this.collection?this.collection[e]:t.collection?t.collection[e]:i},_getInstallPermissionApprovedValue:function(e){return n.isEmpty(e)},_parseModelResponse:function(e){return e.toDeploy=!!n.isBoolean(e.active)&&e.active,e.uploadedFileName=e.fileName,e.uploadedFileObjectKey=e.objectKey,"ANDROID"===e.platform&&(e.isInstallPermissionApprovedInGoogle=e.isInstallPermissionApprovedInOkta=this._getInstallPermissionApprovedValue(e.androidInstallPermissionUrl),e.androidRuntimePermissionQuickPick=a(e.permissions)),e}}),p=e.Collection.extend({model:l,initialize:function(e,t){if(t||(t={}),this.isHostedApp=t.isHostedApp,this.appInstanceId=t.appInstanceId,!this.appInstanceId)throw new Error("appInstanceId is not provided to MobileClientAssignments.Collection");this.isAfWFeatureEnabled=!!t.isAfWFeatureEnabled},url:function(){return r({appInstanceId:this.appInstanceId})},setIsAfWConfiguredForOrg:function(e){this.isAfWConfiguredForOrg=!!e}});return{Model:l,Collection:p}}.apply(t,n),!(void 0!==s&&(e.exports=s));
},function(e,t,i){var n,s;n=[i(2),i(369)],s=function(e,t){var i=e.$,n=e._,s=function(e){return parseInt(e,10)},o=function(e,i,o){switch(e){case"STRING":return!n.isEmpty(i);case"INT":var a=s(i);return!isNaN(a)&&(a<t.MANAGED_APP_CONFIGURATION_INTEGER_INCLUSIVE_RANGE.MAX&&a>t.MANAGED_APP_CONFIGURATION_INTEGER_INCLUSIVE_RANGE.MIN);case"BOOLEAN":return n.contains(n.keys(o),i);case"MULTISELECT":return n.every(i,function(e){return n.contains(n.keys(o),e)});default:return!1}},a=e.Model.extend({idAttribute:"key",props:{key:"string",title:"string",description:"string",value:"any",configType:{type:"string",required:!0,value:"STRING",values:["STRING","INT","BOOLEAN","CHOICE","MULTISELECT","HIDDEN","OBJECT"]},entry:"object",selectedEntry:"object",configStatus:{type:"string",value:"ACTIVE"}},local:{displayKey:{type:"string",value:""},displayValue:{type:"any",value:""},platform:{type:"string",required:!0,values:["ANDROID","iOS"]}},derived:{isSupportedByOkta:{deps:["configType","platform"],fn:function(e,i){return n.contains(n.keys(t.getManagedAppConfigurationType(i)),e)}},possibleOptions:{deps:["configType","entry"],fn:function(t,i){switch(t){case"BOOLEAN":return{true:e.loc("true"),false:e.loc("false")};case"MULTISELECT":i||(i=[]);var s={};return n.map(i,function(e){s[e.value]=e.name}),s}}}},constructor:function(t,i){if(i||(i={}),this.platform=i.platform,this.platform||(this.collection?this.platform=this.collection.platform:i.collection&&(this.platform=i.collection.platform)),!this.platform)throw new Error("platform is not provided to ManagedAppConfigs.Model");e.Model.apply(this,arguments)},initialize:function(){this.set({displayValue:this._convertValueToDisplayValue(),displayKey:this.get("key"),platform:this.platform}),this.on("change:configType",function(){var e="";switch(this.get("configType")){case"BOOLEAN":e=!0;break;case"MULTISELECT":e=[]}this.set("displayValue",e)}),this.on("change:configStatus",function(){"INACTIVE"===this.get("configStatus")&&this.set("displayValue","MULTISELECT"===this.get("configType")?[]:"")})},validate:function(){var t={},i=this.get("configType"),n=this.get("displayValue"),s=!this.get("isSupportedByOkta")||"INACTIVE"===this.get("configStatus")||o(i,n,this.get("possibleOptions"));return s||(t[this.get("displayKey")]=e.loc("mobile.mobileclientassignments.nativeApp.form.managedappconfig.error.invalidInteger")),t},toJSON:function(t){if(t||(t={}),n.isUndefined(t.readyToSync)&&(t.readyToSync=!1),t.readyToSync){var o=i.trim(this.get("displayKey")),a=this.get("displayValue");if("ACTIVE"===this.get("configStatus")&&!n.isEmpty(o)){var r={},l={key:o};switch(this.get("configType")){case"BOOLEAN":r=n.defaults({value:"true"===a},l);break;case"INT":r=n.defaults({value:s(a)},l);break;case"MULTISELECT":r=n.defaults({selectedEntry:a,value:a},l);break;default:r=n.defaults({value:a},l)}this.set(r)}}return e.Model.prototype.toJSON.apply(this,arguments)},isNew:function(){return n.isEmpty(this.get(this.idAttribute))},_convertValueToDisplayValue:function(){var e=this.get("value"),t=this.get("configType");return"BOOLEAN"===t&&n.isBoolean(e)?e.toString():"MULTISELECT"===t?this.get("selectedEntry"):e}}),r=e.Collection.extend({model:a,fetch:n.noop,sync:n.noop,initialize:function(e,t){if(t||(t={}),this.platform=t.platform,!this.platform)throw new Error("platform is not provided to ManagedAppConfigs.Collection")},validate:function(t){if(!n.isBoolean(t)&&(t=!1),!t){if(!this._areAllKeysDefined())return{responseJSON:{errorSummary:e.loc("mobile.mobileclientassignments.nativeApp.form.managedappconfig.error.emptyKey")}};if(!this._areAllValuesValid())return{responseJSON:{errorSummary:e.loc("mobile.mobileclientassignments.nativeApp.form.managedappconfig.error.invalidValue")}};if(this._hasDuplicatedKeys())return{responseJSON:{errorSummary:e.loc("mobile.mobileclientassignments.nativeApp.form.managedappconfig.error.duplicatedKey")}}}},_areAllKeysDefined:function(){return this.every(function(e){return!n.isEmpty(e.get("displayKey"))})},_areAllValuesValid:function(){return this.every(function(e){return n.isEmpty(e.validate())})},_hasDuplicatedKeys:function(){for(var e=[],t=0;t<this.length;t++){var s=i.trim(this.at(t).get("displayKey"));if(n.contains(e,s))return!0;e.push(i.trim(s))}return!1}});return{Model:a,Collection:r}}.apply(t,n),!(void 0!==s&&(e.exports=s))},function(e,t,i){var n,s;n=[i(2)],s=function(e){return e.View.extend({className:"help-wrap",template:'\t      <h4>\t        {{i18n code="mobile.mobileclientassignments.nativeApp.list.help.title"}}\t      </h4>\t      <p>\t        {{i18n code="mobile.mobileclientassignments.nativeApp.list.help.content" arguments="appInstanceName"}}\t      </p>\t    ',getTemplateData:function(){return{appInstanceName:this.settings.get("appInstanceName")}}})}.apply(t,n),!(void 0!==s&&(e.exports=s))},function(e,t,i){var n,s;n=[i(2),i(376)],s=function(e,t){var i=e.View.extend({className:"margin-top-15 clearfix",initialize:function(){this.add(t,{options:{model:this.options.appInstanceEASSettingsModel}})}});return i}.apply(t,n),!(void 0!==s&&(e.exports=s))},function(e,t,i){var n,s;n=[i(2)],s=function(e){var t={easEnabled:!0};return e.Form.extend({className:"form-wrap eas-settings",title:e.loc("mobile.eas.form.title"),layout:"o-form-theme",read:!0,modelEvents:{"change:cbaEnabled change:easEnabled change:__edit__":"_toggleInfo",sync:"_updateInputs"},initialize:function(){this._updateInputs(),this.listenTo(this,"save",this._onSave)},readOnly:function(){return this.settings.get("shouldHideEditCapabilities")||!this.settings.hasPermission("manageMobileApp")},_updateInputs:function(){this.empty(),this.addInput({label:e.loc("mobile.eas.form.enable"),type:"checkbox",name:"easEnabled"}),this.addInput({label:e.loc("mobile.eas.form.profileName.label"),type:"text",tooltip:e.loc("mobile.eas.form.profileName.tooltip"),name:"profileName",showWhen:t}),this.addInput({label:e.loc("mobile.eas.form.hostUrl.label"),type:"text",name:"hostURL",readOnly:this.model.get("fixedHostName"),showWhen:t}),this.settings.hasFeature("CERTIFICATE_BASED_EAS")&&"office365"===this.settings.get("appUniqueName")&&(this.addInput({label:e.loc("mobile.eas.form.certBasedAuth.label"),type:"checkbox",placeholder:e.loc("mobile.eas.form.certBasedAuth.placeholder"),name:"cbaEnabled",showWhen:t}),this.infoBox=this.add(e.View.extend({attributes:{"data-se":"cba-info"},className:"help-wrap slim-infobox",template:'\t            <div class="infobox infobox-compact">\t              <p data-se="p1">{{{i18n code="mobile.eas.form.certBasedAuth.enabled.p1.info" arguments="learnMoreLink"}}}</p>\t                <a class="link-button eas-cert-downloader" href="/api/v1/omm/certificates/app/{{instanceId}}/eas/ca">\t                  {{i18n code="mobile.eas.form.certBasedAuth.enabled.downloadRootCert"}}\t                </a>\t                <h3>{{i18n code="mobile.eas.form.certBasedAuth.enabled.crl"}}</h3>\t                <p class="crl-url">{{cdp}}</p>\t                <h3>{{i18n code="mobile.eas.form.certBasedAuth.enabled.deltacrl"}}</h3>\t                <p class="crl-url">{{deltaCdp}}</p>\t              <p data-se="p2">{{i18n code="mobile.eas.form.certBasedAuth.enabled.info.p2"}}</p>\t            </div>\t          ',getTemplateData:function(){var t=e.View.prototype.getTemplateData.apply(this);return t.learnMoreLink="https://help.okta.com/en/prev/Content/Topics/Mobile/Okta_Mobile_Device_Trust.htm",t}})).last(),this.warningBox=this.add(e.View.extend({attributes:{"data-se":"cba-warning"},className:"help-wrap slim-infobox",template:'\t            <p class="infobox infobox-compact infobox-warning">\t            {{i18n code="mobile.eas.form.certBasedAuth.disabled.info"}}\t            </p>'})).last(),this._toggleInfo())},_toggleInfo:function(){var e=this.infoBox&&this.infoBox.$el,t=this.warningBox&&this.warningBox.$el;e&&t&&(this.model.get("easEnabled")?this.model.get("cbaEnabled")?(t.hide(),e.show()):(e.hide(),t.show()):(e.hide(),t.hide()))},_onSave:function(){this.confirm({title:e.loc("mobile.eas.form.save.confirm.title"),content:'\t          <p class="eas-confirm-header">{{i18n code="mobile.eas.form.save.confirm.header"}}</p>\t          <p class="eas-confirm-content">{{i18n code="mobile.eas.form.save.confirm.subtitle.info"}}</p>\t        ',save:e.loc("oform.save"),ok:function(){this.model.cleanup().save()}})}})}.apply(t,n),!(void 0!==s&&(e.exports=s))},function(e,t,i){var n,s;n=[i(2),i(378),i(390),i(395),i(396)],s=function(e,t,i,n,s){var o=e._;return e.MultiViewModalDialog.extend({className:"mobile-settings-dialog",focus:o.noop,params:{minWidth:700,maxWidth:780},resizeOnSwitch:!0,title:function(){return this.options.configurationModel.id?e.loc("mobile.mobileclientassignments.nativeApp.form.title.edit","messages",[this.model.get("name")]):e.loc("mobile.mobileclientassignments.nativeApp.form.title.add")},constructor:function(o){this.configurationModel=o.configurationModel,this.configurationModel.get("isAndroidApp")?this.configurationModel.isNew()&&this.configurationModel.get("isHostedApp")?(this.appPackageIdModel=new s(null,{platform:"ANDROID"}),this.listenTo(this.appPackageIdModel,"form:cancel",this.remove),o.model=this.appPackageIdModel,this.View=new n(o),this.listenTo(o.state,"edit-configuration",this.switchToSettingForm)):(o.model=this.configurationModel,this.View=new i(o)):(o.model=this.configurationModel,this.View=new t(o)),e.MultiViewModalDialog.apply(this,arguments),this.listenTo(this.state,"edit-app-package-id",this.showAppPackageIdForm),this.listenTo(this.state,"mobile-app-configuration-saved",this.remove),this.listenTo(this.configurationModel,"form:cancel",this.remove)},showAppPackageIdForm:function(){this.options.model=this.appPackageIdModel;var e=new n(this.options);this.switchView(e,{prefetch:!1,transition:"none"})},switchToSettingForm:function(e){var t=new i({model:e,state:this.state,settings:this.settings});this.switchView(t,{prefetch:!1,transition:"none"}),this.listenTo(e,"form:cancel",this.remove)}})}.apply(t,n),!(void 0!==s&&(e.exports=s))},function(e,t,i){var n,s;n=[i(2),i(379),i(369),i(388),i(389),i(381)],s=function(e,t,i,n,s,o){var a=e._,r=e.$,l=e.internal.util.TimeUtil.convertTimeFormat,p=e.internal.util.Events,d=o.extend({attributes:{"data-se":"uploaded-file-info"},input:e.View.extend({template:'\t        <div class="blankbox clearfix">\t          <span class="name">{{name}}</span>\t          <span class="version">&nbsp;{{deviceTypeName}}&nbsp;{{versionName}}</span>\t          <p>{{i18n code="mobile.mobileclientassignments.nativeApp.form.uploadedFileInfo.subtitle" \t            bundle="messages" arguments="fileName;formatedUploadedDate"}}</p>\t        </div>\t      ',getTemplateData:function(){return a.extend({},this.model.toJSON(),{formatedUploadedDate:l(this.model.get("uploadDate"),"YYYY-MM-DD"),deviceTypeName:i.getDisplayNameByDeviceType(this.model.get("deviceType")),versionName:i.getAppVersionStringOrEmptyString(this.model.get("appVersion"))})}})});return t.extend({onSave:function(){"upload"===this.model.get("appLocation")&&this.fileUploader&&this.fileUploader.getFilename()?(this.model.set("fileName",this.fileUploader.getDisplayFileName()),r.get("/api/internal/mim/aws/uploadForm").done(a.bind(function(e){this.state.trigger("uploading");var t=this.fileUploader.cloneAndgetFileInput(),i=new s(a.extend({input:t},e)).render();this.listenTo(i,[p.UPLOAD_DONE,p.UPLOAD_EMPTY_CONTENT].join(" "),a.bind(this._onFormUpload,this,e,t))},this))):(this.model.setAppConfigurations(),this.saveAndClose())},addInputs:function(){this.nativeAppsSummary=this.options.nativeAppsSummary,this._addSettingsSection(),this._addPreconfigureSection(),this._addDeploySection()},getValidDistributionOptions:function(){var e=this,t={};return a.each(i.getDistributionOptionSettings(),function(i,n){a.contains(["ALL","IOS"],i.platform)&&(t[n]=i,t[n].disabled="installFromAppStore"===n||e.model.isBoxForEMMApp()&&"manageIfInstalled"===n)}),t},_addSettingsSection:function(){this.addSectionTitle(e.loc("mobile.mobileclientassignments.nativeApp.form.section.settings")),this._addEMMBoxInputs(),this.model.get("isHostedApp")&&this.settings.hasFeature("HOSTED_APPSTORE")&&(this.addInput({type:"select",label:e.loc("mobile.mobileclientassignments.nativeApp.form.appLocation.label"),name:"appLocation",options:{keep:e.loc("mobile.mobileclientassignments.nativeApp.form.appLocation.current"),upload:e.loc("mobile.mobileclientassignments.nativeApp.form.appLocation.update")},showWhen:{fileName:function(e){return!!e},configuredMobileAppId:function(e){return!!e}}}),this.addCustomExplain(d,{showWhen:{appLocation:"keep",platform:"iOS"}}),this.fileUploader=new n({model:this.model,accept:this.model.get("fileExtension")}),this.addInput({input:this.fileUploader,label:e.loc("mobile.mobileclientassignments.nativeApp.form.uploader.label","messages",[this.model.get("fileExtension")]),showWhen:{appLocation:"upload",platform:"iOS"}})),this.addInput({label:e.loc("mobile.mobileclientassignments.nativeApp.form.distribution.label"),input:this.getDistributionOptionInputs()}),this.addDivider()},_addEMMBoxInputs:function(){this.model.isBoxForEMMApp()&&(this.addInput({type:"text",name:"boxPublicId",label:e.loc("mobile.mobileclientassignments.nativeApp.form.emmbox.publicId.label"),tooltip:e.loc("mobile.mobileclientassignments.nativeApp.form.emmbox.publicId.tooltip")}),this.addInput({type:"checkbox",name:"prefillUserName",placeholder:e.loc("mobile.mobileclientassignments.nativeApp.form.emmbox.prefill.placeholder"),label:e.loc("mobile.mobileclientassignments.nativeApp.form.emmbox.prefill.label")}))},_addPreconfigureSection:function(){this.addPreconfigureSection(),this.addDivider()},_addDeploySection:function(){this.addSectionTitle(e.loc("mobile.mobileclientassignments.nativeApp.form.section.deploy")),this.addInput({label:e.loc("mobile.mobileclientassignments.nativeApp.form.deploy.label"),type:"checkbox",name:"toDeploy",placeholder:e.loc("mobile.mobileclientassignments.nativeApp.form.deploy.placeholder"),readOnly:!this.settings.hasPermission("manageMobileApp")}),this.addDeployWarningBox()},_onFormUpload:function(t,i){t.key&&this.model.set("objectKey",t.key);var n=parseInt(t.contentLengthMax,10),s=parseInt(i.get(0).files[0].size,10);if(n>0&&s>n){var o=e.loc("mobile.mobileclientassignments.nativeApp.form.uploader.error.fileSizeExceeded","messages",[(n/1048576).toFixed(2)]);this.model.trigger("error",this.model,{responseJSON:{errorSummary:o}})}else this.saveAndClose()}})}.apply(t,n),!(void 0!==s&&(e.exports=s))},function(e,t,i){var n,s;n=[i(2),i(380),i(381),i(382),i(383)],s=function(e,t,i,n,s){var o=e._,a=e.$,r=e.internal.views.forms.helpers,l=r.ErrorBanner,p=r.ErrorParser,d=i.extend({attributes:{"data-se":"deploy-warning"},input:e.createCallout({type:"warning",title:e.loc("mobile.mobileclientassignments.nativeApp.form.deploy.warning")})});return e.Form.extend({layout:"o-form-wrap",focus:o.noop,hasSavingState:!0,initialize:function(){var i=this;this.listenTo(this,"save",this.onSave),this.listenTo(this.state,"toggleMac",function(){}),this.addInputs(),this.model.get("isUnconfiguredAndroidHostedApp")&&this.addButton({className:"edit-app-package-id",text:e.loc("mobile.mobileclientassignments.nativeApp.form.packageId.edit"),action:function(){i.state.trigger("edit-app-package-id")}}),this.add(t)},addInputs:function(){throw new Error("addInputs() is an abstract method, you need to implement it")},addPreconfigureSection:function(){if(this.settings.hasPermission("manageMobileApp")){var t=this.model.isBoxForEMMApp(),i=this.model.get("configsWithInferredTypes"),o=this.model.get("isAndroidApp")&&i.isEmpty();this.addSectionTitle(e.loc("mobile.mobileclientassignments.nativeApp.form.section.preconfigure")),this.addCustomExplain(n,{readOnly:!0}),t||o||this.addInput({type:"custom",name:"configsWithInferredTypes",label:!1,"label-top":!0,input:s,showWhen:{enableManagedAppConfig:!0}})}},addDeployWarningBox:function(e){this.addCustomExplain(d,{showWhen:o.extend({},{active:!0,toDeploy:!1},e||{})})},addCustomExplain:function(e,t){this.add(e,{selector:".o-form-fieldset-container",options:t||{}})},getDistributionOptionInputs:function(){var e=[],t=this.getValidDistributionOptions();return o.each(t,function(t,i){e.push({type:"checkbox",name:i,placeholder:t.label,disabled:t.disabled})},this),e},getValidDistributionOptions:o.noop,onSave:function(){throw new Error("onSave() is an abstract method, you need to implement it")},saveAndClose:function(){this.model.set("appConfigurations",this.model.get("configsWithInferredTypes").toJSON({readyToSync:!0})),this.model.save().done(o.bind(function(){this.model.get("error")?this._showFormError():(this.state.trigger("mobile-app-configuration-saved"),this.postRemove())},this))},postRemove:o.noop,_addCustomExplain:function(e,t){this.add(e,{selector:".o-form-fieldset-container",options:t})},_showFormError:function(){this.errorMessage&&this.errorMessage.remove(),this.errorMessage=e.createCallout({type:"error",title:e.loc("mobile.mobileclientassignments.nativeApp.form.save.error.title"),subtitle:e.tpl("{{error}}")({error:this.model.get("error")})}),this.add(this.errorMessage,".o-form-error-container"),this.model.trigger("form:resize")},__showErrors:function(t,i){if(this.getAttribute("showErrors")){var n,s=p.parseFieldErrors(i);if(o.size(s)){o.each(s,function(t,i){this.model.trigger("form:field-error",this.__errorFields[i]||i,o.map(t,function(t){return/^model\.validation/.test(t)?e.loc(t):t}))},this);var r=p.getResponseJSON(i);n=r&&r.errorSummary}if(this.$(".o-form-error-container").addClass("o-form-has-errors"),this.add(l,".o-form-error-container",{options:{errorSummary:n}}),this.getAttribute("scrollOnError")){var d=a("#"+this.id+" .o-form-error-container");d.length&&a("#"+this.id+" .o-form-content").animate({scrollTop:0},400)}this.model.trigger("form:resize")}}})}.apply(t,n),!(void 0!==s&&(e.exports=s))},function(e,t,i){var n,s;n=[i(2)],s=function(e){var t=e.internal.views.components.BaseSpinner;return t.extend({className:"mobile-upload-spin-wrapper",children:['<h3>{{i18n code="mobile.mobileclientassignments.nativeApp.form.uploading"}}</h3>'],spinOptions:{position:"relative",top:"96px"},stateEvents:{uploading:"spin"},modelEvents:{"error sync":"empty"}})}.apply(t,n),!(void 0!==s&&(e.exports=s))},function(e,t,i){var n,s;n=[i(2),i(26)],s=function(e){var t=e._,i=e.internal.views.forms.helpers.InputWrapper;return i.extend({input:null,label:"",className:function(){var e="o-form-fieldset";return this.options.readOnly&&(e+=" o-form-read-mode"),e},template:'\t      <div class="okta-form-label o-form-label">\t        <label>{{label}}</label>\t        {{#if tooltip}}\t          <span class="o-form-tooltip icon-16 icon-only form-help-16" data-hasqtip="0" title="{{tooltip}}"></span>\t        {{/if}}\t      </div>\t      <div class="o-form-input"></div>\t    ',initialize:function(){this.options.label=this.label,this.options.tooltip=this.tooltip,this.add(this.input,{selector:".o-form-input",options:t.omit(this.options,"label")})},postRender:function(){this.$(".o-form-tooltip").qtip({style:{classes:"qtip-custom qtip-shadow"},position:{my:"bottom left",at:"top center"},hide:{fixed:!0},show:{delay:0}})}})}.apply(t,n),!(void 0!==s&&(e.exports=s))},function(e,t,i){var n,s;n=[i(2),i(381)],s=function(e,t){return t.extend({attributes:{"data-se":"managed-app-config-explain"},label:e.loc("mobile.mobileclientassignments.nativeApp.form.managedAppConfig.label"),input:e.View.extend({tagName:"span",template:'\t        <p data-se="mac-summary">{{{explainText}}}</p>\t        {{#if showExpandLink}}\t        <p class="o-form-explain">\t          <a href="#" class="mac-expander">{{expanderText}}</a>\t        </p>\t        {{/if}}\t      ',events:{"click .mac-expander":function(e){e.preventDefault(),this.model.set("enableManagedAppConfig",!this.model.get("enableManagedAppConfig"))}},modelEvents:{"change:enableManagedAppConfig":"render"},getTemplateData:function(){return this.model.isBoxForEMMApp()?{explainText:e.loc("mobile.mobileclientassignments.nativeApp.form.managedAppConfig.explain.boxEMM"),showExpandLink:!1}:this.model.get("isAndroidApp")?this._getTemplateDataForAndroidApp():this._getTemplateDataForIOSApp()},_getTemplateDataForAndroidApp:function(){var t,i,n,s=this.model.get("configsWithInferredTypes");if(this.settings.hasFeature("ANDROID_FOR_WORK"))if(s.isEmpty())t=e.loc("mobile.mobileclientassignments.nativeApp.form.managedAppConfig.explain.android.noConfig"),i=!1;else if(this.model.get("isAfwMailApp"))t=e.loc("mobile.mobileclientassignments.nativeApp.form.managedAppConfig.explain.android.autoConfiguredEAS"),i=!1;else{var o=s.where({isSupportedByOkta:!0}).length;t=o>1?e.loc("mobile.mobileclientassignments.nativeApp.form.managedAppConfig.explain.android.hasConfig.plural","messages",[o]):e.loc("mobile.mobileclientassignments.nativeApp.form.managedAppConfig.explain.android.hasConfig.single","messages",[o]),i=!0,n=this.model.get("enableManagedAppConfig")?e.loc("mobile.mobileclientassignments.nativeApp.form.managedAppConfig.expander.hide"):e.loc("mobile.mobileclientassignments.nativeApp.form.managedAppConfig.expander.show")}else t=e.loc("mobile.mobileclientassignments.nativeApp.form.managedAppConfig.explain.noAfW"),i=!1;return{explainText:t,showExpandLink:i,expanderText:n}},_getTemplateDataForIOSApp:function(){var t,i,n=!0,s=this.model.get("configsWithInferredTypes");return s.isEmpty()?(t=e.loc("mobile.mobileclientassignments.nativeApp.form.managedAppConfig.explain.iOS.noConfig"),i=e.loc("mobile.mobileclientassignments.nativeApp.form.managedAppConfig.expander.add")):(t=e.loc("mobile.mobileclientassignments.nativeApp.form.managedAppConfig.explain.iOS.hasConfig"),i=this.model.get("enableManagedAppConfig")?e.loc("mobile.mobileclientassignments.nativeApp.form.managedAppConfig.expander.hide"):e.loc("mobile.mobileclientassignments.nativeApp.form.managedAppConfig.expander.show")),{explainText:t,showExpandLink:n,expanderText:i}}})})}.apply(t,n),!(void 0!==s&&(e.exports=s))},function(e,t,i){var n,s;n=[i(2),i(384)],s=function(e,t){var i=e.internal.views.forms.BaseInput;return i.extend({className:"omm-managed-app-config-input",events:{"click .omm-managed-app-config-add-button":"addConfig"},template:e.tpl('\t      {{#if allowAdd}}\t        <input type="button" class="button omm-managed-app-config-add-button" \t        value="{{i18n code="mobile.mobileclientassignments.nativeApp.form.managedappconfig.add"}}">\t      {{/if}}\t    '),render:function(){var e=this.model;return this.$el.html(this.template({allowAdd:e.get("isIOSApp")})),this.configsWithInferredTypes=this.model.get("configsWithInferredTypes"),this.macList=new t({collection:this.configsWithInferredTypes,mobileAppData:e}),this.configsWithInferredTypes.isEmpty()&&this.addConfig(),this.$el.prepend(this.macList.render().el),this},addConfig:function(){this.configsWithInferredTypes.add({})}})}.apply(t,n),!(void 0!==s&&(e.exports=s))},function(e,t,i){var n,s;n=[i(2),i(385)],s=function(e,t){return e.ListView.extend({className:"omm-managed-app-config-edit-list-container",template:'\t      <span class="o-form-label header-col key-type-col">{{i18n code="mobile.appConfig.list.header.key"}}</span>\t      <span class="o-form-label header-col value-col">\t        <span class="value-col-text">\t          {{i18n code="mobile.appConfig.list.header.value"}}\t        </span>\t        <span class="o-form-explain value-col-link">\t          {{{i18n code="mobile.appConfig.list.header.learn"}}}\t        </span>\t      </span>\t    ',attributes:{"data-se":"omm-managed-app-config-edit-list"},item:t})}.apply(t,n),!(void 0!==s&&(e.exports=s))},function(e,t,i){var n,s;n=[i(2),i(386),i(369)],s=function(e,t,i){var n=e._,s=e.$,o=e.internal.views.forms.inputs,a=o.TextBox,r=o.Select,l=o.SimpleCheckBoxSet;return e.View.extend({className:"o-form-fieldset",events:{"change select":"render"},render:function(){this.model.get("isSupportedByOkta")?e.View.prototype.render.apply(this,arguments):this.$el.hide()},preRender:function(){this.$el.html(""),this.$el.append('<div class="o-form-input o-form-multi-input-3 o-form-multi-input-group-3"></div>'),this._addKeyInput(),this._addArrow(),this._addValueInput(),this._addActionInput()},_addKeyInput:function(){this.keyInput&&this.keyInput.remove(),this.keyInput=this.add(new t({model:this.model,name:["displayKey","configType"],options:i.getManagedAppConfigurationType(this.options.mobileAppData.get("platform")),readOnly:this.options.mobileAppData.get("isAndroidApp")||!this.model.isNew(),mobileAppData:this.options.mobileAppData,to:function(e,t){return e=s.trim(e),[e,t]}}),".o-form-input").last()},_addArrow:function(){this.arrow&&this.arrow.remove(),this.arrow=this.add('\t        <span class="icon icon-only arrow-right-16-gray"></span>\t      ',".o-form-input").last()},_addValueInput:function(){this.valueInput&&this.valueInput.remove();var e,t=this.model.get("configType"),i="ACTIVE"===this.model.get("configStatus"),s={className:"value-input",wide:!0,model:this.model,label:!1,name:"displayValue"};e="BOOLEAN"===t&&i?new r(n.defaults({options:this.model.get("possibleOptions")},s)):"MULTISELECT"===t?new l(n.defaults({disabled:!i,className:"value-input multiselect",options:this.model.get("possibleOptions")},s)):new a(n.defaults({disabled:!i,type:"text"},s)),this.valueInput=this.add(e,".o-form-input").last()},_addActionInput:function(){this.actionInput&&this.actionInput.remove(),this.options.mobileAppData.get("isIOSApp")?this.actionInput=new e.createButton({icon:"cancel-16",click:function(){this.collection.remove(this.model)}}):this.actionInput=new r({className:"status-input",label:!1,model:this.model,name:"configStatus",type:"select",options:{ACTIVE:e.loc("mobile.mobileclientassignments.nativeApp.form.managedappconfig.active"),INACTIVE:e.loc("mobile.mobileclientassignments.nativeApp.form.managedappconfig.inactive")}}),this.actionInput=this.add(this.actionInput,".o-form-input").last()}})}.apply(t,n),!(void 0!==s&&(e.exports=s))},function(e,t,i){var n,s;n=[i(2),i(387),i(26)],s=function(e,t){var i='\t    <span class="key-column-read input-fix">\t      <div class="key-left">\t        <div class="key-title">{{key}}</div>\t        {{#if showTooltip}}\t        <div class="o-form-tooltip icon-16 icon-only form-help-16" data-hasqtip="0" title="{{tooltip}}"></div>\t        {{/if}}\t      </div>\t      <div class="key-right clearfix">{{configType}}</div>\t    </span>\t  ';return t.extend({className:"o-form-input-group key-input",readMode:function(){this.$el.addClass("read-only");var t=this.__toStringValues();return this.$el.html(e.tpl(i)({key:t[0],configType:t[1],showTooltip:!this.model.isNew(),tooltip:e.tpl("<p>{{key}}{{#if title}} ({{title}}){{/if}}</p><p>{{description}}</p>")(this.model.toJSON())})),this.$(".o-form-tooltip").qtip({style:{classes:"qtip-custom qtip-shadow"},position:{my:"bottom left",at:"center center"},hide:{fixed:!0},show:{delay:0}}),this}})}.apply(t,n),!(void 0!==s&&(e.exports=s))},function(e,t,i){var n,s;n=[i(2),i(22)],s=function(e){var t=e._,i=e.internal.views.forms.BaseInput,n=e.internal.views.forms.helpers.FormUtil,s=e.internal.util.Keys,o="o-form-control",a="o-form-has-errors",r=e.tpl('\t    <span class="okta-form-input-field input-fix">\t      <input id="{{inputId}}" type="text" name="{{textName}}" value="{{textValue}}" class="o-form-text" \t        placeholder="{{textPlaceholder}}">\t    </span>\t  '),l=e.tpl('\t    <select name="{{selectName}}">\t      {{#each options}}\t        <option value="{{@key}}">{{this}}</option>\t      {{/each}}\t    </select>\t  ');return i.extend({className:"o-form-input-group",events:{"input input":"update","change input":"update","keydown input":"update","keyup input":function(e){s.isEnter(e)?this.model.trigger("form:save"):s.isEsc(e)&&this.model.trigger("form:cancel")},"change select":"update"},defaultPlaceholder:["",""],constructor:function(e){if(!t.isArray(e.name)||2!==e.name.length)throw new Error("name has to be an array of length 2");if(e.placeholder&&(!t.isArray(e.placeholder)||2!==e.placeholder.length))throw new Error("placeholder has to be an array of length 2");this.names=e.name,i.prototype.constructor.call(this,e)},addModelListeners:function(){this.listenTo(this.model,"form:field-error",function(e){t.contains(this.names,e)&&this.__markError(e)}),this.listenTo(this.model,"form:clear-errors "+n.changeEventString(this.names),this.__clearError)},editMode:function(){var e=this.__getModelValues(),t=r({inputId:this.options.inputId,textName:this.names[0],textValue:e[0],textPlaceholder:this.options.placeholder[0]}),i=l({selectName:this.names[1],options:this.__getSelectOptions()});return"select+text"===this.options.type?this.$el.html(i+t):this.$el.html(t+i),this.$textContainer=this.$("span.input-fix"),this.$textInput=this.$("input"),this.$select=this.$("select"),e[1]&&this.$select.val(e[1]),this.__applyChosen(),this},readMode:function(){return this.$el.text(this.getReadModeString()),this},toStringValue:function(){var e=this.__toStringValues();return"select+text"===this.options.type?e[1]+" "+e[0]:e[0]+" "+e[1]},update:function(){var e=[this.$textInput.val(),this.$select.val()||void 0];t.isFunction(this.to)&&(e=this.to.apply(this,e)),t.isFunction(this.options.to)&&(e=this.options.to.apply(this,e)),this.model.set(t.object(this.names,e))},focus:function(){return this.$textInput.focus()},__applyChosen:function(){t.defer(t.bind(function(){this.$select.chosen({disable_search_threshold:10,placeholder_text:this.options.placeholder[1]}),this.update(),this.$chosenContainer=this.$(".chzn-container"),this.model.trigger("form:resize"),t.defer(t.bind(function(){this.$textContainer.addClass(o),this.$chosenContainer.addClass(o)},this))},this))},__getModelValues:function(){var e=this.model.get(this.names[0]),i=this.model.get(this.names[1]),n=[e,i];if(t.isFunction(this.from)&&(n=this.from.apply(this,n)),t.isFunction(this.options.from)&&(n=this.options.from.apply(this,n)),!t.isArray(n))throw new Error("values are not in an array");if(2!==n.length)throw new Error("values array is not in length of 2");return n},__getSelectOptions:function(){var e=this.options.options;return t.isFunction(e)&&(e=e.call(this)),t.isObject(e)?e:{}},__markError:function(e){var i=t.indexOf(this.names,e);0===i?this.$textContainer.addClass(a):this.$chosenContainer.addClass(a)},__toStringValues:function(){var e=this.__getModelValues();return this.options.options&&(e[1]=this.options.options[e[1]]),e||["",""]}})}.apply(t,n),!(void 0!==s&&(e.exports=s))},function(e,t,i){var n,s;n=[i(2)],s=function(e){var t=e.tpl('\t    <p class="okta-form-input-error o-form-input-error o-form-explain" role="alert">\t      <span class="icon icon-16 error-16-small"></span> {{errorMessage}}\t    </p>\t  ');return e.View.extend({className:"file-input-facade margin-top-10 margin-btm-10 clearfix o-form-control file-upload",events:{"change .m-file":"updateDisplayVal"},template:'\t      <div class="file-upload-wrap">\t        <input type="file" name="file" class="m-file" accept="{{accept}}">\t        <div class="facade">\t          <input type="text" class="file-name-text-field text-field-default" disabled>\t          {{{img src="/img/ui/button/file-browse-01.png" alt="Browse files..." class="browse"}}}\t        </div>\t      </div>\t    ',initialize:function(){this.addModelListeners()},updateDisplayVal:function(){var e=this.formatFileName(this.getFilename());this.updateDisplay(e)},updateDisplay:function(e){this.__clearError(),this.$(".text-field-default").val(e)},cloneAndgetFileInput:function(){var e=this.$('input[type="file"]').detach();return this.render(),e},getFilename:function(){return this.$(".m-file").val()},getDisplayFileName:function(){var e=this.getFilename();return this.formatFileName(e)},formatFileName:function(e){return e.match(/^C:\\fakepath/)&&(e=e.replace("C:\\fakepath\\","")),e},addModelListeners:function(){this.listenTo(this.model,"form:field-error",function(e,t){"file"===e&&this.__markError(t)}),this.listenTo(this.model,"form:clear-errors change:file",this.__clearError),this.listenTo(this.model,"form:clear-error:file",this.__clearError);
},__markError:function(e){this.$el.addClass("o-form-has-errors"),this.$el.addClass("margin-btm-20"),this.$el.removeClass("margin-btm-10"),this.errorMessage&&this.errorMessage.remove(),this.errorMessage=this.add(t({errorMessage:e})).last(),this.model.trigger("form:resize")},__clearError:function(){this.$el.removeClass("o-form-has-errors"),this.$el.addClass("margin-btm-10"),this.$el.removeClass("margin-btm-20"),this.errorMessage&&this.errorMessage.remove(),this.model.trigger("form:resize")}})}.apply(t,n),!(void 0!==s&&(e.exports=s))},function(e,t,i){var n,s;n=[i(2)],s=function(e){var t=e._,i=e.internal.views.uploader.UploadIframe,n=e.internal.util.Events;return e.View.extend({className:"hide",template:'\t      <form method="post" target="{{cid}}" enctype="multipart/form-data"\t            action="https://{{bucket}}.s3.amazonaws.com/">\t      <input type="hidden" name="key" value="{{key}}">\t      <input type="hidden" name="success_action_status" value="{{successActionStatus}}" />\t      <input type="hidden" name="X-Amz-Credential" value="{{xAmzCredential}}">\t      <input type="hidden" name="X-Amz-Algorithm" value="{{xAmzAlgorithm}}">\t      <input type="hidden" name="X-Amz-Date" value="{{xAmzDate}}">\t      <input type="hidden" name="X-Amz-Signature" value="{{xAmzSignature}}">\t      <input type="hidden" name="X-Amz-Security-Token" value="{{xAmzSecurityToken}}">\t      <input type="hidden" name="Policy" value="{{policy}}">\t      <input type="hidden" name="X-Amz-Server-Side-Encryption" value="{{xAmzServerSideEncryptionType}}">\t    ',initialize:function(){this.iframe=this.add(i,{options:{name:this.cid},bubble:!0}).last()},getTemplateData:function(){return t.defaults({cid:this.cid},this.options)},postRender:function(){return this.$el.appendTo("body"),this.$("form").append(this.options.input),this.$("form").submit(),this.listenTo(this.iframe,[n.UPLOAD_DONE,n.UPLOAD_EMPTY_CONTENT].join(" "),this.remove),this}})}.apply(t,n),!(void 0!==s&&(e.exports=s))},function(e,t,i){var n,s;n=[i(2),i(379),i(381),i(391),i(392),i(393),i(394),i(369)],s=function(e,t,i,n,s,o,a,r){var l=e._,p=i.extend({attributes:{"data-se":"reapprove-permissions-warning"},label:e.loc("mobile.mobileclientassignments.nativeApp.form.installPermissions.label"),tooltip:e.loc("mobile.mobileclientassignments.nativeApp.form.installPermissions.tooltip"),input:e.createCallout({type:"warning",title:e.loc("mobile.mobileclientassignments.nativeApp.form.installPermissions.reapprove.warning")})});return t.extend({onSave:function(){var e=[];if(this.model.get("hasAndroidRuntimePermission")){var t=this.model.get("androidRuntimePermissionQuickPick");l.contains(["PROMPT","ALLOW","DENY"],t)&&this.runtimePermissionsCollection.each(function(e){e.set("state",t)}),e=this.runtimePermissionsCollection.toJSON()}this.model.set("permissions",e),this.model.get("isInstallPermissionApprovedInOkta")&&this.model.set("androidInstallPermissionUrl",null),this.model.setAppConfigurations(),this.saveAndClose()},addInputs:function(){this.isAfWEnabled=this.model.isAfWConfiguredForOrg,this._addAndroidForWorkCallout(),this._addSettingsSection(),this._addPermissionsSection(),this._addPreconfigureSection(),this._addDeploySection()},getValidDistributionOptions:function(){var e=this,t={};return l.each(r.getDistributionOptionSettings(),function(i,n){l.contains(["ALL","ANDROID"],i.platform)&&(e.model.isHostedApp&&e.model.isNew()||!i.afwOnly||e.isAfWEnabled)&&(t[n]=i,t[n].disabled="installFromAppStore"===n)}),t},_addAndroidForWorkCallout:function(){this.settings.hasFeature("ANDROID_FOR_WORK")&&!this.model.isAfWConfiguredForOrg&&this.add(e.createCallout({type:"info",title:e.loc("mobile.mobileclientassignments.afw.callout.title"),content:e.tpl('\t            <p>{{i18n code="mobile.mobileclientassignments.afw.callout.content"}}</p>\t            <a data-se="enable-afw" class="button-primary link-button" \t            href="/admin/devices/mobile-policies">\t              {{i18n code="mobile.mobileclientassignments.afw.callout.button"}}\t            </a>\t          ')()}))},_addSettingsSection:function(){this.addSectionTitle(e.loc("mobile.mobileclientassignments.nativeApp.form.section.settings")),this.model.isBoxForEMMApp()?this._addEMMBoxInputs():this.isAfWEnabled&&this.addInput({type:"text",name:"nativeAppId",label:e.loc("mobile.mobileclientassignments.nativeApp.form.packageId.label"),placeholder:e.loc("mobile.mobileclientassignments.nativeApp.form.packageId.placeholder"),tooltip:e.loc("mobile.mobileclientassignments.nativeApp.form.packageId.tooltip"),readOnly:!0,showWhen:{isHostedApp:!0}}),this.addInput({label:e.loc("mobile.mobileclientassignments.nativeApp.form.distribution.label"),input:this.getDistributionOptionInputs()}),this.addDivider()},_addEMMBoxInputs:function(){this.addInput({type:"checkbox",name:"isBoxEmmModeSelected",label:e.loc("mobile.mobileclientassignments.nativeApp.form.emmbox.isSelected.label"),tooltip:e.loc("mobile.mobileclientassignments.nativeApp.form.emmbox.isSelected.tooltip"),disabled:!this.model.isAfWConfiguredForOrg}),this.addInput({type:"text",name:"boxPublicId",label:e.loc("mobile.mobileclientassignments.nativeApp.form.emmbox.publicId.label"),tooltip:e.loc("mobile.mobileclientassignments.nativeApp.form.emmbox.publicId.tooltip"),showWhen:{isBoxEmmModeSelected:!0}}),this.addInput({type:"checkbox",name:"prefillUserName",placeholder:e.loc("mobile.mobileclientassignments.nativeApp.form.emmbox.prefill.placeholder"),label:e.loc("mobile.mobileclientassignments.nativeApp.form.emmbox.prefill.label"),showWhen:{isBoxEmmModeSelected:!0}})},_addPermissionsSection:function(){if(this.isAfWEnabled){this.addSectionTitle(e.loc("mobile.mobileclientassignments.nativeApp.form.section.permissions"));var t=l.bind(function(){return this.model.get("isInstallPermissionApprovedInGoogle")},this);this.model.isNew()||t()||this.add(p),this.add(n),t()||this.addCustomExplain(s,{showWhen:{androidInstallPermissionUrl:function(e){return!l.isEmpty(e)}}});var i=this;this.addInput({label:e.loc("mobile.mobileclientassignments.nativeApp.form.runTimePermissions.label"),tooltip:e.loc("mobile.mobileclientassignments.nativeApp.form.runTimePermissions.tooltip"),type:"select",name:"androidRuntimePermissionQuickPick",readOnly:!this.model.get("hasAndroidRuntimePermission"),options:function(){return this.model.get("hasAndroidRuntimePermission")?r.ANDROID_RUNTIME_PERMISSIONS_QUICK_PICK_OPTIONS:r.NONE_ANDROID_RUNTIME_PERMISSION_OPTION},explain:function(){var t=r.getAndroidRuntimePermissionNames(i.model.get("permissions"));if(t)return e.loc("mobile.mobileclientassignments.nativeApp.form.runTimePermissions.quickPick.explain","messages",[t.join(", ")])}}),this.add('<div class="runtime-permissions-section o-form-fieldset"></div>'),this.runtimePermissionsCollection=new a.Collection(this.model.get("permissions")),this.add(o,{selector:".runtime-permissions-section",options:{collection:this.runtimePermissionsCollection,showWhen:{androidRuntimePermissionQuickPick:"CUSTOMIZE"}}}),this.addDivider()}},_addPreconfigureSection:function(){this.isAfWEnabled&&(this.addPreconfigureSection(),this.addDivider())},_addDeploySection:function(){this.addSectionTitle(e.loc("mobile.mobileclientassignments.nativeApp.form.section.deploy")),this.addInput({label:e.loc("mobile.mobileclientassignments.nativeApp.form.deploy.label"),type:"checkbox",name:"toDeploy",placeholder:e.loc("mobile.mobileclientassignments.nativeApp.form.deploy.placeholder"),readOnly:!this.settings.hasPermission("manageMobileApp")}),this.addDeployWarningBox()}})}.apply(t,n),!(void 0!==s&&(e.exports=s))},function(e,t,i){var n,s;n=[i(2),i(26)],s=function(e){var t=e._,i=e.internal.views.forms.inputs.CheckBox,n=e.internal.views.forms.helpers.FormUtil,s=e.internal.views.forms.helpers.InputWrapper,o=s.extend({input:null,template:'\t      <div class="okta-form-label o-form-label">\t        <label>{{label}}</label>\t        {{#if tooltip}}\t          <span class="o-form-tooltip icon-16 icon-only form-help-16" data-hasqtip="0" title="{{tooltip}}"></span>\t        {{/if}}\t      </div>\t      <div data-se="o-form-input-container" class="o-form-input">\t      </div>\t    ',initialize:function(){this.options.label=t.result(this,"label"),this.options.tooltip=t.result(this,"tooltip"),this.add(this.input,".o-form-input")}});return e.View.extend({attributes:{"data-se":"install-permission-inputs"},className:"o-form-fieldset",initialize:function(){this.add(o.extend({label:function(){return this.model.isNew()||this.model.get("isInstallPermissionApprovedInGoogle")?e.loc("mobile.mobileclientassignments.nativeApp.form.installPermissions.label"):""},tooltip:function(){return this.model.isNew()||this.model.get("isInstallPermissionApprovedInGoogle")?e.loc("mobile.mobileclientassignments.nativeApp.form.installPermissions.tooltip"):""},input:new i({name:"isInstallPermissionApprovedInOkta",type:"checkbox",placeholder:e.loc("mobile.mobileclientassignments.nativeApp.form.installPermissions.approval"),model:this.model,disabled:this.model.get("isInstallPermissionApprovedInGoogle")})})),n.applyShowWhen(this.last(),this.options&&this.options.showWhen),this.listenTo(this.model,"form:field-error",function(e,t){"isInstallPermissionApprovedInOkta"===e&&this.__setError(t)}),this.listenTo(this.model,"form:clear-errors change:isInstallPermissionApprovedInOkta",this.__clearError),this.__errorState=!1},postRender:function(){this.$(".o-form-tooltip").qtip({style:{classes:"qtip-custom qtip-shadow"},position:{my:"bottom left",at:"top center"},hide:{fixed:!0},show:{delay:0}})},__setError:function(t){this.__errorState=!0,this.$(".o-form-input").addClass("o-form-has-errors");var i=['<p class="okta-form-input-error o-form-input-error o-form-explain">','<span class="icon icon-16 error-16-small"></span>',"{{text}}","</p>"].join(""),n=e.tpl(i)({text:t.join(", ")}),s=this.$(".o-form-explain").not(".o-form-input-error");s.length?s.before(n):this.$(".o-form-input").append(n)},__clearError:function(){this.__errorState&&(this.$(".o-form-input-error").remove(),this.$(".o-form-input").removeClass("o-form-has-errors"),this.__errorState=!1,t.defer(t.bind(function(){this.model.trigger("form:resize")},this)))}})}.apply(t,n),!(void 0!==s&&(e.exports=s))},function(e,t,i){var n,s;n=[i(2),i(381)],s=function(e,t){var i=e.$;return t.extend({attributes:{"data-se":"android-app-install-permissions"},className:"o-form-fieldset iframe-input",input:e.View.extend({className:"iframe-div",template:'\t        <iframe src="{{androidInstallPermissionUrl}}"></iframe>\t      ',modelEvents:{"change:androidInstallPermissionUrl":"render"}}),postRender:function(){setTimeout(function(){var e=i(".iframe-div iframe");e.attr("src",e.attr("src"))},1e3)}})}.apply(t,n),!(void 0!==s&&(e.exports=s))},function(e,t,i){var n,s;n=[i(2),i(369)],s=function(e,t){var i=e._,n=e.internal.views.forms.helpers.InputWrapper,s=e.internal.views.forms.helpers.FormUtil,o=e.internal.views.forms.inputs.Select,a=n.extend({input:null,className:"o-form-fieldset",template:'\t      <div class="okta-form-label o-form-label"></div>\t      <div class="o-form-input">\t        <div class="o-form-fieldset o-form-label-top">\t          <div class="okta-form-label o-form-label">{{label}}</div>\t          <div class="o-form-input"></div>\t        </div>\t      </div>\t    ',initialize:function(){this.options.label=this.label,this.add(this.input,".o-form-input .o-form-input")}});return e.View.extend({attributes:{"data-se":"android-app-customize-runtime-permissions"},initialize:function(){i.each(this.collection.models,function(e){this.add(a.extend({label:e.get("displayName"),input:new o({"label-top":!0,name:"state",type:"select",model:e,options:t.ANDROID_RUNTIME_PERMISSION_OPTIONS})})),s.applyShowWhen(this.last(),this.options&&this.options.showWhen)},this)}})}.apply(t,n),!(void 0!==s&&(e.exports=s))},function(e,t,i){var n,s;n=[i(2)],s=function(e){var t=e.Model.extend({props:{name:"string",state:"string",displayName:"string",configuredMobileAppPermisisonId:"string"},initialize:function(e){e||(e={}),this.set(e)}}),i=e.Collection.extend({model:t});return{Model:t,Collection:i}}.apply(t,n),!(void 0!==s&&(e.exports=s))},function(e,t,i){var n,s;n=[i(2)],s=function(e){var t=e._,i=e.$;return e.Form.extend({hasSavingState:!0,layout:"o-form-wrap",save:e.loc("mobile.mobileclientassignments.nativeApp.form.packageId.config"),initialize:function(){this.listenTo(this,"save",this.onSave),this.addInput({type:"text",name:"nativeAppId",label:e.loc("mobile.mobileclientassignments.nativeApp.form.packageId.label"),placeholder:e.loc("mobile.mobileclientassignments.nativeApp.form.packageId.placeholder"),tooltip:e.loc("mobile.mobileclientassignments.nativeApp.form.packageId.tooltip"),to:function(e){if(t.isString(e))return i.trim(e)},render:function(){this.$el.find("input").attr("autocomplete","off")}})},onSave:function(){this.state.invoke("fetchSettingsData",{settingsModel:this.model})}})}.apply(t,n),!(void 0!==s&&(e.exports=s))},function(e,t,i){var n,s;n=[i(2)],s=function(e){return e.Model.extend({props:{androidInstallPermissionUrl:"string",appConfigurations:"array",permissions:"array"},local:{approveAndroidOktaMobileAppInstallPermission:["boolean",!1,!1],nativeAppId:"string"},initialize:function(e,t){e||(e={}),t||(t={}),t.platform||(t.platform="ANDROID"),this.platform=t.platform,this.set(e)},url:function(){return e.tpl("/api/internal/v1/mobile/app/settings?platform={{platform}}&nativeAppId={{nativeAppId}}")({platform:this.platform,nativeAppId:this.get("nativeAppId")})},isAndroidOktaMobileApp:function(){return"ANDROID"===this.platform&&"com.okta.android.mobile.oktamobile"===this.get("nativeAppId")},validate:function(t){var i=[];return this.isAndroidOktaMobileApp()&&t.androidInstallPermissionUrl&&!t.approveAndroidOktaMobileAppInstallPermission&&(i.approveAndroidOktaMobileAppInstallPermission=e.loc("policies.mobile.afw.oktaMobile.approvePermission.error")),i}})}.apply(t,n),!(void 0!==s&&(e.exports=s))},function(e,t,i){var n,s;n=[i(2)],s=function(e){var t=e._,i=e.tpl("/api/v1/internal/apps/{{instanceId}}/settings/eas"),n=e.Model.extend({props:{easEnabled:["boolean",!1],instanceId:["string",!1],hostURL:["string",!1],profileName:["string",!1],sslEnabled:["boolean",!1],fixedHostName:["boolean",!0],cbaEnabled:["boolean",!1],cdp:["string",!1,null],deltaCdp:["string",!1,null]},urlRoot:function(){return i({instanceId:this.get("instanceId")})},initialize:function(e,t){if(t&&t.appInstanceId&&this.set("instanceId",t.appInstanceId),!this.get("instanceId"))throw"Cannot initialize EASSetting without an app instance id."},validate:function(){var i={};return this.get("easEnabled")!==!0||t.isString(this.get("profileName"))&&""!==this.get("profileName").trim()||(i.profileName=e.loc("mobile.mobileclientassignments.eas.settings.profileName.error.blankValue")),i},cleanup:function(){return this.get("easEnabled")||this.unset("cbaEnabled",{silent:!0}),this}});return{Model:n}}.apply(t,n),!(void 0!==s&&(e.exports=s))},function(e,t,i){var n,s;n=[i(2)],s=function(e){var t=e._;return e.Model.extend({idAttribute:"enterpriseId",props:{enterpriseId:"string",token:"string",primaryDomain:"string",googleAppInstanceId:"string",enrolledDeviceCount:"number",deactiveAppsCount:"number"},local:{signOnMode:{type:"string",values:["SAML_2_0","BROWSER_PLUGIN"]},afwOnly:"boolean"},urlRoot:"/api/internal/v1/afw/enrollment",sync:function(i,n,s){return"create"===i&&t.each(n.attributes,function(e,i){(t.isUndefined(e)||t.isNull(e))&&n.unset(i,{silent:!0})}),e.Model.prototype.sync.call(this,i,n,s)}})}.apply(t,n),!(void 0!==s&&(e.exports=s))},function(e,t,i){var n,s;n=[i(2),i(154),i(400),i(401),i(411)],s=function(e,t,i,n,s){var o=e._,a=e.$;return e.Controller.extend({REFETCH_INTERVAL:3e4,state:{mode:"",agents:[]},stateEvents:{"change:mode":"_renderMasterView"},modelEvents:{request:"_showSpinner","invalid error sync":"_removeSpinner"},initialize:function(){this.agents=new t.Collection,this.model=new i.Model({appInstanceId:this.settings.get("appInstanceId")}),this.state.set("agents",this.agents)},postRender:function(){a.when(this._fetchAgents(),this.model.fetch()).always(o.bind(this._handleDataFetched,this))},_handleDataFetched:function(){this._setMode();var e=this.state.get("mode");"NO_AGENT"===e&&(this.listenTo(this.agents,"update",this._setMode),this._tryRefetchAgents()),"CONNECTOR_CREATED"!==e&&this.listenTo(this.model,"sync",this._reload)},_setMode:function(){0===this.agents.length?this.state.set("mode","NO_AGENT"):this.model.isNew()?this.state.set("mode","NO_CONNECTOR"):this.state.set("mode","CONNECTOR_CREATED")},_fetchAgents:function(e){return this.agents.fetch({data:{withStatus:"ACTIVE"}}).then(e||o.noop)},_tryRefetchAgents:function(){if(!this.agents.length){var e=o.bind(this._tryRefetchAgents,this);o.delay(o.bind(this._fetchAgents,this,e),this.REFETCH_INTERVAL)}},_renderMasterView:function(){this.empty(),this.add(new n(this.toJSON()))},_reload:function(){window.location.reload(!0)},_showSpinner:function(){this.spinnerModal=new s(this.toJSON()),this.spinnerModal.render()},_removeSpinner:function(){this.spinnerModal&&this.spinnerModal.remove()}})}.apply(t,n),!(void 0!==s&&(e.exports=s))},function(e,t,i){var n,s;n=[i(2)],s=function(e){var t=e._,i=e.tpl("/api/v1/apps/{{appInstanceId}}/connector"),n=e.tpl("/api/v1/apps/{{appInstanceId}}/connector/test"),s=e.BaseModel.extend({idAttribute:"url",defaults:function(){return{url:void 0,appInstanceId:void 0,agents:[],connectorType:"SCIM",features:void 0,userManagementModeType:"ONPREM",authenticationType:void 0,userName:void 0,password:void 0,headerName:void 0,headerValue:void 0,userIdentifyFieldName:void 0,storeReturnedAppUserFields:void 0,timeoutSeconds:void 0}},url:function(){return i({appInstanceId:this.get("appInstanceId")})},sync:function(i,n,s){"update"==i&&(i="create");var o=t.extend({},n.attributes);n.attributes=n.normalize();var a=e.BaseModel.prototype.sync.call(this,i,n,s);return n.attributes=o,a},parse:function(e){var i=e.authenticationSettings,n=t.extend({},e,{authenticationType:i.authenticationType,userName:i.credentials&&i.credentials.userName||void 0,password:i.credentials&&i.credentials.password||void 0});if(!t.isEmpty(i.headers)){var s=t.pairs(i.headers);if(1!==s.length)throw"more then 1 header is defined, please check the form again";n.headerName=s[0][0],n.headerValue=s[0][1]}var o=t.map(e.agents,function(e){return{id:e.id,label:e.name}});return n.agents=o,delete n.authenticationSettings,n},normalize:function(){var e=t.extend({},this.attributes),i=t.extend({},e,{authenticationSettings:{authenticationType:e.authenticationType,credentials:{userName:e.userName,password:e.password}}}),n={};n[e.headerName]=e.headerValue,i.authenticationSettings.headers=n;var s=[];return t.each(e.agents,function(e){s.push({id:e.id,name:e.label})}),i.agents=s,this.__deleteTopLevelUnUsedElements(i),i},__deleteTopLevelUnUsedElements:function(e){delete e.authenticationType,delete e.userName,delete e.password,delete e.headers,delete e.headerName,delete e.headerValue}}),o=s.extend({url:function(){return n({appInstanceId:this.get("appInstanceId")})}});return{Model:s,TestModel:o}}.apply(t,n),!(void 0!==s&&(e.exports=s))},function(e,t,i){var n,s;n=[i(2),i(402),i(403),i(405)],s=function(e,t,i,n){var s=e.$;return e.View.extend({modeToView:{NO_AGENT:t,NO_CONNECTOR:i,CONNECTOR_CREATING:n,CONNECTOR_CREATED:n},className:function(){return this.settings.hasFeature("PROVISIONING_SETTINGS_UI")?"":"form-wrap"},postRender:function(){var e=!0,i=this.state.get("mode"),n=this.modeToView[i]||t;return"CONNECTOR_CREATED"===i&&(s(this.settings.get("provisionSettingsForm")).show(),e=!1),this.add(n),this.state.trigger("done:opprender",e),this}})}.apply(t,n),!(void 0!==s&&(e.exports=s))},function(e,t,i){var n,s;n=[i(2)],s=function(e){var t=e.tpl('\t      <ol class="instructions-list">\t      <li><span>{{i18n code="appinstance.opp.noagent.step1"}}</span>\t        <a href="https://support.okta.com/articles/Knowledge_Article/29448976-Configuring-On-Premises-Provisioning#installing"\t           target="_blank" class="noagent-help-links">{{i18n code="appinstance.opp.install.agent.link.text"}}</a>\t        <div class="download-button"></div>\t      </li>\t      <li><span>{{i18n code="appinstance.opp.noagent.step2" arguments="appName"}}</span>\t        <a href="https://support.okta.com/articles/Knowledge_Article/30093436-Creating-SCIM-Connectors"\t           target="_blank" class="noagent-help-links">{{i18n code="appinstance.opp.write.scim.read.more"}}</a>\t      </li>\t      </ol>');return e.View.extend({initialize:function(){var i=this.settings.get("appName");this.add(e.createCallout({title:e.loc("appinstance.opp.noagent.title","messages",[i]),subtitle:e.loc("appinstance.opp.noagent.subtitle"),content:t({appName:i})})),this.add(e.createButton({title:e.loc("appinstance.opp.noagent.download.agent.button"),className:"download-provisioning-agent-button button-primary",attributes:{target:"_blank"},href:"/admin/settings/downloads/agents/OPP"}),"div.download-button")}})}.apply(t,n),!(void 0!==s&&(e.exports=s))},function(e,t,i){var n,s;n=[i(2),i(404)],s=function(e,t){var i=e.tpl('<p>{{i18n code="appinstance.opp.noconnector" arguments="appName;appName;appName"}}</p>'+t),n=e.tpl('{{i18n code="appinstance.opp.active.connectors" arguments="agentsCount"}}');return e.Form.extend({layout:"o-form-theme ",title:e.loc("appinstance.opp.noconnector.title"),noCancelButton:!0,save:e.loc("appinstance.opp.noconnector.title"),initialize:function(){this.add(e.createCallout({content:i({appName:this.settings.get("appName")})}));var t=this.state.get("agents").length;this.add(e.createCallout({title:n({agentsCount:t}),type:"success"})),this.listenTo(this,"save",this.doSave)},doSave:function(){this.state.set("mode","CONNECTOR_CREATING")}})}.apply(t,n),!(void 0!==s&&(e.exports=s))},function(e,t,i){var n;n=function(){var e='<ul class="bullets">\t        <li>\t        <a href="https://support.okta.com/articles/Knowledge_Article/29448976-Configuring-On-Premises-Provisioning#installing"\t           target="_blank">{{i18n code="appinstance.opp.resource.install.agent"}}</a>\t        </li>\t        <li>\t        <a href="https://support.okta.com/articles/Knowledge_Article/30093436-Creating-SCIM-Connectors"\t           target="_blank">{{i18n code="appinstance.opp.resource.write.connector"}}</a>\t        </li>\t        </ul>';return e}.call(t,i,t,e),!(void 0!==n&&(e.exports=n))},function(e,t,i){var n,s;n=[i(2),i(406),i(404),i(400),i(408)],s=function(e,t,i,n,s){var o=e._,a=e.tpl('<p>{{i18n code="appinstance.opp.config.connector" arguments="appName;appName"}}</p>'+i);return e.Form.extend({layout:"o-form-theme rounded-0",attributes:{name:"CONNECTOR-CONFIG",class:"clearfix margin-btm-10"},title:e.loc("appinstance.opp.config.connector.title"),read:!0,SLIDE_TIME:400,autoSave:!0,stateEvents:{"test:connector":"_showModal"},modelEvents:{sync:"_cleanupEditModelExtraElements","change:__edit__":"_cleanupEditModelExtraElements _addFormMsg _addTestButton"},initialize:function(){this._editModeExtraElements=[],this._setEditModeStatus(),this._addFormMsg(),this._addInputs(),this._addTestButton(),this.listenTo(this,"cancel",function(){"CONNECTOR_CREATING"===this.state.get("mode")&&this.state.set("mode","NO_CONNECTOR")})},_setEditModeStatus:function(){this.model.set("__edit__","CONNECTOR_CREATING"===this.state.get("mode"),{silent:!0})},_addFormMsg:function(){if(this.model.get("__edit__")){if("CONNECTOR_CREATING"===this.state.get("mode")){var t=this.add(e.createCallout({subtitle:e.loc("appinstance.opp.config.connector.provisioning.settings")}),void 0,!1,!0).last();this._editModeExtraElements.push(t)}var i=this.add(e.createCallout({content:a({appName:this.settings.get("appName")})}),void 0,!1,!0).last();this._editModeExtraElements.push(i)}},_addTestButton:function(){if(this.model.get("__edit__")){var t=this.add(e.createButton({icon:"confirm-16-small",title:e.loc("appinstance.opp.config.connector.test.button"),className:"test-connector-button",click:function(){this.state.trigger("test:connector")}})).last();this._editModeExtraElements.push(t)}},_cleanupEditModelExtraElements:function(){o.each(this._editModeExtraElements,function(e){e.remove()},this),this._editModeExtraElements=[]},_addInputs:function(){this.addInput({type:"text",name:"url",label:e.loc("appinstance.opp.config.connector.base.url"),tooltip:e.loc("appinstance.opp.config.connector.base.url.tooltip")}),this.addInput({type:"select",name:"authenticationType",label:e.loc("appinstance.opp.config.connector.auth.type"),options:{BASIC:e.loc("appinstance.opp.config.connector.auth.type.basic"),NONE:e.loc("appinstance.opp.config.connector.auth.type.none"),HEADER:e.loc("appinstance.opp.config.connector.auth.type.http.header")}}),this.addInput({label:e.loc("appinstance.opp.config.connector.basic.auth"),multi:2,input:[{type:"text",placeholder:e.loc("appinstance.opp.config.connector.basic.auth.username"),name:"userName"},{type:"password",placeholder:e.loc("appinstance.opp.config.connector.basic.auth.password"),name:"password"}],showWhen:{authenticationType:"BASIC"}}),this.addInput({label:e.loc("appinstance.opp.config.connector.http.header"),multi:1,input:[{type:"text",placeholder:e.loc("appinstance.opp.config.connector.http.header.name"),name:"headerName"},{type:"text",placeholder:e.loc("appinstance.opp.config.connector.http.header.value"),name:"headerValue"}],showWhen:{authenticationType:"HEADER"}}),this.addInput({type:"text",name:"userIdentifyFieldName",label:e.loc("appinstance.opp.config.connector.unique.username"),tooltip:e.loc("appinstance.opp.config.connector.unique.username.tooltip")}),this.addInput({type:"checkbox",name:"storeReturnedAppUserFields",label:e.loc("appinstance.opp.config.connector.accept.user.updates"),placeholder:e.loc("appinstance.opp.config.connector.accept.user.updates.placeholder"),tooltip:e.loc("appinstance.opp.config.connector.accept.user.updates.tooltip")}),this.addInput({type:"select",name:"timeoutSeconds",label:e.loc("appinstance.opp.config.connector.timeout"),tooltip:e.loc("appinstance.opp.config.connector.timeout.tooltip"),options:{30:"30 seconds",60:"60 seconds",90:"90 seconds",120:"120 seconds"}});var i=this.state.get("agents").map(function(e){return{id:e.get("id"),label:e.get("name")}},this);this.addInput({label:e.loc("appinstance.opp.config.connector.connect.to"),input:new t({model:this.model,name:"agents",checkBoxes:i})}),this.model.trigger("change:authenticationType")},_showModal:function(){var e=new n.TestModel(this.model.toJSON());this.dialog=new s(o.extend({},this.options,{model:e})),this.dialog.render(),e.save()}})}.apply(t,n),!(void 0!==s&&(e.exports=s))},function(e,t,i){var n,s;n=[i(2),i(407)],s=function(e,t){var i=e._,n=e.internal.views.forms.BaseInput;return n.extend({constructor:function(e){n.apply(this,arguments),this.checkBoxes=i.map(e.checkBoxes,function(e){var n=new t(i.extend({model:this.options.model,name:this.options.name},e));return this.listenTo(n,"update",this.update),n},this)},val:function(){var e=[];return i.each(this.checkBoxes,function(t){if(t.val()){var n=i.find(this.options.checkBoxes,function(e){return e.id==t.options.inputId},this);e.push(n)}},this),e},editMode:function(){return i.each(this.checkBoxes,function(e){e.editMode(),this.$el.append(e.$el)},this),this},readMode:function(){return this.editMode(),i.each(this.checkBoxes,function(e){var t=e.$(":checkbox");t.prop("disabled",!0)},this),this}})}.apply(t,n),!(void 0!==s&&(e.exports=s))},function(e,t,i){var n,s;n=[i(2)],s=function(e){var t=e._,i=e.internal.views.forms.inputs.CheckBox;return i.extend({update:function(){this.trigger("update")},getModelValue:function(){var e=this.model.get(this.options.name),i=!!t.find(e,function(e){return e.id==this.options.inputId},this);return i}})}.apply(t,n),!(void 0!==s&&(e.exports=s))},function(e,t,i){var n,s;n=[i(2),i(138),i(409),i(410)],s=function(e,t,i,n){return e.ModalDialog.extend({title:e.loc("appinstance.opp.spinner.dialog.title"),template:'\t      <div class="simplemodal-content"></div>\t      {{#unless noButtonBar}}\t      <div class="button-bar clearfix button-bar-border-top">\t        <input type="button" class="button cancel" value="{{i18n code="simplemodal.close"}}" />\t      </div>\t      {{/unless}}\t    ',params:{minWidth:440,autoResize:!0,focus:!1},events:{"click input.cancel":"remove","click .simplemodal-close":"remove"},modelEvents:{sync:"showFeatures","invalid error":"showError"},initialize:function(){e._.extend(this.params,this.options.params||{}),this.loadingView=new n({settings:this.settings}),this.add(this.loadingView,".simplemodal-content")},_cleanAndResize:function(){this.loadingView&&this.loadingView.remove(),this.resize()},showFeatures:function(e){this.add(new i({features:e.get("features")}),".simplemodal-content"),this._cleanAndResize()},showError:function(e,i){var n=new t({errors:JSON.parse(i.responseText).errorCauses});this.add(n,".simplemodal-content"),n.$el.addClass("margin-20"),this._cleanAndResize()}})}.apply(t,n),!(void 0!==s&&(e.exports=s))},function(e,t,i){var n,s;n=[i(2)],s=function(e){var t=e._,i=e.tpl('\t    <ul class="border-list white-bg">\t      {{#each features}}\t        {{#if featureDisplayName}}\t          <li class="padding-10">\t            {{featureDisplayName}}\t            <span class="icon-only icon-16 float-r {{icon}}"></span>\t          </li>\t        {{/if}}\t      {{/each}}\t    </ul>\t  '),n=e.View.extend({className:"padding-20 button-bar-border-top",initialize:function(){this.add(e.createCallout({title:e.loc("appinstance.opp.test.success.dialog.message.header"),type:"success"})),this.add('<p class="opp-connector-features-title">{{i18n code="appinstance.opp.test.success.dialog.message"}}</p>'),t.each(this.options.features,function(e){e.featureDisplayName&&(e.icon=e.enabled?"confirm-16-small":"cancel-16-small-red")},this),this.add(i(this.options))}});return n}.apply(t,n),!(void 0!==s&&(e.exports=s))},function(e,t,i){var n,s;n=[i(2),i(42)],s=function(e){var t={lines:9,length:0,width:8,radius:20,corners:1,rotate:23,direction:1,color:"#666",speed:.8,trail:50,shadow:!1,hwaccel:!1,className:"",zIndex:2e9,top:"50px",left:"50%"},i=e.View.extend({tagName:"div",className:"modal-loading-wrap",template:'<h3 class="modal-loading-msg text-light bold">{{i18n code="appinstance.opp.loading"}}</h3>',postRender:function(){this.$el.spin(t)}});return i}.apply(t,n),!(void 0!==s&&(e.exports=s))},function(e,t,i){var n,s;n=[i(2),i(410)],s=function(e,t){return e.ModalDialog.extend({title:e.loc("appinstance.opp.spinner.dialog.title"),params:{minWidth:440,autoResize:!0,focus:!1,close:!0},initialize:function(){this.loadingView=new t({settings:this.settings}),this.add(this.loadingView)}})}.apply(t,n),!(void 0!==s&&(e.exports=s))},function(e,t,i){var n,s;n=[i(2),i(413),i(415)],s=function(e,t,i){return e.Controller.extend({initialize:function(){this.roadblockSettings=new i.Model({},{orgId:this.options.orgId});var e=this;this.roadblockSettings.fetch().done(function(){e.add(new t({model:e.roadblockSettings,editMode:e.options.editMode}))})}})}.apply(t,n),!(void 0!==s&&(e.exports=s))},function(e,t,i){var n,s;n=[i(2),i(414)],s=function(e,t){return e.View.extend({template:'\t      {{__displayPercentage__}}% \t      {{# if __isDefaultPercentage__}}\t        (default) \t      {{/if}}\t      {{#if editMode}}\t        <a class="roadblock-threshold-edit-link" href="#">edit</a>\t      {{/if}}\t    ',events:{"click .roadblock-threshold-edit-link":"handleEditClick"},handleEditClick:function(e){e.preventDefault();var i=new t({model:this.model});i.render(),this.listenTo(i,"saved",this.fetchModelData)},fetchModelData:function(){var e=this;this.model.fetch().done(function(){e.render()})}})}.apply(t,n),!(void 0!==s&&(e.exports=s))},function(e,t,i){var n,s;n=[i(2)],s=function(e){var t=e._,i=e.internal.views.forms.inputs.NumberBox;return e.FormDialog.extend({className:"roadblock-threshold-form",title:"Max Import Unassignment",autoSave:!0,showErrors:!0,hasSavingState:!0,initialize:function(){this.model.fetch().done(t.bind(function(){
var t=this.model.get("percentage"),n=this.model.get("globalPercentage");switch(t){case-1:this.model.set("__percentageType__","default");break;default:this.model.set("__percentageType__","custom")}this.add(e.createCallout({className:"roadblock-threshold-info-text",type:"info",content:"\t            Halts any import which exceeds this number of app unassignments. \t            This action prevents accidental loss of user accounts.\t          "}));var s={};s.default="Default ("+n+"%)",s.custom="Custom",this.addInput({type:"radio",className:"margin-top-15",name:"__percentageType__",options:s,label:"Max Import Unassignment",bindings:{__percentageType__:function(e){"custom"==e&&this.model.get("percentage")==-1?this.model.set("percentage",n):"default"==e&&this.model.set("percentage",-1)}}});var o=i.extend({template:e.tpl('\t            <span class="input-fix o-form-control">\t              <input type="{{type}}"\t                placeholder="{{placeholder}}"\t                name="{{name}}"\t                id="{{inputId}}"\t                value="{{value}}"/>\t            </span>\t            <span class="o-form-label-inline">%</span>\t          '),postRender:function(){this.$el.removeClass(),this.$el.addClass("o-form-input-group")}}),a=this;this.addInput({className:"roadblock-threshold-input-percentage",input:o,type:"number",name:"percentage",showWhen:{__percentageType__:"custom"},params:{min:-1,max:100,step:1},initialize:function(){this.listenTo(a.model,"change:__percentageType__",this.render)}});var r=e.View.extend({className:"roadblock-threshold-percentage-explain",template:'\t            <div class="o-form-fieldset">\t              <div class="okta-form-label o-form-label"></div>\t              <div class="o-form-input">\t                {{#if appAssignmentCount}}\t                  ({{__appUnassignmentDisplayCount__}} out of {{appAssignmentCount}} app assignments)<br />\t                {{/if}}\t                This setting affects all apps with imports enabled.\t              </div>\t            </div>\t          ',initialize:function(){this.listenTo(this.model,"change",this.render)}});this.add(r)},this))}})}.apply(t,n),!(void 0!==s&&(e.exports=s))},function(e,t,i){var n,s;n=[i(2)],s=function(e){var t=e.tpl("/api/internal/v1/roadblock/{{orgId}}/settings"),i=e.Model.extend({props:{orgId:["string",!1],percentage:"number",appAssignmentCount:["number",!0],globalMinAppAssignmentCount:["number",!0],globalPercentage:["number",!0]},derived:{__appUnassignmentDisplayCount__:{deps:["percentage","appAssignmentCount","globalPercentage"],fn:function(e,t,i){var n=e;return e==-1&&(n=i),Math.ceil(t*n/100)}},__displayPercentage__:{deps:["percentage","globalPercentage"],fn:function(e,t){return e==-1?t:e}},__isDefaultPercentage__:{deps:["percentage"],fn:function(e){return e==-1}}},local:{__percentageType__:"string"},initialize:function(e,t){t&&(this.orgId=t.orgId)},url:function(){return t({orgId:this.orgId})}});return{Model:i}}.apply(t,n),!(void 0!==s&&(e.exports=s))},function(e,t,i){var n,s;n=[i(2),i(417),i(418)],s=function(e,t,i){var n=e.$;return e.Controller.extend({View:t,initialize:function(){this.$el=n(this.options.vpnsettingscontainer),this.model=new i.Model(null,{instanceId:this.options.appInstanceId,backwardsCompatibilityForZones:this.settings.hasFeature("NETWORK_ZONES")}),this.model.fetch()}})}.apply(t,n),!(void 0!==s&&(e.exports=s))},function(e,t,i){var n,s;n=[i(2)],s=function(e){return e.Form.extend({title:e.loc("vpnsettings.vpn_notification","messages"),layout:"o-form-theme",read:!0,autoSave:!0,readOnly:function(){return this.settings.get("shouldHideEditCapabilities")||!this.settings.hasPermission("manage")||!this.settings.hasPermission("active")},initialize:function(){var t=this.settings.hasFeature("NETWORK_ZONES"),i=t?{DISABLED:e.loc("vpnsettings.disabled","messages"),ZONE_IN:e.loc("vpnsettings.zoneIn","messages"),ZONE_OUT:e.loc("vpnsettings.zoneOut","messages"),ANYWHERE:e.loc("vpnsettings.anywhere","messages")}:{DISABLED:e.loc("vpnsettings.disabled","messages"),OFF_NETWORK:e.loc("vpnsettings.offNetwork","messages"),ON_NETWORK:e.loc("vpnsettings.onNetwork","messages"),ANYWHERE:e.loc("vpnsettings.anywhere","messages")};this.addInput({type:"select",options:i,name:"vpnLocationOptions",errorField:"vpnLocationOptions",label:e.loc("vpnsettings.vpn_required_notification","messages")}),this.addInput({type:"textarea",name:"message",className:"vpn-message",label:e.loc("vpnsettings.messages","messages"),tooltip:e.loc("vpnsettings.tooltip","messages"),explain:e.View.extend({template:'See <a href="{{href}}">network settings</a> for configuration information.',getTemplateData:function(){var e=t?"network":"network-settings";return{href:"/admin/access/"+e}}}),showWhen:{vpnLocationOptions:function(e){return"DISABLED"!==e}}}),this.addInput({type:"text",name:"helpUrl",label:e.loc("vpnsettings.helpUrl","messages"),tooltip:e.loc("vpnsettings.helpUrl.tooltip","messages"),showWhen:{vpnLocationOptions:function(e){return"DISABLED"!==e}}})}})}.apply(t,n),!(void 0!==s&&(e.exports=s))},function(e,t,i){var n,s;n=[i(2)],s=function(e){var t=e._,i=e.tpl("/api/v1/internal/vpn/admin/instance/{{instanceId}}/vpnsettings");return{Model:e.BaseModel.extend({flat:!0,defaults:{message:"",helpUrl:""},initialize:function(e,t){t&&t.instanceId&&(this.instanceId=t.instanceId),t&&t.backwardsCompatibilityForZones&&(this._applyZonesBackwardsCompatibilityFix=t.backwardsCompatibilityForZones)},urlRoot:function(){return i(e._.pick(this,"instanceId"))},toJSON:function(){var t=e.BaseModel.prototype.toJSON.apply(this,arguments);delete t.vpnSettingsZones;var i=t.vpnLocationOptions;if(i&&["ZONE_IN","ZONE_OUT"].indexOf(i)!==-1)switch(t.vpnLocationOptions="ZONE",i){case"ZONE_IN":t.vpnSettingsZones={include:["ALL_ZONES"]};break;case"ZONE_OUT":t.vpnSettingsZones={exclude:["ALL_ZONES"]}}return t},parse:function(e){var i=e&&e.vpnLocationOptions;if("ZONE"===i){var n=e.vpnSettingsZones&&e.vpnSettingsZones.include;e.vpnLocationOptions=t.isEmpty(n)?"ZONE_OUT":"ZONE_IN"}return this._applyZonesBackwardsCompatibilityFix&&("ON_NETWORK"===e.vpnLocationOptions?e.vpnLocationOptions="ZONE_IN":"OFF_NETWORK"===e.vpnLocationOptions&&(e.vpnLocationOptions="ZONE_OUT")),e}})}}.apply(t,n),!(void 0!==s&&(e.exports=s))},function(e,t,i){var n,s;n=[i(2),i(420),i(424),i(423)],s=function(e,t,i,n){var s=e._,o=e.$,a=t.extend({read:!0,title:e.loc("wifi.form.edit.title"),save:e.loc("oform.save"),noCancelButton:!0});return e.Controller.extend({View:a,initialize:function(){var e=this.settings.get("appInstanceId");this.settings.set("uploadedCerts",null),this.certs=new n.Collection(null,{wifiInstanceId:e}),this.model=new i.Model({id:e,hasActiveADIntegration:this.settings.get("hasActiveADIntegration")}),this.fetch()},fetch:function(){var e=o.Deferred();return this.model.trigger("startSaving"),this.model.fetch().done(s.bind(function(){this.model.get("allowCerts")?this.certs.fetch().done(s.bind(function(){var t=this.certs.toJSON({verbose:!0});this.model.set("trustedCertFiles",s.clone(t)),this.settings.set("uploadedCerts",s.clone(t)),e.resolve()},this)).fail(e.reject).always(s.bind(function(){this.model.trigger("stopSaving")},this)):e.resolve()},this)).fail(e.reject).always(s.bind(function(){this.model.trigger("stopSaving")},this)),e.promise()}})}.apply(t,n),!(void 0!==s&&(e.exports=s))},function(e,t,i){var n,s;n=[i(2),i(421)],s=function(e,t){var i=e._,n=e.$,s={"settings.app.securityProtocol":function(e){return i.contains(["WEP","WPA_WPA2_PERSONAL","WPA_WPA2_ENTERPRISE"],e)}},o={"settings.app.securityProtocol":"WPA_WPA2_ENTERPRISE"},a="trustedCertFiles",r="settings.app.trustedCertificates",l=function(e){return e.model.isNew()||e.model.get("__edit__")||!e.read&&!e.readOnly&&!e.options.read&&!e.options.readOnly};return e.Form.extend({layout:"o-form-theme",className:"wifi-form",hasSavingState:!0,save:e.loc("wifi.form.save"),customSavingState:{start:"startSaving",stop:"stopSaving"},modelEvents:{"change:__edit__ change:settings.app.securityProtocol":"initTrustedCertFile"},initialize:function(){i.bindAll(this,"saveTrustedCertFiles","isFormInEditMode"),this.uploadedCerts=this.options.uploadedCerts||[],this.listenTo(this,"save",this.onSave),this.addInputs()},addInputs:function(){this.addSectionTitle(e.loc("wifi.form.section.basic")),this.addInput({type:"text",name:"label",label:e.loc("wifi.ssid")}),this.addInput({type:"text",name:"settings.app.description",label:e.loc("wifi.form.description.label")}),this.addInput({type:"checkbox",name:"settings.app.hiddenNetwork",label:e.loc("wifi.form.hiddenNetwork.label"),placeholder:e.loc("wifi.form.hiddenNetwork.placeholder")}),this.addInput({type:"checkbox",name:"settings.app.autoJoin",label:e.loc("wifi.form.autoJoin.label"),placeholder:e.loc("wifi.form.autoJoin.placeholder")}),this.addSectionTitle(e.loc("wifi.form.section.security")),this.addInput({name:"settings.app.securityProtocol",label:e.loc("wifi.form.securityProtocol.label"),type:"select",options:function(){return this.model.get("securityProtocolOptions")},wide:!0}),this.addInput({name:"displayProtocol",label:e.loc("wifi.form.protocol.label"),type:"select",readOnly:!0,options:function(){return this.model.get("displayProtocolOptions")},showWhen:{"settings.app.securityProtocol":"WPA_WPA2_ENTERPRISE"},wide:!0}),this.addDivider({showWhen:s}),this.addSectionTitle(e.loc("wifi.form.section.authentication"),{showWhen:s}),this.addSharedKey();var t=this.model.get("userNameTemplate");this.addInput({name:"credentials.userNameTemplate.template",label:e.loc("wifi.form.userName.label"),tooltip:e.loc("wifi.form.userName.tooltip"),type:"select",options:function(){return this.model.get("userNameTemplateOptions")},to:function(e){return t[e]},from:function(e){return i.findKey(t,function(t){return t===e})},showWhen:o,wide:!0}),this.addInput({name:"credentials.scheme",label:e.loc("wifi.form.password.label"),tooltip:e.loc("wifi.form.password.tooltip"),type:"select",options:function(){return this.model.get("passwordTypeOptions")},showWhen:o,wide:!0}),this.addCertFilesUploader()},addSharedKey:function(){var t=this.model.get("sharedKeyLengthLimits"),i=this;this.addInput({name:"settings.app.sharedKey",label:e.loc("wifi.form.sharedKey.label"),type:"text",tooltip:e.loc("wifi.form.sharedKey.tooltip"),explain:e.loc("wifi.form.sharedKey.hint","messages",[t.WEP_MIN,t.WEP_MAX]),className:"shared-key-input",to:function(e){return n.trim(e)},bindings:{"__edit__ settings.app.securityProtocol":function(){l(i)&&this.model.get("allowSharedKey")?(this.$el.show(),i.changeExplainText.call(this,t)):this.$el.hide()}}}),this.addInput({name:"settings.app.sharedKey",label:e.loc("wifi.form.sharedKey.label"),type:"password",tooltip:e.loc("wifi.form.sharedKey.tooltip"),bindings:{"__edit__ settings.app.securityProtocol":function(){!l(i)&&this.model.get("allowSharedKey")?this.$el.show():this.$el.hide()}}})},changeExplainText:function(t){var i=this.model.get("settings.app.securityProtocol"),n=this.$el.find(".o-form-explain:not(.o-form-input-error)");"WEP"==i?n.text(e.loc("wifi.form.sharedKey.hint","messages",[t.WEP_MIN,t.WEP_MAX])):"WPA_WPA2_PERSONAL"==i&&n.text(e.loc("wifi.form.sharedKey.hint","messages",[t.WPA_WPA2_MIN,t.WPA_WPA2_MAX]))},initTrustedCertFile:function(){l(this)||this.model.set(a,this.settings.get("uploadedCerts"))},addCertFilesUploader:function(){this.trustedCertFilesUploader=new t(i.extend({params:{form:this},name:a},i.pick(this,"settings","state","model","read"))),this.addInput({name:a,label:e.loc("wifi.form.trustedCerts.label"),tooltip:e.loc("wifi.form.trustedCerts.tooltip"),className:"cert-files-fieldset",input:this.trustedCertFilesUploader,autoRender:!0,showWhen:o})},onSave:function(){this.model.trigger("startSaving"),this.doSave().done(i.bind(function(){this.state.invoke("addSavedWifi",this.model)},this)).always(i.bind(function(){this.model.trigger("stopSaving")},this))},doSave:function(){var e=n.Deferred();return this.model.isNew()?this.saveWifiConfig().done(i.bind(function(){this.trustedCertFilesUploader.setWifiInstanceId(this.model.get("id")),this.saveTrustedCertFiles().done(e.resolve).fail(e.reject)},this)).fail(e.reject):this.saveTrustedCertFiles().done(e.resolve).fail(e.reject),e.promise()},saveWifiConfig:function(){return this.model.save().done(n.Deferred().resolve).fail(n.Deferred().reject)},saveTrustedCertFiles:function(){var e=n.Deferred();return this.trustedCertFilesUploader.save().always(i.bind(function(){var e=null,t=this.model.get(a);t&&(e=t.map(function(e){return e.certificateId}).join(","));var i=this.model.get(r);if(e!==i){var n={};n[r]=e,this.model.set(n,{silent:!0})}},this)).done(i.bind(function(){this.saveWifiConfig().done(e.resolve).fail(e.reject)},this)).fail(i.bind(function(){this.model.trigger("error"),this.syncWifi().always(e.reject)},this)),e.promise()},isFormInEditMode:function(){return l(this)},syncWifi:function(){var e=this.model.clone();return e.save().done(i.bind(function(){this.model.set(i.pick(e.toJSON(),r),{silent:!0})},this))}})}.apply(t,n),!(void 0!==s&&(e.exports=s))},function(e,t,i){var n,s;n=[i(2),i(422),i(423)],s=function(e,t,i){function n(){this.$el.hide()}var s=e._,o=e.$,a=e.internal.views.forms.BaseInput,r=e.createButton({title:function(){return e.loc("oform.add.another")},icon:"add-16",readMode:n,click:function(){this.collection.trigger("list:add")},toggleVisibility:function(e){this.$el.toggle(e)}}),l=e.View.extend({className:"list-input-cell button",children:[e.createButton({icon:"cancel-16",readMode:n,modelEvents:{"change:__destroyable__":"_updateVisibility"},click:function(){this.model.trigger("list:remove",this.model)},postRender:function(){this._updateVisibility()},_updateVisibility:function(){this.$el.toggle(this.model.get("__destroyable__"))}})]}),p=e.View.extend({className:function(){return this.model.isNew()?this.model.get("errorMessage")?"new-file new-file-with-errors":"new-file":"uploaded-file"},children:[t,l]}),d=e.ListView.extend({template:'\t      <div class="file-section empty-state">{{i18n code="wifi.form.trustedCerts.no.certs"}}</div>\t      <div class="file-section uploaded-file-list"></div>\t      <div class="file-section new-file-list clearfix"></div>\t      <div class="file-section add-file-button"></div>\t    ',item:p,initialize:function(){this.add(r,".add-file-button"),this.addNewItemButton=this.last();var e=this.model.getPropertySchema(this.options.name)||{};this._schema=s.defaults(e,{minItems:1,maxItems:1/0}),this._prefillCollection()},addItem:function(e){var t=this.add(this.item,e.isNew()?".new-file-list":".uploaded-file-list",{options:{model:e}}).last();return t.listenTo(e,"destroy remove",t.remove),this},collectionEvents:function(){return{"list:remove":"_removeCollectionItem","list:add":"_addCollectionItem","add remove reset":"_updateElements"}},postRender:function(){this._updateElements()},_canAddNewItem:function(){return this.collection.length<this._schema.maxItems},_updateRowsCanBeRemoved:function(){var e=this._schema.minItems<this.collection.length;this.options.params.form.isFormInEditMode()&&(e=1!=this.collection.length||!this.collection.at(0).isNew()),this.collection.each(function(t){t.set("__destroyable__",e)})},_removeCollectionItem:function(e){e.get("__destroyable__")&&this.collection.remove(e)},_addCollectionItem:function(){this._canAddNewItem()&&this.collection.add(this._getEmptyModels(1))},_prefillCollection:function(){var e=this._schema.minItems,t=this.collection.length;e>t&&this.collection.add(this._getEmptyModels(e-t))},_getEmptyModels:function(e){return s.map(s.range(e),s.bind(function(){return new i.Model({wifiInstanceId:this.wifiInstanceId})},this))},_updateElements:function(){var e=this.$(".uploaded-file-list"),t=0===this.collection.length||!s.some(this.collection.models,function(e){return!e.isNew()});t?(e.hide(),this.toggleEmptyState()):e.show(),this.addNewItemButton.toggleVisibility(this._canAddNewItem()),this._updateRowsCanBeRemoved(),this.model.trigger("form:resize"),this.focus()},toggleEmptyState:function(){var e=this.$(".file-section.empty-state");this.options.params.form.isFormInEditMode()||this.model.isNew()?e.hide():e.show()},focus:s.noop});return a.extend({focus:s.noop,className:"o-form-list-input trusted-cert-files-list",initialize:function(){this.setWifiInstanceId(this.settings.get("appInstanceId")),a.prototype.initialize.apply(this,arguments)},setWifiInstanceId:function(e){this.wifiInstanceId=e},render:function(){var e=this.collection=this.options.collection=new i.Collection(this.getModelValue());return this.listenTo(e,"add remove reset update change",s.debounce(this.update,20)),this.listView=new d(s.extend({collection:e},this.options)),this.$el.html(this.listView.render().el),this.listenTo(this.model,"change:__edit__",function(t,i){e.each(function(e){e.set("__edit__",i)})}),a.prototype.render.apply(this,arguments)},editMode:function(){this.listView.invoke("editMode")},readMode:function(){this.editMode(),this.listView.invoke("readMode")},val:function(){return this.collection.map(function(e){return s.omit(e.toJSON({verbose:!0}),"__edit__","__destroyable__")})},save:function(){var e=this.model.get("allowCerts");return o.when(this._addCertFiles(e),this._deleteCertFiles(e)).always(s.bind(function(){var e=this.collection.toJSON({verbose:!0});this.model.set(this.options.name,s.clone(e)),this.settings.set("uploadedCerts",s.filter(e,function(e){return s.isEmpty(e.errorMessage)})),this.render()},this))},_addCertFiles:function(e){if(e){var t=s.filter(this.collection.models,function(e){return e.isNew()&&e.get("file")}),i=s.map(t,s.bind(function(e){return this._saveOneCertFile(e)},this));return o.when.apply(o,i)}return o.Deferred().resolve()},_saveOneCertFile:function(e){if(e.isNew()&&e.set("wifiInstanceId",this.wifiInstanceId),!e.get("wifiInstanceId"))throw new Error("missing wifi instance id from the cert file");var t=new FormData;return t.append("fileName",e.get("file").name),t.append("file",e.get("file")),o.ajax({url:e.url(),method:"POST",data:t,processData:!1,contentType:!1}).done(s.bind(function(t){return s.isArray(t)&&t[0]&&(this.collection.remove(this.collection.findWhere(e.toJSON({verbose:!0})),{silent:!0}),this.collection.add(s.extend(e.toJSON({verbose:!0}),t[0]))),o.Deferred().resolve()},this)).fail(s.bind(function(t){var i="";try{i=t.responseJSON.errorCauses[0].errorSummary}catch(e){i=t&&t.responseJSON&&t.responseJSON.errorSummary}return this.collection.findWhere(e.toJSON({verbose:!0})).set("errorMessage",i),o.Deferred().reject()},this))},_deleteCertFiles:function(e){var t=[],n=new i.Collection(this.settings.get("uploadedCerts"));if(t=e?n.filter(function(e){return!this.collection.findWhere({certificateId:e.get("certificateId")})},this):n.models,t&&t.length>0){var a=s.map(t,s.bind(function(e){return this._deleteOneCertFile(e)},this));return o.when.apply(o,a)}return o.Deferred().resolve()},_deleteOneCertFile:function(e){var t=o.Deferred();return e.destroy({wait:!0,success:s.bind(function(e){this.collection.get(e.get("certificateId"))&&this.collection.remove(e,{silent:!0}),t.resolve()},this),error:s.bind(function(e){this.collection.get(e.get("certificateId"))||this.collection.add(e,{silent:!0}),t.resolve()},this)}),t.promise()}})}.apply(t,n),!(void 0!==s&&(e.exports=s))},function(e,t,i){var n,s;n=[i(2)],s=function(e){var t=e._,i=e.tpl('<p class="o-form-input-error o-form-explain">\t      <span class="icon icon-16 error-16-small"></span> {{errorMessage}}\t    </p>');return e.View.extend({className:"file-input-facade clearfix",events:{"change .m-file":"onFileSelected"},focus:t.noop,template:'\t      {{#if isNewFile}}\t        {{#if inEditMode}}\t        <input type="file" name="file" class="m-file" accept="{{accept}}">\t        <div class="facade">\t          <input type="text" class="file-name-text-field" value="{{fileName}}" disabled>\t          <img src="/img/ui/button/file-browse-01.png" alt="Browse files..." class="browse"/>\t        </div>\t        {{/if}}\t      {{else}}\t        <div class="cname">{{displayCommonName}}</div>\t        <div class="expiry-date">{{i18n code="wifi.form.trustedCerts.expiryDate" arguments="expiryDate"}}</div>\t      {{/if}}\t    ',onFileSelected:function(t){t.stopPropagation(),t.preventDefault(),this.model.unset("errorMessage");var i=t.target.files,n=i.length;return 0===n?void e.Logger.warn("No files have been selected."):n>1?void e.Logger.warn("Too many files have been selected. Currently, only one file per input is supported."):void this.model.set({file:i[0]})},getFilename:function(){var e=this.model.get("file");return e&&e.name},getTemplateData:function(){var e=this.model.toJSON({verbose:!0});return e.isNewFile=this.model.isNew(),e.inEditMode=this.options.params.form.isFormInEditMode(),e.fileName=this.getFilename(),e},postRender:function(){this.errorMessage&&this.errorMessage.remove(),this.model.get("errorMessage")?(this.$el.addClass("o-form-has-errors"),this.errorMessage=this.add(i({errorMessage:this.model.get("errorMessage")})).last()):this.$el.removeClass("o-form-has-errors"),this.model.trigger("form:resize")}})}.apply(t,n),!(void 0!==s&&(e.exports=s))},function(e,t,i){var n,s;n=[i(2)],s=function(e){var t=e.tpl("/api/v1/apps/{{wifiInstanceId}}/servercertificate"),i=function(e){e||(e="");var t=/(^|\s)CN=(.+?)(,|$)/,i=t.exec(e);return i&&i[2]||e},n=e.Model.extend({extraProperties:!0,idAttribute:"certificateId",props:{certificateId:"string",commonName:"string",expiryDate:"string",PEM:"string"},local:{wifiInstanceId:"string",file:"any",displayCommonName:"string",errorMessage:"string"},urlRoot:function(){return t({wifiInstanceId:this.get("wifiInstanceId")})},initialize:function(t,n){return t||(t={}),n||(n={}),this.set({wifiInstanceId:t.wifiInstanceId||n.wifiInstanceId||this._getCollectionProperty("wifiInstanceId",n),displayCommonName:i(t.commonName)}),this.on("change:commonName",function(e,t){e.set("displayCommonName",i(t))}),e.Model.prototype.initialize.apply(this,arguments)},sync:function(){if(!this.get("wifiInstanceId"))throw new Error("Wifi app instance id is required in sync WifiTrustedCertificate");return e.Model.prototype.sync.apply(this,arguments)},_getCollectionProperty:function(e,t,i){return this.collection?this.collection[e]:t.collection?t.collection[e]:i}}),s=e.Collection.extend({model:n,url:function(){return t({wifiInstanceId:this.wifiInstanceId})},initialize:function(e,t){t||(t={}),this.wifiInstanceId=t.wifiInstanceId},sync:function(){if(!this.wifiInstanceId)throw new Error("Wifi app instance id is required in sync WifiTrustedCertificates");return e.Model.prototype.sync.apply(this,arguments)}});return{Model:n,Collection:s}}.apply(t,n),!(void 0!==s&&(e.exports=s))},function(e,t,i){var n,s;n=[i(2),i(67)],s=function(e,t){var i=e._,n=/^[ -~]+$/,s="/api/v1/wifi",o={WEP_MAX:29,WEP_MIN:5,WPA_WPA2_MAX:63,WPA_WPA2_MIN:8},a={NONE:e.loc("wifi.form.securityProtocol.option.none"),WEP:e.loc("wifi.form.securityProtocol.option.wep"),WPA_WPA2_PERSONAL:e.loc("wifi.form.securityProtocol.option.wpaPersonal"),WPA_WPA2_ENTERPRISE:e.loc("wifi.form.securityProtocol.option.wpaEnterprise")},r={PEAP_MSCHAPv2:e.loc("wifi.form.protocol.option.peap")},l={"global.assign.userName.ad.employeeId":e.loc("wifi.form.userNameFormat.adEmployeeId"),"global.assign.userName.ad.sam":e.loc("wifi.form.userNameFormat.adSamAccountName"),"global.assign.userName.ad.sam-and-domain":e.loc("wifi.form.userNameFormat.adSamAccountNameDomain"),"global.assign.userName.ad.upn":e.loc("wifi.form.userNameFormat.adUserPrincipalName"),"global.assign.userName.ad.upn-prefix":e.loc("wifi.form.userNameFormat.adUserPrincipalNamePrefix")},p={"global.assign.userName.email":e.loc("appwizard.sso.nameFormat.email"),"global.assign.userName.email-prefix":e.loc("appwizard.sso.nameFormat.emailPrefix"),"global.assign.userName.login":e.loc("appwizard.sso.nameFormat.oktaUsername"),"global.assign.userName.login-prefix":e.loc("appwizard.sso.nameFormat.oktaUsernamePrefix")},d={"global.assign.userName.ad.employeeId":"${source.employeeID}","global.assign.userName.ad.sam":"${source.samAccountName}","global.assign.userName.ad.sam-and-domain":"${source.samAccountName}@${source.instance.namingContext}","global.assign.userName.ad.upn":"${source.userName}","global.assign.userName.ad.upn-prefix":'${fn:substringBefore(source.userName, "@")}',"global.assign.userName.email":"${source.email}","global.assign.userName.email-prefix":'${fn:substringBefore(source.email, "@")}',"global.assign.userName.login":"${source.login}","global.assign.userName.login-prefix":'${fn:substringBefore(source.login, "@")}'},c={EXTERNAL_PASSWORD_SYNC:e.loc("wifi.form.password.option.externalSync")},u=e.Model.extend({extraProperties:/^(_(links|embedded)|accessibility|visibility|credentials|settings)\./,props:{id:"string",name:{type:"string",required:!0,value:"omm_wifi",values:["omm_wifi"]},label:"string",created:"string",lastUpdated:"string",status:{type:"string",values:["ACTIVE","INACTIVE"]},features:"array",signOnMode:{type:"string",required:!0,value:"CUSTOM"},"credentials.userNameTemplate.template":{type:"string",value:d["global.assign.userName.email"],values:i.values(d)},"credentials.scheme":{type:"string",value:"EXTERNAL_PASSWORD_SYNC",values:i.keys(c)},"settings.app.ssid":{type:"string",required:!0},"settings.app.description":"string","settings.app.hiddenNetwork":"boolean","settings.app.autoJoin":"boolean","settings.app.securityProtocol":{type:"string",required:!0,value:"WPA_WPA2_ENTERPRISE",values:i.keys(a)},"settings.app.authenticationProtocol":{type:"string",value:"PEAP",values:["PEAP"]},"settings.app.innerAuthenticationProtocol":{type:"string",value:"MSCHAPv2",values:["MSCHAPv2"]},"settings.app.sharedKey":"string","settings.app.trustedCertificates":"string"},local:{securityProtocolOptions:{type:"object",value:a},displayProtocol:{type:"string",value:"PEAP_MSCHAPv2"},displayProtocolOptions:{type:"object",value:r},hasActiveADIntegration:{type:"boolean",value:!1},userNameTemplate:{type:"object",value:d},passwordTypeOptions:{type:"object",value:c},sharedKeyLengthLimits:{type:"object",value:o},trustedCertFiles:{type:"array",value:[]}},derived:{appInstanceUrl:{deps:["name","id"],fn:function(e,i){return t.getAppConfigResource(e,i,"tab-assignments")}},allowSharedKey:{deps:["settings.app.securityProtocol"],fn:function(e){return i.contains(["WEP","WPA_WPA2_PERSONAL"],e)}},allowCerts:{deps:["settings.app.securityProtocol"],fn:function(e){return"WPA_WPA2_ENTERPRISE"===e}},userNameTemplateOptions:{deps:["hasActiveADIntegration"],fn:function(e){return e?i.extend({},l,p):p}}},urlRoot:function(){return this.isNew()?s:"/api/v1/apps"},initialize:function(){this.on("change:settings.app.securityProtocol",this.changeSecurityProtocol),this.on("change:label",function(e,t){e.set("settings.app.ssid",t)})},changeSecurityProtocol:function(e,t){"WPA_WPA2_ENTERPRISE"!=t||e.get("credentials.scheme")||e.set({"credentials.userNameTemplate.template":d["global.assign.userName.email"],"credentials.scheme":"EXTERNAL_PASSWORD_SYNC","settings.app.authenticationProtocol":"PEAP","settings.app.innerAuthenticationProtocol":"MSCHAPv2"})},updateAttributesBasedOnSecurityProtocol:function(){switch(this.get("settings.app.securityProtocol")){case"NONE":this.unsetCredentials(),this.unsetSharedKey(),this.unsetAuthProtocol();break;case"WEP":case"WPA_WPA2_PERSONAL":this.unsetCredentials(),this.unsetAuthProtocol();break;case"WPA_WPA2_ENTERPRISE":this.unsetSharedKey()}},unsetCredentials:function(){this.unset("credentials.userNameTemplate"),this.unset("credentials.userNameTemplate.template"),this.unset("credentials.userNameTemplate.type"),this.unset("credentials.scheme")},unsetAuthProtocol:function(){this.unset("settings.app.authenticationProtocol"),this.unset("settings.app.innerAuthenticationProtocol")},unsetSharedKey:function(){this.unset("settings.app.sharedKey")},save:function(){return this.updateAttributesBasedOnSecurityProtocol(),e.Model.prototype.save.apply(this,arguments)},validate:function(){var t=this.get("label"),n=e.Model.prototype.validate.apply(this)||{};return i.isEmpty(t)&&(n.label=e.loc("model.validation.field.blank")),this.get("allowSharedKey")&&(n=i.extend(n,this._validateSharedKey())),n},_validateSharedKey:function(){var t={},s=this.get("settings.app.sharedKey"),o=this.get("sharedKeyLengthLimits");return i.isEmpty(s)?t["settings.app.sharedKey"]=e.loc("model.validation.field.blank"):n.test(s)?"WEP"==this.get("settings.app.securityProtocol")?t=i.extend(t,this._validateLength(s,o.WEP_MIN,o.WEP_MAX)):"WPA_WPA2_PERSONAL"==this.get("settings.app.securityProtocol")&&(t=i.extend(t,this._validateLength(s,o.WPA_WPA2_MIN,o.WPA_WPA2_MAX))):t["settings.app.sharedKey"]=e.loc("model.validation.field.ascii"),t},_validateLength:function(t,i,n){var s={};return t.length<i?s["settings.app.sharedKey"]=e.loc("model.validation.field.too.small","messages",[i]):t.length>n&&(s["settings.app.sharedKey"]=e.loc("model.validation.field.too.long","messages",[n])),s}}),h=e.Collection.extend({model:u,url:s});return{Model:u,Collection:h}}.apply(t,n),!(void 0!==s&&(e.exports=s))},function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=i(2),o=i(234),a=n(o),r=i(426),l=n(r),p=i(427),d=n(p),c=i(445),u=n(c),h=i(467),m=n(h),f=i(468),g=n(f),_=i(483),v=n(_);t.default=s.Controller.extend({initialize:function(){this.appInstanceId=this.settings.get("appInstanceId"),this.appInstance=new a.default.Model({id:this.appInstanceId}),this.listenTo(this.state,"toggleMainView",this.toggleMainView)},preRender:function(){var e=this;s.$.when(this.appInstance.fetch()).then(function(){if(e.settings.hasFeature("LARGE_SCALE_ASSIGNMENTS_WITHOUT_APPUSER")&&e.appInstance.get("settings").implicitAssignment)e.add(new v.default);else{e.addMainView();var t=e.settings.hasFeature("APP_DIFF_REPORT_AND_DEPROV_DIFF_REPORT")&&e.appInstance.get("__provisionEnabled__")&&e.appInstance.get("__active__")&&!e.appInstance.get("__isDirectoryApp__"),i=e.settings.hasFeature("OKTA_USER_LISTS_FOR_AUDITING"),n=e.settings.hasFeature("APP_REQUEST_APPROVAL_WORKFLOW"),s=e.settings.hasFeature("ROGUE_ACCOUNT_REPORT");(t||i||s||n)&&(e.addSidebarWrapper(),e.renderReportsSideber(t,i,s),e.renderWorkflowSidebar(n))}})},renderReportsSideber:function(e,t,i){if(e||t||i){var n={showProvisionAppAuditReport:e,showAuditReport:t,showRogueAccountsReport:i,instanceId:this.appInstanceId,state:this.state};this.add(new g.default(n),{selector:".self-service-side-bar"})}},renderWorkflowSidebar:function(e){var t=this;if(e){var i=this.appInstanceId,n=new l.default.Collection(null,{resourceId:i}),s=function(){return n.length>0?new l.default.Model(n.at(0).attributes):new l.default.Model({},{resourceId:i})},o=function(e){var i={workflowTemplateModel:e,appInstance:t.appInstance};t.add(new u.default(t.toJSON(i)),{selector:".self-service-side-bar"})};n.fetch().then(s).then(o)}},addSidebarWrapper:function(){this.add('<div class="help-wrap self-service-side-bar"></div>'),this.$el.find(".assignment-view-wrapper").addClass("form-wrap")},addMainView:function(){this.add('<div class="assignment-view-wrapper"></div>'),this.toggleMainView("DATA_LIST")},toggleMainView:function(e){this.mainView&&this.mainView.remove(),"CONVERT_ASSIGNMENT"===e?this.mainView=this.add(new m.default(this.toJSON()),{selector:".assignment-view-wrapper"}).last():this.mainView=this.add(new d.default(this.toJSON({appInstance:this.appInstance})),{selector:".assignment-view-wrapper"}).last()}})},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(2),s=500,o=n.internal.util.Util.getUrlQueryString,a=(0,n.tpl)("/api/v1/internal/workflows/templates{{{urlQuery}}}"),r=function(e){e||(e={});var t=[],i=[];if("notification"===e.type&&"email"===e.method&&n._.isArray(e.targets)){var s=n._.find(e.targets,function(e){return"BUILT_IN"===e.type})||[];n._.isArray(s.values)||(s.values=[]),t=n._.union(t,s.values);var o=n._.find(e.targets,function(e){return"CUSTOM"===e.type});o&&(t.push("CUSTOM"),i=n._.isArray(o.values)?o.values:[])}return{actions:t,customEmailTargets:i}},l=function(e,t){
var i=[];if(!n._.isEmpty(e)){i=[{type:"notification",method:"email",targets:[]}];var s=n._.intersection(e,["REQUESTER","APPROVER"]);n._.isEmpty(s)||i[0].targets.push({type:"BUILT_IN",values:s}),n._.contains(e,"CUSTOM")&&!n._.isEmpty(t)&&i[0].targets.push({type:"CUSTOM",values:t})}return i},p=n.Model.extend({extraProperties:!0,props:{id:"string",type:["string",!0,"APPROVALFLOW"],status:{type:"string",values:["ACTIVE","INACTIVE"],value:"INACTIVE"},"resource.type":{type:"string",required:!0,value:"APPINSTANCE",values:["APPINSTANCE","GROUP","DEVICE"]},"resource.value":["string",!0],"approval.settings.timeOut.value":"string","approval.settings.timeOut.action":["string",!0,"expire"],"approval.steps":["array",!1],"obligations.approve":"array","obligations.deny":"array","obligations.expire":"array",message:{type:"string",maxLength:s}},local:{__appApprovers__:["array",!0,[]],__approveActions__:["array",!1,[]],__customApproveEmailTarget__:["array",!1,[]],__denyActions__:["array",!1,[]],__customDenyEmailTarget__:["array",!1,[]],__maxSteps__:["number",!1,10],__timeout__:["string",!1,""],__timeoutActions__:["array",!1,[]],__customTimeoutEmailTarget__:["array",!1,[]]},derived:{__isActive__:{deps:["status"],fn:function(e){return"ACTIVE"===e}},__displayStatus__:{deps:["status"],fn:function(e){return"ACTIVE"===e?(0,n.loc)("on"):(0,n.loc)("off")}},__decodeTimeoutValue__:{deps:["approval.settings.timeOut.value"],fn:function(e){return n._.isString(e)?e.match(/^P(.+)([D|W])$/):null}},__getAllGroupsIds__:{deps:["approval.steps"],fn:function(e){return n._.chain(e).filter(function(e){return e&&e.approvers&&e.approvers[0]&&"GROUP"===e.approvers[0].type}).map(function(e){return e.approvers[0].value}).value()}}},urlRoot:a(),initialize:function(e,t){switch(e||(e={}),t||(t={}),this._initializeResourceId(t),this.get("resource.type")){case"APPINSTANCE":this._initializeAppRequestWorkflow();break;default:this._initializeAppRequestWorkflow()}},toJSON:function(){return this._setSteps(),this._setApproveActions(),this._setDenyActions(),this._setTimeoutActions(),n.Model.prototype.toJSON.apply(this,arguments)},validate:function(){var e={};this.get("__appApprovers__")&&this.get("__appApprovers__").length>this.get("__maxSteps__")&&(e.__appApprovers__=(0,n.loc)("appinstance.provisioning.approvalWorkflow.modal.steps.maximum.error","messages",[this.get("__maxSteps__")]));var t=this.get("__decodeTimeoutValue__");if(!t||!this.isInteger(t[1])){var i=t?t[1]:"";e["approval.settings.timeOut.value"]=(0,n.loc)("appinstance.provisioning.approvalWorkflow.modal.timeoutAction.value.error","messages",[i])}return n._.isString(this.get("message"))&&this.get("message").length>s&&(e.message=(0,n.loc)("maxLength","messages")),e},isInteger:function(e){return!!n._.isString(e)&&e.match(/^\d+$/)},_setSteps:function(){if(n._.isEmpty(this.get("__appApprovers__")))this.unset("approval.steps");else{var e=n._.map(this.get("__appApprovers__"),function(e){return{type:"APPROVAL",sequence:"allOf",approvers:[e]}});n._.isEmpty(e)?this.unset("approval.steps"):this.set("approval.steps",e)}},_setApproveActions:function(){var e=l(this.get("__approveActions__"),this.get("__customApproveEmailTarget__"));n._.isEmpty(e)?this.unset("obligations.approve"):this.set("obligations.approve",e)},_setDenyActions:function(){var e=l(this.get("__denyActions__"),this.get("__customDenyEmailTarget__"));n._.isEmpty(e)?this.unset("obligations.deny"):this.set("obligations.deny",e)},_setTimeoutActions:function(){var e=l(this.get("__timeoutActions__"),this.get("__customTimeoutEmailTarget__"));n._.isEmpty(e)?this.unset("obligations.expire"):this.set("obligations.expire",e)},_initializeResourceId:function(e){if(!this.get("resource.value")&&this.set("resource.value",e.resourceId),!this.get("resource.value"))throw new Error("Cannot initialize WorkTemplate without a resource id.")},_initializeAppRequestWorkflow:function(){this._initializeAppApprovers(this.get("approval.steps")),this._initializeAppApproveActions(this.get("obligations.approve")),this._initializeAppDenyActions(this.get("obligations.deny")),this._initialTimeoutActions(this.get("obligations.expire")),this._initialTimeoutSettings(this.get("approval.settings.timeOut.value"))},_initializeAppApprovers:function(e){e||(e=[]);var t=[];n._.each(e,function(e){e.approvers&&(t=t.concat(e.approvers))}),this.set("__appApprovers__",t)},_initializeAppApproveActions:function(e){if(e||(e=[]),e=e[0],this.isNew())this.set("__approveActions__",["REQUESTER"]);else{var t=r(e);this.set({__approveActions__:t.actions,__customApproveEmailTarget__:t.customEmailTargets})}},_initializeAppDenyActions:function(e){if(e||(e=[]),e=e[0],this.isNew())this.set("__denyActions__",["REQUESTER"]);else{var t=r(e);this.set({__denyActions__:t.actions,__customDenyEmailTarget__:t.customEmailTargets})}},_initialTimeoutActions:function(e){if(e||(e=[]),e=e[0],this.isNew())this.set("__timeoutActions__",["REQUESTER"]);else{var t=r(e);this.set({__timeoutActions__:t.actions,__customTimeoutEmailTarget__:t.customEmailTargets})}},_initialTimeoutSettings:function(e){n._.isEmpty(e)&&(e="P1W"),this.set({__timeout__:e}),this._updateTimeoutAction(),this.listenTo(this,"change:__timeout__",this._updateTimeoutAction)},_updateTimeoutAction:function(){var e=this.get("__timeout__");n._.contains(["P1W","P30D"],e)===!1?this.set("__timeout__","CUSTOM"):this.set("approval.settings.timeOut.value",e)}}),d=n.Collection.extend({model:p,initialize:function(e,t){if(t||(t={}),this.resourceId=t.resourceId,!this.resourceId)throw new Error("Cannot initialize WorkTemplates without a resource id.")},url:function(){return a({urlQuery:o({type:"APPINSTANCE",resourceId:this.resourceId})})}});t.default={Model:p,Collection:d}},function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=i(2),o=i(267),a=n(o),r=i(239),l=n(r),p=i(269),d=n(p),c=i(235),u=n(c),h=i(428),m=n(h),f=i(431),g=n(f),_=i(436),v=n(_),y=i(437),b=n(y),A=s.internal.views.datalist.util.FilterFactory,w={PEOPLE:{stateName:"newlyAssignedUsersCount",single:"appinstance.assignments.notify.person.assigned",plural:"appinstance.assignments.notify.people.assigned"},GROUPS:{stateName:"newlyAssignedGroupsCount",single:"appinstance.assignments.notify.group.assigned",plural:"appinstance.assignments.notify.groups.assigned"}},I={PEOPLE:l.default,GROUPS:a.default};t.default=s.View.extend({className:"assignment-data-list data-list data-list-sidebar-left clearfix",mainContentRenderFn:{PEOPLE:"renderUserAssignment",GROUPS:"renderGroupsAssignment"},stateEvents:{"change:filterType":"handleFilterUpdate",createAssignment:"handleAddAssignment","change:assignedSearchQuery":"handleSearch",compareWithAppError:"onCompareWithAppError"},initialize:function(){this.state.set({filterType:"PEOPLE",assignmentSearchType:"PEOPLE",assignedSearchQuery:void 0,newlyAssignedUsersCount:0,newlyAssignedGroupsCount:0},{silent:!0}),this.appInstance=this.options.appInstance,this.appInstanceId=this.appInstance.get("id"),this.assignmentType="PEOPLE",this.add(b.default),this.add(A.createFilters(v.default)),this.add('<div class="assignment-data-list-container"></div>'),this.renderUserAssignment()},onCompareWithAppError:function(){this.notify("error",(0,s.loc)("appinstance.userassignment.user.comparewithapp.error"))},renderUserAssignment:function(){var e={__instanceId__:this.appInstanceId,expand:[u.default.EXPAND.USER,u.default.EXPAND.TASK]};this.settings.hasFeature("APPLICATION_ENTITLEMENT_POLICY")&&e.expand.push(u.default.EXPAND.METADATA);var t=new u.default.Collection(null,e),i={state:this.state,settings:this.settings,collection:t,appInstance:this.appInstance};this.mainContentView=this.add(new g.default(i),{selector:".assignment-data-list-container"}).last()},renderGroupsAssignment:function(){var e={__instanceId__:this.appInstanceId,expand:[d.default.EXPAND.GROUP]};this.settings.hasFeature("APPLICATION_ENTITLEMENT_POLICY")&&e.expand.push(d.default.EXPAND.METADATA);var t=new d.default.Collection(null,e),i={state:this.state,settings:this.settings,collection:t,appInstance:this.appInstance,appName:this.settings.get("appUniqueName")};this.mainContentView=this.add(new m.default(i),{selector:".assignment-data-list-container"}).last()},handleAddAssignment:function(e){switch(this.state.set("createAssignment",e),e){case"PEOPLE":this.renderUserAddModal();break;case"GROUPS":this.renderGroupAddModal()}},handleAddModalClose:function(e){var t=this.showNotify(e);if(t)return this.state.get("filterType")===e?void this.reloadAssignmentList():void this.state.set("filterType",e)},handleFilterUpdate:function(e,t){s._.isEmpty(t)||(this.assignmentType=t,this.state.set("assignmentSearchType",t),this.renderDataList())},handleSearch:function(e,t){var i=this.state.get("assignmentSearchType");return s._.isEmpty(t)?void this.state.set("filterType",i):void(s._.isEmpty(this.state.get("filterType"))&&this.assignmentType===i?this.reloadAssignmentList():(this.state.set("filterType",""),this.assignmentType=i,this.renderDataList()))},renderUserAddModal:function(){var e={state:this.state,appInstance:this.appInstance,settings:this.settings};this._renderAddAssignmentModal("PEOPLE",e)},renderGroupAddModal:function(){var e={settings:this.settings,state:this.state,appInstanceId:this.appInstanceId,appInstanceLabel:this.appInstance.get("label"),appName:this.settings.get("appUniqueName")};this._renderAddAssignmentModal("GROUPS",e)},_renderAddAssignmentModal:function(e,t){var i=I[e];this.modal=new i(t),this.modal.render(),this.listenToOnce(this.state,"closeModal",function(){this.handleAddModalClose(e)})},renderDataList:function(){var e=this[this.mainContentRenderFn[this.assignmentType]];s._.isFunction(e)&&(this.mainContentView&&this.mainContentView.remove(),e.call(this))},reloadAssignmentList:function(){this.state.trigger("updateApps")},showNotify:function(e){var t=w[e],i=this.state.get(t.stateName);if(this.state.set({unassignedSearchQuery:void 0}),i>0){var n=1===i?(0,s.loc)(t.single):(0,s.loc)(t.plural,"messages",[i]);return this.notify("success",n),this.state.set(t.stateName,0),!0}return!1}})},function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=i(2),o=i(429),a=n(o),r=i(254),l=n(r),p=i(274),d=n(p),c=i(261),u=n(c),h=i(262),m=n(h),f=s.internal.views.forms.helpers.SchemaFormFactory,g=function(e,t){var i=t.find("td"),n=s._.clone(t);return s._.each(n.find("td"),function(e,t){(0,s.$)(e).width(i.eq(t).width()).addClass("sortable-background")}),n};t.default=s.DataList.extend({className:"app-group-assignments-data-list",emptyState:{title:(0,s.loc)("appinstance.assignments.groups.empty.title"),subtitle:!1},modelEvents:{sync:"fetchCollection"},stateEvents:{updateApps:"fetchCollection","edit-group-assignment":"renderEditModal","delete-group-assignment":"unassignGroup"},collectionEvents:{sync:"hanldeCollectionUpdate"},initialize:function(e){if(e||(e={}),!e.appInstance)throw new Error("appInstance is required to initialize GroupsAssignmentView");if(!e.collection)throw new Error("collection is required to initialize GroupsAssignmentView");s._.bindAll(this,"notifyPriorityChanged","displayEditModal","fetchCollection","sortStart","sortStop"),this.searchView=!s._.isEmpty(this.state.get("assignedSearchQuery")),this.appInstanceId=e.appInstance.get("id"),this.appendColumns()},postRender:function(){this.fetchCollection()},appendColumns:function(){this.searchView||this.settings.get("isWifiApp")!==!1||this.addColumn({className:"group-assignment-priority",label:(0,s.loc)("appinstance.assignments.groups.column.priority"),template:'{{#if addGripper}}<span class="icon margin-r-5 okta-gripper-grey" data-type="gripper"></span>{{/if}}<span class="rule-priority-number">{{__displayPriority__}}</span>',initialize:function(){var e=this.collection.indexOf(this.model)+1,t=this.settings.hasPermission("manageAppConfig")&&this.collection.size()>1;this.model.set("__displayPriority__",e),s._.defaults(this.options||{},{addGripper:t})}}),this.addColumn({className:"group-assignment-type",label:(0,s.loc)("appinstance.assignments.groups.column.assignment"),template:'<div class="group-logo"><img class="app-logo" src="{{groupLogo}}"></div><div class="group-desc"><a href="/admin/group/{{id}}">{{groupName}}</a><p class="text-light">{{#if groupDescription}}{{groupDescription}}{{else}}{{i18n code="appinstance.assignments.groups.no.description"}}{{/if}}</p></div>'}),this.settings.hasPermission("manageAppConfig")&&this.addColumn({className:"group-assignment-actions",actions:[{icon:"edit-16",attributes:function(){return{"data-se":"edit-group-assignment-"+this.model.get("id")}},click:function(){this.state.trigger("edit-group-assignment",this.model.get("id"))}},{icon:"cancel-16",attributes:function(){return{"data-se":"delete-group-assignment-"+this.model.get("id")}},click:function(){this.state.trigger("delete-group-assignment",this.model.get("id"))}}]})},renderEditModal:function(e){var t=this,i=this.collection.get(e),n=new d.default.Model({id:this.appInstanceId}),o=new u.default({__instanceId__:this.appInstanceId}),a=new m.default({instanceId:this.appInstanceId});s.$.when(n.fetch(),o.fetch(),a.fetch()).then(function(){return t.settings.hasFeature("APPLICATION_ENTITLEMENT_POLICY")?l.default.createGAAEntitlementMeta(n,i):null}).then(function(e){var t=f.prepareSchema(n.get("properties"),o.toJSON(),i);return{model:i,appGroupProfile:n,possibleValues:o,userAssignmentHelpText:a,schemaProperties:t,entitlementAttributes:e}}).then(this.displayEditModal)},displayEditModal:function(e){var t=(0,s.loc)("appinstance.groupassignment.edit.title"),i=void 0;if(e.schemaProperties.length>0){var n=new a.default({settings:this.settings,model:e.model,schemaProperties:e.schemaProperties,state:this.state,title:t,entitlementAttributes:e.entitlementAttributes,userAssignmentHelpText:e.userAssignmentHelpText,appName:this.options.appName,appInstanceId:this.appInstanceId});n.render(),this.listenToOnce(e.model,"sync",this.fetchCollection)}else i=this.options.appInstance.get("label"),this.confirm({title:t,subtitle:(0,s.loc)("group.noprofile.modal.message","messages",[i,i,i]),save:(0,s.loc)("ok")})},unassignGroup:function(e){var t=this.collection.get(e),i=t.get("groupName");this.confirm({title:(0,s.loc)("appinstance.groupassignment.assigned.unassign.confirm.title"),subtitle:(0,s.loc)("appinstance.unassign.confirm.content","messages",[this.options.appInstance.get("label"),i]),ok:function(){t.destroy().then(this.fetchCollection)}})},fetchCollection:function(){this.state.trigger("reloadConvertAssignment");var e={};return this.searchView&&(e={q:this.state.get("assignedSearchQuery")}),this.collection.fetch({reset:!0,data:e})},hanldeCollectionUpdate:function(){this.allowPriorityChange()&&this.setSortable()},getSortableDOM:function(){return this.$(".data-list-table")},getSortableDomOrders:function(){return this.getSortableDOM().sortable("toArray",{attribute:"data-group-id"})},getSortableDomOrder:function(e){return this.getSortableDomOrders().indexOf(e)},allowPriorityChange:function(){return this.$el.find(".okta-gripper-grey").length>0},setSortable:function(){this.getSortableDOM().sortable({items:"> tbody",axis:"y",handle:".okta-gripper-grey",forcePlaceholderSize:!0,placeholder:"sortable-placeholder",helper:g,start:this.sortStart,stop:this.sortStop});var e=this;(0,s.$)(".ui-sortable > tbody").each(function(t){(0,s.$)(this).attr("data-group-id",e.collection.at(t).get("id"))})},sortStart:function(e,t){var i=t.item.attr("data-group-id"),n=this.getSortableDomOrder(i);this.sortingItemOrder=n},sortStop:function(e,t){var i=t.item.attr("data-group-id"),n=this.getSortableDomOrder(i);if(this.sortingItemOrder!==n){var s=this.collection.at(n).get("priority"),o=this.collection.get(i);o.save({priority:s}).then(this.notifyPriorityChanged).then(this.fetchCollection)}},notifyPriorityChanged:function(){this.notify("success",(0,s.loc)("appinstance.assignments.notify.group.priority.changed"))}})},function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=i(2),o=i(430),a=n(o),r=i(270),l=n(r),p=i(273),d=n(p);t.default=a.default.extend({setForm:function(){this.settings.hasFeature("APPLICATION_ENTITLEMENT_POLICY")?this.form=new l.default(s._.omit(this.options,"title")):this.form=new d.default(s._.omit(this.options,"title"))}})},function(e,t,i){var n,s;n=[i(2)],s=function(e){var t="edit-assignment-modal",i=e._,n=e.$;return e.ModalDialog.extend({params:{containerId:t,position:["50%"],minWidth:620,maxWidth:688,autoResize:!0},initialize:function(){this.form&&this.form.remove(),this.setForm(),this.form&&(this.add(this.form),this._addFormListeners())},render:function(){e.ModalDialog.prototype.render.apply(this,arguments);var t=this;return i.defer(function(){t.resizeModal(),n(window).resize(i.debounce(function(){t.resizeModal()},100))}),this},setForm:function(){throw new Error("setForm() is an abstract method")},resizeModal:function(){var e=n("#"+t),i=this.form,s=e.height(),o=n(window).height();s>o?i.contentHeight(i.contentHeight()-(s-o)):i.contentHeight(i.contentHeight()+(o-s)),e.css("margin-top",-(e.height()/2))},_addFormListeners:function(){this.listenTo(this.form,"resize",function(){this.resize(),n(window).trigger("resize")}),this.listenTo(this.form,"cancel",this.remove),this.listenTo(this.form.model,"sync",this.remove)}})}.apply(t,n),!(void 0!==s&&(e.exports=s))},function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=i(2),o=i(432),a=n(o),r=i(434),l=n(r),p=s.View.extend({template:'\t        <div class="icon person-24 people-logo"></div>\t        <div class="people-desc">\t        {{#if __hasTaskError__}}\t          <span class="icon icon-16 icon-only error-16-small"></span>\t        {{/if}}\t        <a class="link-user-profile" href="/admin/user/profile/view/{{id}}">{{__displayUserName__}}</a>\t        {{#if __highlightStatusLabel__}}\t          <span class="people-assignment-list-status-tag">{{__highlightStatusLabel__}}</span>\t        {{/if}}\t        {{#if __oktaUserName__}}\t          <p class="user-name">{{__oktaUserName__}}</p>\t        {{/if}}\t      </div>'});t.default=a.default.extend({constructor:function(e){var t=l.default.createColumnAndRow({profileColumnView:p,actionColumn:e.settings.hasPermission("manageAppConfig")});this.columns=t.columns,this.item=t.RowItem,a.default.apply(this,arguments)}})},function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=i(2),o=i(269),a=n(o),r=i(433),l=n(r),p=i(254),d=n(p),c=i(261),u=n(c),h=i(262),m=n(h),f=i(64),g=n(f);t.default=s.DataList.extend({emptyState:{title:(0,s.loc)("appinstance.assignments.people.empty.title"),subtitle:!1},stateEvents:{updateApps:"fetchCollection","edit-people-assignment":"renderEditModal","delete-people-assignment":"unassignUser"},initialize:function(e){if(e||(e={}),!e.appInstance)throw new Error("appInstance is required to initialize PeopleAssignmentView");if(!e.collection)throw new Error("collection is required to initialize PeopleAssignmentView");this.appInstance=e.appInstance,this.appInstanceId=e.appInstance.get("id"),s._.bindAll(this,"displayEditModal","unassignUserSucceed","unassignUserFailed")},postRender:function(){this.fetchCollection()},renderEditModal:function(e){var t=this,i=this.collection.get(e),n=new g.default.Model({id:"effective",userId:e},{instanceId:this.appInstanceId,expand:"schema"}),o=new u.default({__instanceId__:this.appInstanceId}),r=new g.default.Model({id:"groups"},{instanceId:this.appInstanceId,expand:"schema"}),l=new m.default({instanceId:this.appInstanceId}),p=new a.default.Collection(null,{__instanceId__:this.appInstanceId,expand:[a.default.EXPAND.GROUP]}),c=void 0,h=void 0;this.userAssignmentHelpText?h=(new s.$.Deferred).resolve():(this.userAssignmentHelpText=l,h=l.fetch()),c=this.settings.hasFeature("APPLICATION_ENTITLEMENT_POLICY")?p.fetch():(new s.$.Deferred).resolve(),s.$.when(n.fetch(),o.fetch(),r.fetch(),c,h).then(function(){return t.settings.hasFeature("APPLICATION_ENTITLEMENT_POLICY")?d.default.createAAEntitlementMeta(n,i):null}).then(function(e){return{appUser:i,appUserProfile:n,possibleValues:o,userAssignmentHelpText:l,groupAppUserProfile:r,entitlementAttributes:e,appGroups:p}}).then(this.displayEditModal)},displayEditModal:function(e){if(0!==e.appUserProfile.get("properties").length){var t=new l.default({model:e.appUser.profile,appUser:e.appUser,properties:e.appUserProfile.get("properties"),possibleValues:e.possibleValues,state:this.state,instance:this.appInstance,title:(0,s.loc)("appinstance.userassignment.edit.title"),groupAppUserProperties:e.groupAppUserProfile.get("properties"),userAssignmentHelpText:e.userAssignmentHelpText,settings:this.settings,entitlementAttributes:e.entitlementAttributes,appGroups:e.appGroups});t.render()}else this.confirm({title:(0,s.loc)("appinstance.userassignment.edit.title"),subtitle:(0,s.loc)("profile.apps.bookmarkapp.assignment.modal.subtitle","messages",[this.appInstance.get("label")]),save:(0,s.loc)("ok")})},unassignUser:function(e){var t=this.collection.get(e),i=t.get("__displayUserName__")||(0,s.loc)("appinstance.userassignment.assigned.unassign.default.username");this.confirm({title:(0,s.loc)("appinstance.userassignment.assigned.unassign.confirm.title"),subtitle:(0,s.loc)("appinstance.unassign.confirm.content","messages",[i,this.appInstance.get("label")]),ok:function(){t.destroy().done(this.unassignUserSucceed).fail(this.unassignUserFailed)}})},unassignUserSucceed:function(){this.reloadConvertAssignment(),this.notify("success",(0,s.loc)("appinstance.userassignment.assigned.unassign.confirm.success"))},unassignUserFailed:function(){this.notify("error",(0,s.loc)("appinstance.userassignment.assigned.unassign.error"))},reloadConvertAssignment:function(){this.state.trigger("reloadConvertAssignment")},fetchCollection:function(){this.reloadConvertAssignment();var e=this.state.get("assignedSearchQuery"),t={};return s._.isEmpty(e)||(t={query_scope:"user",q:e}),this.collection.fetch({reset:!0,data:t})}})},function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=i(2),o=i(242),a=n(o),r=i(253),l=n(r);t.default=s.ModalDialog.extend({params:{focus:!1,autoResize:!0,position:["50%","50%"],containerId:"appuser-modal"},stateEvents:{updateApps:"remove"},mainForm:l.default,initialize:function(){this.options.mainForm?this.mainForm=this.options.mainForm:this.settings&&this.settings.hasFeature&&this.settings.hasFeature("APPLICATION_ENTITLEMENT_POLICY")&&(this.mainForm=a.default),this.addForm(),this.addFormListeners()},render:function(){s.ModalDialog.prototype.render.apply(this,arguments);var e=this;return s._.defer(function(){e.resizeModal(),(0,s.$)(window).resize(s._.debounce(function(){e.resizeModal()},100))}),this},resizeModal:function(){var e=(0,s.$)("#appuser-modal"),t=this.form,i=e.height(),n=(0,s.$)(window).height();i>n?t.contentHeight(t.contentHeight()-(i-n)):t.contentHeight(t.contentHeight()+(n-i)),e.css("margin-top",-(e.height()/2))},addForm:function(){this.form&&this.form.remove();var e=this.mainForm;this.form=new e(s._.omit(this.options,"title")),this.add(this.form)},addFormListeners:function(){this.listenTo(this.form,"resize",s._.debounce(function(){this.resize(),(0,s.$)(window).trigger("resize")},100)),this.listenTo(this.form,"cancel",this.remove)}})},function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function s(e){var t=[u(e.profileColumnView),d];return e.actionColumn&&t.push(c),{RowItem:m.extend({columns:t}),columns:t}}Object.defineProperty(t,"__esModule",{value:!0});var o=i(2),a=i(435),r=n(a),l=o.internal.framework.TableFactory,p={USER:(0,o.loc)("appinstance.assignments.people.column.type.user"),GROUP:(0,o.loc)("appinstance.assignments.people.column.type.group")},d={label:(0,o.loc)("appinstance.assignments.people.column.type"),className:"people-assignment-type",template:function(e){return p[e.scope]||""}},c={className:"people-assignment-actions",view:r.default},u=function(e){return{className:"people-assignment",label:(0,o.loc)("appinstance.assignments.people.column.assignment"),view:e}},h={attributes:{},initialize:function(){this.model.get("__hasTaskError__")&&this.add((0,o.createCallout)({type:"error",subtitle:this.model.get("__appAssignmentTask__").errorString}))}},m=o.View.extend({columns:[],events:{"click .app-user-detail":"toggleRow"},el:'<tbody><tr class="app-user-detail" role="row"></tr><tr class="app-user-task hide"></tr></tbody>',toggleRow:function(e){var t=this.$(e.target),i=this.model.get("__hasTaskError__");if(!t.hasClass("link-user-profile")&&i){var n=this.$(".app-user-task");n.hasClass("hide")?n.removeClass("hide"):n.addClass("hide")}},createDetailCell:function(e){return[l.createCell(e),".app-user-detail"]},createTaskErrorCell:function(e){return[l.createCell(e),".app-user-task"]},children:function(){var e=this.columns,t=[h];return t[0].attributes.colspan=String(e.length),o._.union(o._.map(e,this.createDetailCell),o._.map(t,this.createTaskErrorCell))},postRender:function(){this.model.get("__hasTaskError__")&&this.$("tr.app-user-detail").addClass("app-user-has-task-error"),this.$el.attr("data-se",this.model.get("id"))}});t.default={createColumnAndRow:s}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(2);t.default=n.View.extend({initialize:function(){this.add((0,n.createButton)({icon:"edit-16",attributes:function(){return{"data-se":"edit-user-assignment-"+this.model.get("id")}},click:function(){this.state.trigger("edit-people-assignment",this.model.get("id"))},initialize:function(){this.disable(),this.listenTo(this.options.appInstance,"sync",this.toEnable)},postRender:function(){this.toEnable()},toEnable:function(){this.options.appInstance.get("__active__")&&this.enable()}})),this.add((0,n.createButton)({icon:"cancel-16",attributes:function(){return{"data-se":"delete-user-assignment-"+this.model.get("id")}},click:function(){this.state.trigger("delete-people-assignment",this.model.get("id"))},initialize:function(){this.disable(),this.listenTo(this.options.appInstance,"sync",this.toEnable)},postRender:function(){this.toEnable()},toEnable:function(){!this.model.get("groupManaged")&&this.options.appInstance.get("__active__")&&this.enable()}}))}})},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(2),s=[{type:"filterset",field:"filterType",options:{PEOPLE:(0,n.loc)("appinstance.assignments.filter.people"),GROUPS:(0,n.loc)("appinstance.assignments.filter.groups")}}];t.default=s},function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=i(2),o=i(438),a=n(o),r=i(442),l=n(r),p=i(443),d=n(p),c=i(444),u=n(c);t.default=s.View.extend({attributes:{"data-se":"data-list-toolbar"},className:"assignment-data-list-toolbar data-list-toolbar clearfix",stateEvents:function(){var e={};return this.convertAssignmentBtn&&(e.reloadConvertAssignment="checkConvertBtnStatus"),e},initialize:function(){this.settings.hasPermission("manageAppConfig")&&(this.add(l.default),this.settings.hasPermission("active")&&this.settings.get("isWifiApp")===!1&&(this.convertAssignmentBtn=this.add((0,s.createButton)({title:(0,s.loc)("appinstance.assignments.toolbar.convert.assignments.button"),icon:"config-16",className:"convert-assignments link-button-disabled",id:"convert-assignments-button",click:function(){this.$el.hasClass("link-button-disabled")===!1&&this.state.trigger("toggleMainView","CONVERT_ASSIGNMENT")}})).last())),this.add(a.default),this.add(d.default)},checkConvertBtnStatus:function(){var e=this.options.appInstance.get("id"),t=new u.default.Model({appInstanceId:e}),i=this;t.fetch().then(function(){t.get("anyConvertibleAppUsers")===!0?(i.$("#convert-assignments-button").removeClass("link-button-disabled"),i.convertBtnTooltip.disable(!0)):(i.$("#convert-assignments-button").addClass("link-button-disabled"),i.convertBtnTooltip.disable(!1))})},postRender:function(){this.convertAssignmentBtn&&this.initTooltip()},initTooltip:function(){var e=this.$("#convert-assignments-button").qtip({style:{classes:"qtip-custom qtip-shadow"},position:{my:"bottom left",at:"top center"},content:(0,s.loc)("appinstance.assignments.toolbar.convert.assignments.button.tooltip"),show:"mouseover",hide:"mouseout"});this.convertBtnTooltip=e.qtip("api"),this.convertBtnTooltip.disable(!1)}})},function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function s(e,t){var i=new c.default.Model,n=r._.partial(o,i),s=function(){e.trigger("compareWithAppDone")},l=function(){e.trigger("compareWithAppError")};return i.save({instanceId:t}).then(n).then(a).fail(l).always(s)}function o(e){var t=r.$.Deferred(),i=e.get("jobId");return p.default.addJob(i,{onSuccess:function(){e.fetch().then(function(){t.resolve(e)})},onFailure:function(){t.reject()}}),t.promise()}function a(e){var t=new h.default({model:e});t.render()}Object.defineProperty(t,"__esModule",{value:!0});var r=i(2),l=i(439),p=n(l),d=i(440),c=n(d),u=i(441),h=n(u);t.default=(0,r.createButton)({type:"button",className:"button js-compare-with-app-button",title:(0,r.loc)("appinstance.userassignment.user.comparewithapp.button"),click:function(){this._enableRunningMode(),s(this.state,this.options.appInstance.get("id"))},stateEvents:{compareWithAppDone:"_onCompareDone"},initialize:function(){this._toggleButton(),this.listenTo(this.options.appInstance,"sync",this._toggleButton)},_enableRunningMode:function(){this.$el.prepend('<span class="js-compare-with-app-icon button-icon job-running-16"></span>'),this.disable()},_onCompareDone:function(){this.$(".js-compare-with-app-icon").remove(),this.enable()},_toggleButton:function(){var e=this.options.appInstance.isSupportDiffReport(this.settings);e?this.$el.show():this.$el.hide()}})},function(e,t,i){var n,s;n=[i(2)],s=function(e){function t(e){m[e.jobId]=e,m[m.length]=e.jobId,0===f&&(f=1,s())}function i(e){if(m[e])for(var t=0,i=m.length;t<i;t++)if(m[t]===e){m.splice(t,1),delete m[e];break}}function n(e,t){var i=!0,n=t.status;return"COMPLETED"==n?e.options.onSuccess(t):"FAILED"==n||"EXPIRED"==n?e.options.onFailure(t):"CANCELLED"==n?e.options.onFailure(t):(e.options.onProgress(t),i=!1),i}function s(){var e=u;return 0===m.length?void(f=0):void p.ajax({url:e,dataType:"secureJSON",data:{jobs:m},traditional:!0,success:function(e){for(var t=e.jobList.jobList,i=0;i<t.length;++i){var o=t[i].id,a=m[o],r=t[i];a&&n(a,r)&&(m.splice(i,1),delete m[o])}m.length>0?setTimeout(function(){s()},d):f=0}})}function o(e){var t=e.options.jobUrl?e.options.jobUrl:u;p.ajax({type:"GET",dataType:"secureJSON",traditional:!0,url:t,cache:!0,data:e.jobs,success:function(t){for(var i=t.jobList.jobList,n=0,s=0,a=[],r=0,l=0;l<i.length;++l){var p=i[l].status;if("COMPLETED"!=p)if("IN_PROGRESS"==i[l].status)a[r++]=i[l].id,n=1;else{if("FAILED"==i[l].status||"EXPIRED"==i[l].status){s=1,n=0;break}if("CANCELLED"==i[l].status){s=2,n=0;break}}}0===n?0===s?e.options.onSuccess(t):1==s?e.options.onFailure(t):2==s&&e.options.onFailure(t):(e.options.onProgress(t),e.jobs={jobs:a},setTimeout(function(){o(e)},d))}})}function a(e){var t=e.options.jobUrl?e.options.jobUrl:c;p.ajax({url:t,dataType:"secureJSON",traditional:!0,data:{jobid:e.jobId},success:function(t){n(e,t)||setTimeout(function(){a(e)},d)}})}function r(e){return l.defaults({},e||{},h)}var l=e._,p=e.$,d=2e3,c="/job/status",u="/joblist/status",h={onSuccess:l.noop,onFailure:l.noop,onProgress:l.noop},m=[],f=0;return{addJob:function(e,i){var n={jobId:e,options:r(i)};i.jobUrl?a(n):t(n)},removeJob:function(e){i(e)},addJobGroup:function(e,t){var i={jobs:{jobs:e},options:r(t)};o(i)},getJob:function(e,t){p.ajax({url:c,dataType:"secureJSON",data:{jobid:e},traditional:!0,success:t})}}}.apply(t,n),!(void 0!==s&&(e.exports=s))},function(e,t,i){"use strict";
Object.defineProperty(t,"__esModule",{value:!0});var n=i(2),s=n.internal.util.NumberUtil,o=n.Model.extend({urlRoot:"/api/internal/userDiffReport/job",idAttribute:"jobId",props:{jobId:"string",instanceId:"string",jobStatus:"string",onlyInAppUserCount:"number",onlyInOktaUserCount:"number",syncUserCount:"number",reportId:"string"},derived:{downloadCsvUrl:{deps:["reportId"],fn:function(e){return"/api/internal/userDiffReport/csv/"+e}},inokta:{deps:["onlyInOktaUserCount"],fn:s.numberToString},inboth:{deps:["syncUserCount"],fn:s.numberToString},inapp:{deps:["onlyInAppUserCount"],fn:s.numberToString}}});t.default={Model:o}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(2),s=(0,n.tpl)('<iframe style="display:none;" src="{{url}}"/>'),o='<span class="icon-okta"><span class="icon-app"><span class="icon-both"></span></span></span>',a=n.View.extend({className:"compare-with-app-result",template:'<ul class="compare-with-app-highlights"><li class="content"><p class="item-name">{{i18n code="okta" bundle="messages"}}</p><span class="item-desc">{{i18n code="appinstance.userassignment.user.comparewithapp.result.okta.subtitle" bundle="messages"}}</span></li><li class="icon">'+o+'</li><li class="content"><p class="item-name">{{i18n code="appinstance.userassignment.user.comparewithapp.result.app.title" bundle="messages"}}</p><span class="item-desc">{{i18n code="appinstance.userassignment.user.comparewithapp.result.okta.subtitle" bundle="messages"}}</span></li></ul><ul class="compare-with-app-details">{{#each items}}<li class="item-column"><p class="icon {{style}}">'+o+'</p><p class="item-value">{{value}}</p><p class="item-name">{{name}}</p><p class="item-desc">{{{description}}}</p></li>{{/each}}</ul>',getTemplateData:function(){var e=n.View.prototype.getTemplateData.apply(this,arguments);return e.items=[{name:(0,n.loc)("appinstance.userassignment.user.comparewithapp.result.inokta"),description:(0,n.loc)("appinstance.userassignment.user.comparewithapp.result.inokta.desc"),value:e.inokta,style:"icon-show-okta"},{name:(0,n.loc)("appinstance.userassignment.user.comparewithapp.result.inboth"),description:(0,n.loc)("appinstance.userassignment.user.comparewithapp.result.inboth.desc"),value:e.inboth,style:"icon-show-both"},{name:(0,n.loc)("appinstance.userassignment.user.comparewithapp.result.inapp"),description:(0,n.loc)("appinstance.userassignment.user.comparewithapp.result.inapp.desc"),value:e.inapp,style:"icon-show-app"}],e}});t.default=n.FormDialog.extend({params:{containerId:"compare-with-app-result-modal",close:!0,minWidth:800},title:(0,n.loc)("appinstance.userassignment.user.comparewithapp.result.title"),save:(0,n.loc)("appinstance.userassignment.user.comparewithapp.result.download"),noCancelButton:!0,initialize:function(){this.add(a),this.listenTo(this,"save",function(){var e=s({url:this.model.get("downloadCsvUrl")});(0,n.$)(e).appendTo(this.$el)})},postRender:function(){this.$(".o-form-button-bar").addClass("border-less-button-bar").find('[data-type="save"]').removeClass("button-primary").addClass("button-secondary button-download-csv")}})},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(2);t.default=n.DropDown.extend({title:(0,n.loc)("appinstance.assignments.toolbar.dropdown.title"),className:"button-primary",items:[{title:(0,n.loc)("appinstance.assignments.button.assign.to.people"),click:function(){this.state.trigger("createAssignment","PEOPLE")}},{title:(0,n.loc)("appinstance.assignments.button.assign.to.groups"),click:function(){this.state.trigger("createAssignment","GROUPS")}}]})},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(2),s=n.DropDown.extend({stateEvents:{"change:assignmentSearchType":"render"},title:function(){switch(this.state.get("assignmentSearchType")){case"PEOPLE":return(0,n.loc)("appinstance.assignments.toolbar.search.people");case"GROUPS":return(0,n.loc)("appinstance.assignments.toolbar.search.groups")}},items:[{title:(0,n.loc)("appinstance.assignments.toolbar.search.people"),click:function(){this.state.set("assignmentSearchType","PEOPLE")}},{title:(0,n.loc)("appinstance.assignments.toolbar.search.groups"),click:function(){this.state.set("assignmentSearchType","GROUPS")}}]});t.default=n.View.extend({className:"search-box-wrap assignment-search-box-wrap",events:{"input .text-field-default":"update"},stateEvents:{"change:assignmentSearchType":"reset","change:filterType":"resetCheck"},template:'<span class="search-box input-fix assignment-search-box"><span class="icon-only icon-16 magnifying-glass-16"></span><input class="text-field-default" type="text" placeholder="{{i18n code="appinstance.assignments.toolbar.search.placeholder"}}"></span>',initialize:function(){this.add(s),this.minChars=2,this.field="assignedSearchQuery"},postRender:function(){this.val(this._stateValue())},update:function(){this._updateState()},reset:function(){this.val(""),this.state.set(this.field,this.val(),{silent:!0})},resetCheck:function(e,t){n._.isEmpty(t)||this.reset()},val:function(){var e=this.$("input");return e.val.apply(e,arguments)},_stateValue:function(){return this.state.get(this.field)||""},_updateState:n._.debounce(function(){this._changed()&&this.state.set(this.field,this.val())},500),_changed:function(){var e=this.val()||"",t=e.length;return(0===t||t>=this.minChars)&&this._stateValue()!==e}})},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(2),s=(0,n.tpl)("/admin/appusers/any-convertible?instanceId={{appInstanceId}}"),o=n.Model.extend({secureJSON:!0,props:{anyConvertibleAppUsers:"boolean"},local:{appInstanceId:"string"},url:function(){return s({appInstanceId:this.get("appInstanceId")})}});t.default={Model:o}},function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=i(2),o=i(446),a=n(o),r=i(447),l=n(r),p=i(448),d=n(p),c=i(459),u=n(c),h=s.View.extend({className:"manage-requests",template:'<h4>{{i18n code="appinstance.assignments.sidebar.manage.requests.title"}}</h4>{{#if pendingRequestsCount}}<p><label>{{pendingRequestsCount}}</label> {{i18n code="appinstance.assignments.sidebar.pending.requests"}}</p>{{/if}}{{#unless pendingRequestsCount}}<p>{{i18n code="appinstance.assignments.sidebar.pending.norequest"}}</p>{{/unless}}<p class="manage-requests-button-wrap"></p>',initialize:function(){this.manageButton=this.add((0,s.createButton)({className:"manage-requests-button",title:(0,s.loc)("appinstance.assignments.sidebar.manage.requests.button"),click:function(){var e=new u.default({settings:this.settings,state:this.state,collection:this.collection});e.render()}}),".manage-requests-button-wrap").last()},postRender:function(){0===this.collection.length&&this.manageButton.disable()},getTemplateData:function(){return{pendingRequestsCount:this.collection.length}}}),m=s.View.extend({template:'{{#if customMessage}}<div class="infobox infobox-warning infobox-no-border margin-top-0"><p>{{customMessage}}</p><a href="/admin/apps/self-service">{{i18n code="appinstance.assignments.sidebar.go.to.self.service.link.message"}}</a></div>{{/if}}',getTemplateData:function(){var e="";return this.settings.get("selfServiceEnabled")===!1?e=(0,s.loc)("appinstance.assignments.sidebar.self.service.enable.message"):this.settings.get("selfAssignOrgAppsEnabled")===!1?e=(0,s.loc)("appinstance.assignments.sidebar.self.service.org.managed.apps.message"):this.options.workflowTemplateModel.get("__isActive__")&&this.options.appInstance.get("__selfServiceEnabled__")===!1&&(e=(0,s.loc)("appinstance.assignments.sidebar.self.service.org.enable.message")),{customMessage:e}}});t.default=s.View.extend({className:"sidebar-wrap clearfix",template:'<h4>{{i18n code="appinstance.assignments.sidebar.selfservice.title" bundle="messages"}}</h4><div class="sidebar-wrap-message"></div><p><label>{{i18n code="appinstance.assignments.sidebar.approval.title" bundle="messages"}}</label><span class="status"></span></p><p class="configure-approval-button-wrap"></p>',stateEvents:{"remove-pending-request":"deletePendingRequest"},initialize:function(){s._.bindAll(this,"addManagerRequestView","addCustomMessageView","updateAllStatus","groupLogoCheck","openApprovalWorkflowModal"),this.workflowRequestCollection=new l.default.Collection([],{appInstanceId:this.options.appInstance.get("id")}),this.options.workflowTemplateModel.on("sync",this.updateAllStatus),this.groupLogoCollection=new a.default.Collection},postRender:function(){var e=this;this.addCustomMessageView(),this.updateApprovalStatus(),this.add((0,s.createButton)({title:(0,s.loc)("appinstance.assignments.sidebar.approval.button"),attributes:{id:"edit-workflow"},click:function(){e.groupLogoCheck().then(e.openApprovalWorkflowModal)}}),".configure-approval-button-wrap"),this.managerRequestView()},groupLogoCheck:function(){var e=this.options.workflowTemplateModel,t=e.get("__getAllGroupsIds__");return s._.isEmpty(t)?(new s.$.Deferred).resolve():this.groupLogoCollection.fetchByGroupIds(t)},openApprovalWorkflowModal:function(){this.modal=new d.default({model:this.options.workflowTemplateModel,appInstance:this.options.appInstance,groupLogoCollection:this.groupLogoCollection}),this.modal.render()},addCustomMessageView:function(){this.customMessageView=this.add(m,{selector:".sidebar-wrap-message"}).last()},managerRequestView:function(){this.manageRequestsView&&this.manageRequestsView.remove(),this.options.workflowTemplateModel.get("__isActive__")&&this.workflowRequestCollection.fetch({data:{status:"PENDING_APPROVAL",expand:"history,step"}}).then(this.addManagerRequestView)},addManagerRequestView:function(){this.manageRequestsView=this.add(h,{options:{collection:this.workflowRequestCollection}}).last()},deletePendingRequest:function(e){this.workflowRequestCollection.remove(this.workflowRequestCollection.get(e)),this.manageRequestsView&&(this.manageRequestsView.remove(),this.addManagerRequestView())},updateApprovalStatus:function(){var e=this.options.workflowTemplateModel.get("__isActive__")?(0,s.loc)("appinstance.provisioning.approvalWorkflow.modal.required.label"):(0,s.loc)("appinstance.provisioning.approvalWorkflow.modal.not.required.label");this.$(".status").text(e)},updateAllStatus:function(){this.updateApprovalStatus(),this.customMessageView.remove(),this.options.appInstance.fetch().then(this.addCustomMessageView),this.managerRequestView()}})},function(e,t,i){var n,s;n=[i(2)],s=function(e){var t=e._,i=e.Model.extend({extraProperties:/^_(links|embedded)\./,props:{id:"string",created:"string",lastUpdated:"string",lastMembershipUpdated:"string",objectClass:"array",type:"string","profile.name":"string","profile.description":"string","profile.groupType":"string","profile.objectSid":"string","profile.groupScope":"string","profile.dn":"string","profile.externalId":"string","profile.samAccountName":"string","profile.windowsDomainQualifiedName":"string"},urlRoot:"/api/v1/groups/",getMediumLogo:function(){return this.get("_links.logo")[0].href}}),n=e.Collection.extend({model:i,url:"/api/v1/groups/",fetchByGroupIds:function(e){e||(e=[]);var i=t.chain(e).map(function(e){return'id eq "'+e+'"'}).join(" or ").value();return this.fetch({data:{expand:"stats,app",filter:i}})}});return{Model:i,Collection:n}}.apply(t,n),!(void 0!==s&&(e.exports=s))},function(e,t,i){"use strict";function n(e){if(!e)return null;var t=e.displayName,i=e.approverName,n=t,o=e.status,r=(0,s.moment)(e.lastUpdated).fromNow(),p=l[o]||{};return"GROUP"===e.type&&(n=a({approver:i,group:t})),"PENDING_APPROVAL"===o&&(r="",n=t),s._.extend({displayName:n,time:r},p)}Object.defineProperty(t,"__esModule",{value:!0});var s=i(2),o=(0,s.tpl)("/api/v1/internal/workflows/apps/{{appInstanceId}}/requests"),a=(0,s.tpl)("{{approver}} in {{group}}"),r={user:(0,s.tpl)("/admin/user/profile/view/{{id}}"),group:(0,s.tpl)("/admin/group/{{id}}")},l={APPROVED:{action:(0,s.loc)("appinstance.assignments.pending.requests.action.approved"),style:"success-16-green"},PENDING_APPROVAL:{action:(0,s.loc)("appinstance.assignments.pending.requests.action.notresponded"),style:"time-16"}},p=s.Model.extend({flat:!1,props:{id:"string",status:{type:"string",values:["PENDING_APPROVAL","APPROVED","DENIED","DELETED"]},created:"string",createdBy:"string",lastUpdated:"string",lastUpdatedBy:"string",comment:"string",targetUser:"object",resource:"object",_links:"object",_embedded:"object"},derived:{requesterDisplayName:{deps:["targetUser"],fn:function(e){return e&&e.displayName}},requesterUserName:{deps:["targetUser"],fn:function(e){return e&&e.userName}},requesterId:{deps:["targetUser"],fn:function(e){return e&&e.value}},requesterLink:{deps:["requesterId"],fn:function(e){return r.user({id:e})}},historySteps:{deps:["_embedded"],fn:function(e){return e&&e.history&&e.history.steps||[]}},currentStep:{deps:["_embedded"],fn:function(e){return e&&e.history&&e.step||{}}},currentStepId:{deps:["currentStep"],fn:function(e){return e&&e.id}},allHistoryToDisplay:{deps:["historySteps","currentStep","created","targetUser"],fn:function(e,t,i,o){var a=s._.isEmpty(t)?e:e.concat(t),r=s._.chain(a).map(s._.property("approvers")).flatten().map(n).value(),l={displayName:o&&o.displayName,style:"help-16",action:(0,s.loc)("appinstance.assignments.pending.requests.action.requested"),time:(0,s.moment)(i).fromNow()};return r.unshift(l),r}},nextApprover:{deps:["currentStep"],fn:function(e){return e&&e.approvers&&e.approvers.length?e.approvers[0]:{}}},nextApproverDisplayName:{deps:["nextApprover"],fn:function(e){return e?e.displayName:""}},nextApproverUserName:{deps:["nextApprover"],fn:function(e){return e?e.userName:""}},nextApproverId:{deps:["nextApprover"],fn:function(e){return e?e.value:""}},nextApproverType:{deps:["nextApprover"],fn:function(e){return e?e.type:""}},nextApproverLink:{deps:["nextApproverId","nextApproverType"],fn:function(e,t){var i=s._.isString(t)?t.toLowerCase():"",n=r[i]||s._.constant("");return n({id:e})}},expireTimeRelative:{deps:["currentStep"],fn:function(e){return e&&e.expireTime?(0,s.moment)(e.expireTime).fromNow(!0):""}}}}),d=s.Collection.extend({model:p,url:function(){return o({appInstanceId:this.appInstanceId})},initialize:function(e,t){t||(t={}),this.appInstanceId=t.appInstanceId}});t.default={Model:p,Collection:d}},function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=i(2),o=i(449),a=n(o),r=i(455),l=n(r),p=i(456),d=n(p),c=i(457),u=n(c),h=i(458),m=n(h),f="workflow-config-modal",g=s.internal.views.forms,_=g.components,v=g.helpers,y=g.inputs,b=_.TextCounterExplain,A=v.ErrorParser,w=y.SimpleCheckBoxSet,I=A.parseErrorSummary;t.default=s.FormDialog.extend({params:{minWidth:860,maxWidth:860,minHeight:300,containerId:f,formContentMaxHeight:717},title:(0,s.loc)("appinstance.provisioning.dashboard.approvalWorkflow.title"),autoSave:!0,modelEvents:function(){return{"change:message":s._.throttle(this.toggleSaveButtonPerMessage,500)}},initialize:function(){if(this.addInput({label:(0,s.loc)("appinstance.provisioning.approvalWorkflow.modal.status.label"),name:"status",type:"select",options:{ACTIVE:(0,s.loc)("appinstance.provisioning.approvalWorkflow.modal.required.label"),INACTIVE:(0,s.loc)("appinstance.provisioning.approvalWorkflow.modal.not.required.label")},wide:!0,className:"status-switch"}),this.options.appInstance.get("__provisionEnabled__")&&this.options.appInstance.get("__selfServiceEnabled__")){var e=d.default.extend({input:s.View.extend({attributes:{"data-se":"o-form-approval-message"},template:'\t              <div class="infobox infobox-warning margin-btm-0">\t              <span class="icon warning-16"></span>\t              <p>{{i18n code="appinstance.provisioning.approvalWorkflow.modal.infobox.warning.approval"}}</p>\t              </div>\t            '})});this.add(e,{selector:".o-form-fieldset-container",options:{showWhen:{status:"INACTIVE"}}})}this.addInput({label:(0,s.loc)("appinstance.provisioning.approvalWorkflow.modal.note.label"),sublabel:(0,s.loc)("appinstance.provisioning.approvalWorkflow.modal.note.sublabel"),explain:new b({field:"message",model:this.model}),name:"message",type:"textarea",placeholder:(0,s.loc)("appinstance.provisioning.approvalWorkflow.modal.note.placeholder"),className:"note"}),this.addDivider(),this.addInput({label:(0,s.loc)("appinstance.provisioning.approvalWorkflow.modal.appRequest.steps.label"),name:"__appApprovers__",input:a.default,params:{groupLogoCollection:this.options.groupLogoCollection}}),this.addDivider(),this.addInput({label:(0,s.loc)("appinstance.provisioning.approvalWorkflow.modal.approveAction.label"),name:"__approveActions__",input:l.default,options:{REQUESTER:(0,s.loc)("appinstance.provisioning.approvalWorkflow.modal.email.requester"),APPROVER:(0,s.loc)("appinstance.provisioning.approvalWorkflow.modal.email.approvers"),CUSTOM:(0,s.loc)("appinstance.provisioning.approvalWorkflow.modal.email.custom")}}),this.addInput({label:"",name:"__customApproveEmailTarget__",input:m.default,showWhen:{__approveActions__:function(e){return s._.contains(e,"CUSTOM")}},placeholder:(0,s.loc)("appinstance.provisioning.approvalWorkflow.modal.email.custom.placeholder")}),this.addDivider(),this.addInput({label:(0,s.loc)("appinstance.provisioning.approvalWorkflow.modal.denyAction.label"),name:"__denyActions__",input:w,options:{REQUESTER:(0,s.loc)("appinstance.provisioning.approvalWorkflow.modal.email.requester"),APPROVER:(0,s.loc)("appinstance.provisioning.approvalWorkflow.modal.email.approvers"),CUSTOM:(0,s.loc)("appinstance.provisioning.approvalWorkflow.modal.email.custom")}}),this.addInput({label:"",name:"__customDenyEmailTarget__",input:m.default,showWhen:{__denyActions__:function(e){return s._.contains(e,"CUSTOM")}},placeholder:(0,s.loc)("appinstance.provisioning.approvalWorkflow.modal.email.custom.placeholder")}),this.addDivider(),this.addInput({label:(0,s.loc)("appinstance.provisioning.approvalWorkflow.modal.timeoutPeriod.label"),name:"__timeout__",type:"select",options:{P1W:(0,s.loc)("appinstance.provisioning.approvalWorkflow.modal.timeoutAction.1week.label"),P30D:(0,s.loc)("appinstance.provisioning.approvalWorkflow.modal.timeoutAction.30days.label"),CUSTOM:(0,s.loc)("appinstance.provisioning.approvalWorkflow.modal.timeoutAction.custom.label")},wide:!0,className:"timeout-switch"}),this.addInput({name:"approval.settings.timeOut.value",input:u.default,showWhen:{__timeout__:function(e){return"CUSTOM"===e}}}),this.addInput({label:(0,s.loc)("appinstance.provisioning.approvalWorkflow.modal.timeoutAction.label"),name:"__timeoutActions__",input:w,options:{REQUESTER:(0,s.loc)("appinstance.provisioning.approvalWorkflow.modal.email.requester"),APPROVER:(0,s.loc)("appinstance.provisioning.approvalWorkflow.modal.email.approvers"),CUSTOM:(0,s.loc)("appinstance.provisioning.approvalWorkflow.modal.email.custom")}}),this.addInput({label:"",name:"__customTimeoutEmailTarget__",input:m.default,showWhen:{__timeoutActions__:function(e){return s._.contains(e,"CUSTOM")}},placeholder:(0,s.loc)("appinstance.provisioning.approvalWorkflow.modal.email.custom.placeholder")})},parseErrorMessage:function(e){if(e){var t=void 0;s._.each(e.errorCauses||[],function(e){var i=e&&e.errorSummary||"",n=I(i);t||!i||n||(t=e.errorSummary)}),t&&(e.errorSummary=t)}return e},toggleSaveButtonPerMessage:function(e,t){var i=this.$(".button[data-type=save]"),n=e.getPropertySchema("message").maxLength;String(t).length>n?i.addClass("disabled-control").attr("disabled","disabled"):i.removeClass("disabled-control").removeAttr("disabled")},resizeModal:function(){var e=(0,s.$)("#"+f),t=this.form,i=e.height(),n=s._.isNumber(this.dialog.params.minHeight)?this.dialog.params.minHeight:0,o=(0,s.$)(window).height();if(n<=i){var a,r=this.dialog.$("h2").outerHeight(),l=t.$(".o-form-button-bar").outerHeight(),p=parseInt(e.css("border-top-width"),10)+parseInt(e.css("border-bottom-width"),10),d=o-r-l-p;i>=o?t.contentHeight(d):t.contentHeight(s._.isNumber(this.dialog.params.formContentMaxHeight)?s._.min([d,this.dialog.params.formContentMaxHeight]):d),(a=this.dialog).resize.apply(a,arguments)}}})},function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=i(2),o=i(450),a=n(o),r=i(451),l=n(r),p=i(454),d=n(p),c=s.internal.views.forms.BaseInput;t.default=c.extend({attributes:{"data-se":"steps-data-list"},className:"workflow-config-steps data-list clearfix",template:(0,s.tpl)('\t      <div data-se="data-list-toolbar" class="data-list-toolbar clearfix"></div>\t      <div data-se="data-list-content-wrap" class="data-list-content-wrap">\t        <div data-se="data-list-content" class="data-list-content">\t          <div class="data-list-empty-msg" style="display: none;">\t            <h4 class="data-list-head data-list-empty-head">\t              {{i18n code="appinstance.provisioning.approvalWorkflow.modal.steps.empty.title"}}\t            </h4>\t            <h5 class="data-list-head data-list-empty-head data-list-empty-subhead">\t              {{i18n code="appinstance.provisioning.approvalWorkflow.modal.steps.empty.subtitle"}}\t            </h5>\t          </div>\t        </div>\t      </div>\t    ')(),initialize:function(){this.approverModel=new a.default.Model,this.collection=new a.default.Collection,this._setupInitialData(),this.listenTo(this.approverModel,"change:value",this.addApprover),this.listenTo(this.collection,"add",this.toggleEmptyMessage),this.listenTo(this.collection,"destroy",this.removeApprover),this.listenTo(this.collection,"change:__appUserEntitlement__ change:__sortOrder__",this.update),this.listenTo(this.model,"form:cancel",s._.throttle(this.__cancel,100,{trailing:!1})),this.add(d.default,{selector:".data-list-toolbar",options:{model:this.approverModel,collection:this.collection}}),this.add(l.default,{selector:".data-list-content",options:{collection:this.collection},prepend:!0})},_setupInitialData:function(){var e=this.options.params.groupLogoCollection;s._.each(this.model.get(this.options.name),function(t){var i=new a.default.Model(t);if(i.get("isGroupApprover")&&e){var n=e.get(t.value);n&&i.set("__logoUrl__",n.getMediumLogo())}this.collection.add(i,{silent:!1})},this)},render:function(){return this.__originalData=this.collection.toJSON(),s.View.prototype.render.apply(this,arguments),this.toggleEmptyMessage(),this},addApprover:function(){if(this.approverModel.get("value")){var e=this.approverModel.get("type");this.collection.add(JSON.parse(JSON.stringify(this.approverModel.attributes))),this.approverModel.revert(!0),this.approverModel.set("type",e),this.update()}},removeApprover:function(e){this.toggleEmptyMessage(),this.collection.remove(e),this.approverModel.revert(!0),this.update()},toggleEmptyMessage:function(){this.$(".data-list-empty-msg").toggle(!this.collection.length),this.model.trigger("form:resize")},update:function(){this.model.set(this.options.name,this.collection.toJSON())},__cancel:function(){this.collection.set(this.__originalData,{silent:!0})}})},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(2),s=function(e){return e||(e=[]),n._.contains(e,"APPUSER:READ")?"READ":n._.contains(e,"APPUSER:READ_WRITE")?"READ_WRITE":"HIDE"},o=function(e,t){e=e[0];var i=n._.filter(e.permissions,function(e){return!/^APPUSER:/.test(e)});return e.permissions=i.concat("APPUSER:"+t),[e]},a=n.Model.extend({idAttribute:"value",props:{value:"string",type:{type:"string",required:!0,value:"USER",values:["USER","GROUP","EXPRESSION"]},displayName:"string",actions:{type:"array",value:[{permissions:["APPUSER:READ_WRITE"],type:"ENTITLEMENT"}]}},local:{__userApproverEntity__:"object",__groupApproverEntity__:"object",__appUserEntitlement__:{type:"string",values:["HIDE","READ","READ_WRITE"]},__sortOrder__:"number",__logoUrl__:["string",!1]},derived:{__displaySortOrder__:{deps:["__sortOrder__"],fn:function(e){return e+1}},isGroupApprover:{deps:["type"],fn:function(e){return"GROUP"===e}}},initialize:function(){if(this.get("actions")&&this.get("actions")[0]&&"ENTITLEMENT"!==this.get("actions")[0].type)throw new Error('An app request config\'s approval type can only be "ENTITLEMENT"');this.set("__appUserEntitlement__",s(this.get("actions")[0].permissions)),this.originalAttrs=JSON.parse(JSON.stringify(this.attributes)),this.on("add",function(e,t){var i=t.indexOf(e);e.set({__sortOrder__:i})})},revert:function(e){n._.isUndefined(e)&&(e=!1),this.clear({silent:!0}),this.set(n._.omit(this.originalAttrs,"__displaySortOrder__"),{silent:e})},toJSON:function(){return this.set("actions",o(this.get("actions"),this.get("__appUserEntitlement__"))),n.Model.prototype.toJSON.apply(this,arguments)}}),r=n.Collection.extend({model:a,comparator:"__sortOrder__",initialize:function(){this.on("change:__sortOrder__",this.sort)}});t.default={Model:a,Collection:r}},function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=i(2);i(26);var o=i(452),a=n(o),r=function(e,t){var i=t.find("td"),n=s._.clone(t);return s._.each(n.find("td"),function(e,t){(0,s.$)(e).width(i.eq(t).width())}),n};t.default=s.View.extend({tagName:"table",attributes:{"data-se":"approvers-list"},className:"data-list-table",template:'\t      <thead>\t        <tr>\t          <th role="columnheader" class="step-column">\t            {{i18n code="appinstance.provisioning.approvalWorkflow.modal.steps.column.step"}}\t          </th>\t          <th role="columnheader" class="approver-column">\t            {{i18n code="appinstance.provisioning.approvalWorkflow.modal.steps.column.approver"}}\t          </th>\t          <th role="columnheader" class="entitlement-column">\t            {{i18n code="appinstance.provisioning.approvalWorkflow.modal.steps.column.entitlements"}}\t            <span class="o-form-tooltip icon-16 icon-only form-help-16"></span>\t          </th>\t          <th role="columnheader" class="remove-column">&nbsp;</th>\t        </tr>\t      </thead>\t      <tbody></tbody>\t    ',initialize:function(){s._.bindAll(this,"addItem","updateOrder"),this.listenTo(this.collection,"add",this.addItem),this.listenTo(this.collection,"destroy",this.updateOrder)},postRender:function(){return this.collection.each(this.addItem),this.getSortableDOM().sortable({items:"> tr",axis:"y",helper:r,update:this.updateOrder}),this.$(".entitlement-column .o-form-tooltip").qtip({content:(0,s.loc)("appinstance.provisioning.approvalWorkflow.modal.steps.column.entitlements.tooltip"),style:{classes:"qtip-custom qtip-shadow"},position:{my:"bottom middle",at:"top center"},hide:{fixed:!0},show:"mouseover"}),this},getSortableDOM:function(){return this.$("tbody")},updateOrder:function(){var e=this.getSortableDOM().sortable("toArray");this.collection.each(function(t){t.set("__sortOrder__",e.indexOf(t.get(t.idAttribute)))})},addItem:function(e){var t=new a.default({model:e,readOnly:!1});return this.getSortableDOM().append(t.render().$el),t}})},function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=i(2),o=i(453),a=n(o),r=s.internal.views.forms.inputs.Select,l={USER:"person-16-gray",GROUP:"group-16"};t.default=s.View.extend({tagName:"tr",attributes:{role:"row"},template:'\t      <td class="sort-order">\t        <span class="icon icon-10-26 margin-r-5 okta-gripper-grey" data-type="gripper"></span>\t      </td>\t      <td>\t        {{#if approverIconUrl}}\t        <span class="group-small-app-logo-wrapper"><img src="{{approverIconUrl}}"></span>\t        {{else}}\t        <span class="icon icon-16 {{approverTypeIcon}}"></span>\t        {{/if}}\t        <span data-se="approver-name">{{displayName}}</span>\t      </td>\t      <td class="entitlement-permission"></td>\t      <td class="remove-button"></td>\t    ',initialize:function(){s._.bindAll(this,"remove"),this.add(a.default,".sort-order"),this.add(r,{selector:".entitlement-permission",options:{model:this.model,name:"__appUserEntitlement__",options:{HIDE:(0,s.loc)("appinstance.provisioning.approvalWorkflow.modal.steps.entitlements.option.hide"),READ:(0,s.loc)("appinstance.provisioning.approvalWorkflow.modal.steps.entitlements.option.read"),READ_WRITE:(0,s.loc)("appinstance.provisioning.approvalWorkflow.modal.steps.entitlements.option.write")},wide:!0}}),this.add((0,s.createButton)({icon:"clear-input-16",click:this.remove}),".remove-button")},getTemplateData:function(){var e=s.View.prototype.getTemplateData.apply(this,arguments),t=this.model.get("__logoUrl__")||"",i=!t&&l[this.model.get("type")]||l.USER;return s._.extend({},e,{approverTypeIcon:i,approverIconUrl:t})},postRender:function(){return this.$el.attr("id",this.model.get(this.model.idAttribute)),this},remove:function(e){var t=this,i=arguments;e.preventDefault(),this.$el.slideUp(function(){s.View.prototype.remove.call(t,i),t.model.stopListening().trigger("destroy",t.model)})}})},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(2);t.default=n.View.extend({tagName:"span",template:"{{__displaySortOrder__}}",modelEvents:{"change:__displaySortOrder__":"render"}})},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(2),s=n.internal.views.forms.helpers.InputFactory,o=[{type:"userpicker",name:"__userApproverEntity__",className:"input-fix user-picker-wrap",params:{height:"30px",autoSuggestMode:!0,onlyActiveUser:!0,selectEntityEvent:"user-picker-entity-selected",excludeIds:function(){return this.collection.pluck("value")}},placeholder:(0,n.loc)("appinstance.provisioning.approvalWorkflow.modal.steps.user.search.placeholder"),_fieldName:"userPicker"},{type:"grouppicker",name:"__groupApproverEntity__",params:{height:"30px",autoSuggestMode:!0,selectEntityEvent:"group-picker-entity-selected",excludeIds:function(){return this.collection.pluck("value")},footer:'<li class="group-approver-info">\t            <span class="icon icon-16 icon-only info-16-gray"></span>\t            <p>Any member of selected group can approve requests</p>\t          </li>'},className:"input-fix group-picker-wrap hide",placeholder:(0,n.loc)("appinstance.provisioning.approvalWorkflow.modal.steps.user.search.placeholder"),_fieldName:"groupPicker"},{type:"select",name:"type",className:"approver-type-select",options:{USER:(0,n.loc)("appinstance.provisioning.approvalWorkflow.modal.steps.approver.type.user"),GROUP:"Groups"},wide:!0,_fieldName:"approverTypeSelector"}];t.default=n.View.extend({tagName:"span",className:"steps-text-select",attributes:{"data-se":"o-form-input-steps-text-select"},modelEvents:{"change:type":"swapTextInput","select:__userApproverEntity__":"userSelected","select:__groupApproverEntity__":"groupSelected"},initialize:function(){this.add('<span class="o-form-label-inline o-form-inline-label-icon float-l">\t        <span class="icon icon-16 icon-only search-green-add-16 margin-0"></span>\t        </span>'),n._.chain(o).map(this.extendInputOption,this).each(this.addInputView,this)},extendInputOption:function(e){return n._.extend({model:this.model,collection:this.collection},e)},addInputView:function(e){var t=e._fieldName,i=s.create(n._.omit(e,"_fieldName"));this[t]=this.add(i).last()},swapTextInput:function(){var e=this.model.get("type");"USER"===e?(this.$(".group-picker-wrap").addClass("hide"),this.$(".user-picker-wrap").removeClass("hide")):"GROUP"===e&&(this.$(".user-picker-wrap").addClass("hide"),this.$(".group-picker-wrap").removeClass("hide"))},userSelected:function(e){this.model.set({value:e.id,displayName:e.firstName+" "+e.lastName})},groupSelected:function(e){this.model.set({value:e.id,displayName:e.name,__logoUrl__:e.smallIconUrl})}})},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(2),s=n.internal.views.forms.inputs.SimpleCheckBoxSet,o=(0,n.tpl)('\t    <div class="infobox infobox-success clearfix">\t      <span class="icon success-16"></span>\t      <p>{{i18n code="appinstance.provisioning.approvalWorkflow.modal.approveInfo.message"}}</p>\t    </div>\t  ')();
t.default=s.extend({postRender:function(){this.$el.prepend(o),this.model.trigger("form:resize")}})},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(2),s=n.internal.views.forms.helpers.InputWrapper;t.default=s.extend({input:null,template:'\t      <div class="okta-form-label o-form-label"></div>\t      <div class="o-form-input"></div>\t    ',initialize:function(){this.add(this.input,".o-form-input")}})},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(2);i(22);var s=n.internal.views.forms.BaseInput;t.default=s.extend({tagName:"span",className:"custom-timeout",attributes:{"data-se":"o-form-input-custom-timeout"},events:{"change input":"updateCustomTime","change select":"updateCustomTime"},template:(0,n.tpl)('\t      <span data-se="o-form-input-custom-timeout-value" class="okta-form-input-field input-fix o-form-control">\t        <input type="text">\t      </span>\t      <span data-se="o-form-input-custom-timeout-select" class="o-form-select o-form-control">\t        <select>\t          <option value="D">{{i18n \t            code="appinstance.provisioning.approvalWorkflow.modal.timeoutAction.days.label"}}</option>\t          <option value="W">{{i18n \t            code="appinstance.provisioning.approvalWorkflow.modal.timeoutAction.weeks.label"}}</option>\t        </select>\t      </span>\t    '),postRender:function(){var e=this;this.$input=this.$("input"),this.$select=this.$("select"),n._.defer(function(){e.$select.chosen({disable_search_threshold:10,width:"100%"}),e.setCustomTime(),e.listenTo(e.model,"change:"+e.options.name,e.setCustomTime)})},setCustomTime:function(){var e=this.model.get("__decodeTimeoutValue__");e&&(this.$input.val(e[1]),this.$select.val(e[2]),this.$select.trigger("liszt:updated"))},updateCustomTime:function(){var e="P"+this.$input.val()+this.$select.val();this.model.set(this.options.name,e)}})},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(2),s=n.internal.util,o=n.internal.views,a=s.Keys,r=s.StringUtil,l=o.forms.inputs.BasePicker;t.default=l.extend({idAttribute:"email",nameAttribute:"email",apiURL:"/api/v1/users",extraParams:{expand:"stats"},events:{keyup:function(e){if(e.stopPropagation(),a.isSpaceBar(e)||a.isEnter(e)){this.$(".as-results").hide();var t=n.$.trim((0,n.$)(e.target).val());this.isValidEmail(t)&&this.addFreeFormatEmail(t),this.getEmailInputDOM().find('input[type="text"]').val(""),this.$("input").focus()}}},initialize:function(){this.__originalData=JSON.parse(JSON.stringify(n._.pick(this.model.attributes,this.options.name))),this.listenTo(this.model,"form:cancel",n._.throttle(this.__cancel,100,{trailing:!1}))},addFreeFormatEmail:function(e){var t=this,i=this.getValuesInput();i.val(i.val()+e+",");var s=(0,n.$)((0,n.tpl)('\t        <li class="as-selection-item" id="as-selection-{{attrName}}-{{email}}">{{email}}</li>\t      ')({attrName:this.options.name,email:e})),o=(0,n.$)('<a class="as-close">&times;</a>').click(function(){return i.val(i.val().replace(","+e+",",",")),t.removeEntity(s),!1}),a=this.getEmailInputDOM();a.before(s.prepend(o));var r={};r[this.idAttribute]=e,this.addEntity(a.prev(),r)},getSelectedEmailsDOM:function(){return this.$(".as-values")},getEmailInputDOM:function(){return this.$(".as-original")},isValidEmail:function(e){return!!r.isEmail(e)&&!n._.contains(this.model.get(this.options.name),e)},parseAll:function(e){var t=n._.reject(e,function(e){return"ACTIVE"!==e.status});return n._.map(t,this.parse)},parse:function(e){var t=n._.pick(e.profile,"firstName","lastName","email");return n._.extend(n._.pick(e,"id"),t,{name:t.firstName+" "+t.lastName+" ("+t.email+")"})},_prefill:function(e){var t=this;n._.each(this.model.get(this.options.name),function(i){var n={};n[t.idAttribute]=i,t._entities.push(n),e.addInitialSelection(n,t.idAttribute)}),this.model.trigger("form:resize")},__cancel:function(){this.model.set(this.__originalData,{silent:!0})}})},function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=i(2),o=i(460),a=n(o),r=i(461),l=n(r),p=i(462),d=n(p),c=i(465),u=n(c),h=i(466),m=n(h),f={height:200};t.default=s.MultiViewModalDialog.extend({params:{minWidth:700},title:(0,s.loc)("appinstance.assignments.pending.requests.modal.title"),View:d.default,stateEvents:{"pending-requests-resend":"toResendEmailView","pending-requests-delete":"toDeletePendingRequestView","pending-requests-list":"toPendingRequestsListView","pending-requests-close":"remove"},toPendingRequestsListView:function(){this.switchView(d.default)},toResendEmailView:function(e){var t=new l.default.Model({stepId:e.get("currentStepId"),nextApproverName:e.get("nextApproverDisplayName"),nextApproverId:e.get("nextApproverId"),nextApproverType:e.get("nextApproverType")}),i=new m.default(s._.extend({model:t},this.options));this.switchView(i,f),this.listenTo(i,"saved",this.remove)},toDeletePendingRequestView:function(e){var t=new a.default.Model({requestId:e.get("id"),targetUser:e.get("requesterDisplayName")}),i=new u.default(s._.extend({model:t},this.options));this.switchView(i,f)}})},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(2),s=(0,n.tpl)("/api/v1/internal/workflows/apps/requests/{{requestId}}"),o=n.Model.extend({local:{requestId:"string",targetUser:"string"},url:function(){return s({requestId:this.get("requestId")})},isNew:n._.constant(!1)});t.default={Model:o}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(2),s=(0,n.tpl)("/api/v1/internal/workflows/steps/{{stepId}}/resendnotification"),o=n.Model.extend({local:{stepId:"string",nextApproverName:"string",nextApproverId:"string",nextApproverType:"string"},url:function(){return s({stepId:this.get("stepId")})}});t.default={Model:o}},function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=i(2),o=i(463),a=n(o),r=i(464),l=n(r),p=s.internal.framework.TableFactory,d=s.View.extend({className:"o-form-button-bar",template:'<input type="button" data-type="close" class="button simplemodal-close" value="{{i18n code="simplemodal.close"}}">'}),c=l.default.extend({getToggleElement:function(){return this.$el.parents(".pending-request-detail").next(".pending-request-history")}}),u=[{className:"col-expander",label:"",view:c},{className:"col-requester",label:(0,s.loc)("appinstance.assignments.pending.requests.modal.column.requester"),template:'<p><a target="_blank" href="{{requesterLink}}">{{requesterDisplayName}}</a></p><p>{{requesterUserName}}</p>'},{className:"col-next-approver",label:(0,s.loc)("appinstance.assignments.pending.requests.modal.column.nextapprover"),template:'<p><a target="_blank" href="{{nextApproverLink}}">{{nextApproverDisplayName}}</a></p><p>{{nextApproverUserName}}</p>'},{className:"col-expires-in",label:(0,s.loc)("appinstance.assignments.pending.requests.modal.column.expiresin"),template:"{{expireTimeRelative}}"},{className:"col-action",label:"",view:a.default}],h=[{label:"",template:""},{label:"",template:'<span class="request-history-title">{{i18n code="appinstance.assignments.pending.requests.modal.column.history"}}</span>'},{label:"",attributes:{colspan:"3"},template:'<ul class="history-list">{{#each allHistoryToDisplay}}<li class="row"><span class="icon icon-16 icon-only {{style}}"></span>{{displayName}} {{action}}{{#if time}}<span class="history-time">{{time}}</span>{{/if}}</li>{{/each}}</ul>'}],m=function(e){return[p.createCell(e),".pending-request-detail"]},f=function(e){return[p.createCell(e),".pending-request-history"]},g=s.View.extend({el:'<tbody><tr class="pending-request-detail" role="row"></tr><tr class="pending-request-history" style="display:none"></tr></tbody>',children:s._.union(s._.map(u,m),s._.map(h,f))});t.default=s.DataList.extend({className:"pending-requests-list",columns:u,item:g,preRender:function(){this.add(d)}})},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(2);t.default=n.View.extend({initialize:function(){this.add((0,n.createButton)({icon:"send-16",click:function(){this.state.trigger("pending-requests-resend",this.model)}})),this.add((0,n.createButton)({icon:"delete-16-gray",click:function(){this.state.trigger("pending-requests-delete",this.model)}}))}})},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(2);t.default=n.View.extend({className:"icon icon-16 icon-only expand-r-16-gray",tagName:"span",events:{click:"toggle"},getToggleElement:n._.noop,toggle:function(){var e=this.getToggleElement();e&&n._.isFunction(e.toggle)&&e.toggle(),this.$el.hasClass("collapse-16-gray")?this.$el.removeClass("collapse-16-gray").addClass("expand-r-16-gray"):this.$el.addClass("collapse-16-gray").removeClass("expand-r-16-gray")}})},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(2);t.default=n.Form.extend({layout:"o-form-wrap",noCancelButton:!0,save:(0,n.loc)("appinstance.assignments.pending.requests.delete.button"),danger:!0,initialize:function(){var e=this,t=(0,n.loc)("appinstance.assignments.pending.requests.delete.message","messages",[n._.escape(this.model.get("targetUser"))]);this.add('<p class="confirm-message">'+t+"</p>"),this.addButton({text:(0,n.loc)("appinstance.assignments.pending.requests.delete.button.goback"),className:"button-error",action:function(){e.deleteRequestAndGoBack()}}),this.addButton({type:"previous",text:(0,n.loc)("oform.cancel"),action:this.goBackToPendingRequestList}),n._.bindAll(this,"goBackToPendingRequestList","removeRequestFromCollection","_delete","deleteRequest","deleteRequestAndGoBack","closeModal","success","error"),this.listenTo(this,"save",this.deleteRequest)},_delete:function(){return this.clearErrors(),this.model.destroy().then(this.removeRequestFromCollection).done(this.success).fail(this.error)},deleteRequest:function(){this._delete().done(this.closeModal)},deleteRequestAndGoBack:function(){this._delete().done(this.goBackToPendingRequestList)},removeRequestFromCollection:function(){this.state.trigger("remove-pending-request",this.model.get("requestId"))},goBackToPendingRequestList:function(){this.state.trigger("pending-requests-list")},closeModal:function(){this.state.trigger("pending-requests-close")},success:function(){this.notify("success",(0,n.loc)("appinstance.assignments.pending.requests.delete.success"))},error:function(){this.notify("error",(0,n.loc)("appinstance.assignments.pending.requests.delete.error"))}})},function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=i(2),o=i(446),a=n(o),r=s.internal.views.forms.helpers.ErrorParser.parseErrorSummary;t.default=s.Form.extend({autoSave:!0,layout:"o-form-wrap",noCancelButton:!0,save:(0,s.loc)("appinstance.assignments.pending.requests.resend.button"),modelEvents:{error:"error"},initialize:function(){s._.bindAll(this,"goBackToPendingRequestList","saveAndGoBack","success","error","addViews","addViewComponents"),this.listenTo(this,"saved",this.success),this.addViews()},addViews:function(){var e=this.model.get("nextApproverType"),t=void 0;t="GROUP"===e?this.getGroupApproverMessage():this.getUserApproverMessage(),t.then(this.addViewComponents)},addViewComponents:function(e){var t=this;this.add('<p class="confirm-message">'+e+"</p>"),this.addButton({text:(0,s.loc)("appinstance.assignments.pending.requests.resend.button.goback"),className:"button-primary",action:function(){t.saveAndGoBack()}}),this.addButton({type:"previous",text:(0,s.loc)("oform.cancel"),action:this.goBackToPendingRequestList})},getUserApproverMessage:function(){var e=(0,s.loc)("appinstance.assignments.pending.requests.resend.message","messages",[s._.escape(this.model.get("nextApproverName"))]),t=new s.$.Deferred;return t.resolve(e)},getGroupApproverMessage:function(){var e=this.model.get("nextApproverId"),t=new a.default.Model({id:e}),i=this.model;return t.fetch({data:{expand:"stats"}}).then(function(){return(0,s.loc)("appinstance.assignments.pending.requests.resend.message.group","messages",[s._.escape(i.get("nextApproverName")),s._.escape(t.get("_embedded.stats.usersCount"))])})},saveAndGoBack:function(){this.clearErrors(),this.model.save().then(this.goBackToPendingRequestList).done(this.success).fail(this.error)},goBackToPendingRequestList:function(){this.state.trigger("pending-requests-list")},success:function(){this.notify("success",(0,s.loc)("appinstance.assignments.pending.requests.resend.success","messages",[this.model.get("nextApproverName")]))},error:function(){this.notify("error",(0,s.loc)("appinstance.assignments.pending.requests.resend.error","messages",[this.model.get("nextApproverName")]))},parseErrorMessage:function(e){if(e){var t=s._.reduce(e.errorCauses||[],function(e,t){var i=t&&t.errorSummary||"",n=r(i);return e||!i||n||(e=t.errorSummary),e},null);t&&(e.errorSummary=t)}return e}})},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(2);t.default=n.View.extend({events:{"click #convert-cancel-button":function(e){e.preventDefault(),this.state.trigger("toggleMainView","DATA_LIST")}},template:'<div class="app-assignments-convert-assignments"><h2 id="groups-header-tag-convert">{{i18n code="appinstance.assignments.convert.assignments.title"}}</h2><div id="conversion-content"><div id="conversion-message" style="display:none;"><div class="infobox infobox-success clearfix margin-btm-15"><span class="icon success-16"></span><span id="conversion-message-users-plural"></span><span class="infobox-dismiss-link"><span id="conversion-dismiss-button" class="dismiss-icon"></span></span></div></div><div class="data-grid-container white-bg pos-relative rounded-5 clearfix"><div id="topControlControlBar" class="clearfix margin-btm-15"><a class="link-button" id="convert-cancel-button">Cancel</a></div><div id="grouptab-appusers-root" class="form-content-wrap rounded-4"><table id="grouptab-appusers" class="data-grid display" cellspacing="0" cellpadding="0" border="0"></table></div></div></div></div>',postRender:function(){var e=this;n._.defer(function(){e.state.trigger("runConvertAssignment")})}})},function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=i(2),o=i(469),a=n(o),r=i(472),l=n(r),p=i(474),d=n(p),c=(0,s.tpl)('<div class="margin-top-regular"><a class="icon-16" href="/reports/app/{{type}}?appInstanceId={{id}}"><span class="icon {{icon}}"></span>{{text}}</a></div>');t.default=s.View.extend({className:"report-sidebar-wrap clearfix",stateEvents:{downloadReport:"downloadReport"},initialize:function(){this.add('<h4>{{i18n code="appinstance.assignments.reports.title" bundle="messages"}}</h4>'),this.initializeViews()},initializeViews:function(){this.options.showProvisionAppAuditReport&&this.add(d.default,{options:s._.extend({},this.options,{model:new a.default.Model({instanceId:this.options.instanceId}),state:this.state,header:(0,s.loc)("appinstance.assignments.report.audit.assignments.title"),reportLink:(0,s.loc)("appinstance.assignments.report.app.assignment.report.title"),qtipContent:(0,s.loc)("appinstance.assignments.report.audit.tooltip"),reportType:"APP_ASSIGNMENT"})}),this.options.showAuditReport&&this.add(c({type:"access",id:this.options.instanceId,icon:"app-assign-16",text:(0,s.loc)("appinstance.assignments.reports.currentAssignments.link")})),this.options.showProvisionAppAuditReport&&this.add(d.default,{options:s._.extend({},this.options,{model:new l.default.Model({instanceId:this.options.instanceId}),state:this.state,header:(0,s.loc)("appinstance.assignments.report.audit.deprovisioning.title"),reportLink:(0,s.loc)("appinstance.assignments.report.deprovisioning.report.title"),qtipContent:(0,s.loc)("appinstance.assignments.report.deprovisioning.tooltip"),reportType:"DEPROVISIONING"})}),this.options.showAuditReport&&this.add(c({type:"unassignment",id:this.options.instanceId,icon:"app-remove-16",text:(0,s.loc)("appinstance.assignments.reports.recentUnassignments.link")})),this.options.showRogueAccountsReport&&this.add(c({type:"rogue_accounts",id:this.options.instanceId,icon:"megaphone-16",text:(0,s.loc)("appinstance.assignments.reports.rogue.accounts.link")}))},downloadReport:function(e){var t=(0,s.tpl)('<iframe style="display:none;" src="{{url}}"/>')({url:e});this.add(t)}})},function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=i(2),o=i(470),a=n(o),r=a.default.Model.extend({createJobUrlTpl:(0,s.tpl)("/api/internal/userDiffReport/active/diff/{{id}}"),readJobMetaUrlTpl:(0,s.tpl)("/api/internal/userDiffReport/active/diff/jobMetaData/{{id}}"),downloadReportUrlTpl:(0,s.tpl)("/api/internal/userDiffReport/active/diff/{{id}}")});t.default={Model:r}},function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=i(2),o=i(471),a=n(o),r=s.internal.util.Util.constantError,l=s.Model.extend({createJobUrlTpl:r("createJobUrlTpl is abstract property"),readJobMetaUrlTpl:r("readJobMetaUrlTpl is abstract property"),downloadReportUrlTpl:r("downloadReportUrlTpl is abstract property"),idAttribute:a.default.idAttribute,props:a.default.props,sync:function(e,t,i){switch(e){case"create":i.url=this.createJobUrlTpl({id:this.get("instanceId")});break;case"read":i.url=this.readJobMetaUrlTpl({id:this.get("instanceId")})}return s.Model.prototype.sync.call(this,e,t,i)},derived:s._.extend({},a.default.derived,{saveOptions:{deps:["instanceId"],fn:function(e){return{instanceId:e}}}})});t.default={Model:l}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(2);t.default={idAttribute:"jobId",props:{jobId:"string",instanceId:"string",jobStatus:"string",jobCompletedDate:"string",onlyInAppUserCount:"number",onlyInOktaUserCount:"number",syncUserCount:"number",usersDeactivatedSuccessfullyCount:"number",usersStillActiveInAppCount:"number",totalRowCount:"number",reportId:"string",reportType:"string",startDate:"string",endDate:"string"},derived:{hasInProgressJob:{deps:["jobStatus"],fn:function(e){return"IN_PROGRESS"===e}},hasCompletedJob:{deps:["jobCompletedDate"],fn:function(e){return!n._.isEmpty(e)}},jobCompletedDateDisplay:{deps:["jobCompletedDate"],fn:function(e){return n.moment.utc(e).format("MM/DD/YY hh:mmA z")}},downloadCsvUrl:{deps:["instanceId"],fn:function(e){return this.downloadReportUrlTpl({id:e})}}}}},function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=i(2),o=i(473),a=n(o),r=a.default.Model.extend({createJobUrlTpl:(0,s.tpl)("/api/internal/userDiffReport/inactive/diff/{{id}}"),readJobMetaUrlTpl:(0,s.tpl)("/api/internal/userDiffReport/inactive/diff/jobMetaData/{{id}}"),downloadReportUrlTpl:(0,s.tpl)("/api/internal/userDiffReport/inactive/diff/{{id}}")});t.default={Model:r}},function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=i(2),o=i(471),a=n(o),r="MM/DD/YYYY",l="YYYY-MM-DD",p=s.internal.util.Util.constantError,d=s.Model.extend({createJobUrlTpl:p("createJobUrlTpl is abstract property"),readJobMetaUrlTpl:p("readJobMetaUrlTpl is abstract property"),downloadReportUrlTpl:p("downloadReportUrlTpl is abstract property"),idAttribute:a.default.idAttribute,props:a.default.props,local:{__startDate__:"string",__endDate__:"string",__dateRange__:"string",__displayTimeRange__:{type:"boolean",value:!0}},sync:function(e,t,i){var n={id:this.get("instanceId")};switch(e){case"create":n=s._.extend({},n,{startDate:this.momentDate(this.get("__startDate__")).format(l),endDate:this.momentDate(this.get("__endDate__")).format(l)}),i.url=this.createJobUrlTpl(n);break;case"read":i.url=this.readJobMetaUrlTpl(n)}return s.Model.prototype.sync.call(this,e,t,i)},derived:s._.extend({},a.default.derived,{startDateDisplay:{deps:["startDate"],fn:function(e){return s.moment.utc(e).format(r)}},endDateDisplay:{deps:["endDate"],fn:function(e){return s.moment.utc(e).format(r)}},saveOptions:{deps:["instanceId","__startDate__","__endDate__"],fn:function(e,t,i){return{instanceId:e,__startDate__:this.momentDate(t).format(r),__endDate__:this.momentDate(i).format(r)}}}}),initialize:function(){this.MIN_START_DATE=this.momentDate("12/24/2009")},validate:function(e){var t={},i=s.moment.utc(),n=this.momentDate(e.__startDate__),o=this.momentDate(e.__endDate__);return s._.isEmpty(e)?t:(n.isValid()&&o.isValid()&&!o.isBefore(n)?n.diff(this.MIN_START_DATE,"day")<0?t.__dateRange__=(0,s.loc)("appinstance.assignments.report.deprovisioning.modal.minStartDate","messages",[this.MIN_START_DATE.format(r)]):o.diff(i,"day")>0?t.__dateRange__=(0,s.loc)("appinstance.assignments.report.deprovisioning.modal.maxEndDate"):n.diff(o,"years",!0)<-1&&(t.__dateRange__=(0,s.loc)("appinstance.assignments.report.deprovisioning.modal.maxDateRange")):t.__dateRange__=(0,s.loc)("appinstance.assignments.report.deprovisioning.modal.invalidDateRange.text"),t)},setDefaultDateRange:function(){this.set({__startDate__:(0,s.moment)().utc().subtract(1,"month").format(r),__endDate__:s.moment.utc().format(r)})},momentDate:function(e){return(0,s.moment)(e,r,!0)}});t.default={Model:d}},function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=i(2),o=i(475),a=n(o),r=i(476),l=n(r),p=i(477),d=n(p);t.default=s.View.extend({className:"margin-top-regular",events:{"click .header-toggle":"toggleDiffReportView"},template:'<h4 class="header-toggle header-collapse"><span class="title-icon icon icon-16 icon-only expand-r-16-blue"></span> {{header}}</h4><div class="diff-report-container"></div>',initialize:function(){this.listenTo(this.model,"showReportModal",this.showReportModal)},toggleDiffReportView:function(){this.$el.find(".header-toggle").hasClass("header-collapse")?(this.$el.find(".header-toggle").removeClass("header-collapse"),this.$el.find(".header-toggle .icon").addClass("collapse-16-blue"),this.renderDiffReport()):(this.$el.find(".header-toggle").addClass("header-collapse"),this.$el.find(".header-toggle .icon").removeClass("collapse-16-blue"),this.model.trigger("removeJobRequest"),this.removeDiffReport())},renderDiffReport:function(){this.diffReportView=this.add(l.default,{selector:".diff-report-container"}).last(),this.diffStatusView=this.add(d.default,{selector:".diff-report-container"}).last()},removeDiffReport:function(){this.diffReportView&&this.diffReportView.remove(),this.diffStatusView&&this.diffStatusView.remove()},showReportModal:function(e){this.model.setDefaultDateRange();var t=new a.default({model:this.model});t.render(),this.listenToOnce(t,"save",function(){this.model.trigger(e)})}})},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(2),s=n.internal.views.forms.inputs.DateBox;t.default=n.FormDialog.extend({params:{maxWidth:550,minHeight:200,close:!1},className:"deprovisioned-modal",title:(0,n.loc)("appinstance.assignments.report.deprovisioning.modal.title"),save:(0,n.loc)("appinstance.assignments.report.deprovisioning.modal.runReport.button"),focus:n._.noop,modelEvents:{"change:__startDate__ change:__endDate__":"clearErrors"},initialize:function(){this.add('<p class="date-range-description">\t        {{i18n code="appinstance.assignments.report.deprovisioning.modal.description"}}</p>'),this.addInput({label:(0,n.loc)("appinstance.assignments.report.deprovisioning.modal.datetimepicker.description"),className:"date-range",type:"group",name:"__dateRange__",input:[{input:s,name:"__startDate__",params:{dateFormat:"mm/dd/yy"}},{type:"label",label:(0,n.loc)("appinstance.assignments.report.deprovisioning.modal.dateRangeAnd.label")},{input:s,name:"__endDate__",params:{dateFormat:"mm/dd/yy"}}]}),this.listenTo(this,"save",function(){this.remove()})}})},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(2);t.default=n.View.extend({tagName:"h5",template:'{{reportLink}}<span class="o-form-tooltip icon-16 icon-only form-help-16"></span>',initialize:function(){this.button=(0,n.createButton)({className:"diff-report-button",icon:"run-16-gray",events:{click:n._.throttle(function(){this.disabled||this.model.trigger("jobRequest")},500)},initialize:function(){this.disable(),this.listenTo(this.model,"jobComplete",this.enable),this.listenTo(this.model,"jobRunning",this.disable)}}),this.add(this.button)},postRender:function(){this.$el.find(".o-form-tooltip").qtip({content:this.options.qtipContent,style:{classes:"qtip-custom qtip-shadow"},position:{my:"bottom right",at:"center center"},hide:{fixed:!0},show:"mouseover"})}})},function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=i(2),o=i(439),a=n(o),r=i(478),l=n(r),p=i(479),d=n(p),c=i(480),u=n(c),h=i(481),m=n(h),f=i(482),g=n(f);t.default=s.View.extend({VIEW_STATUS:{RUNNING:"running",IDLE:"idle"},modelEvents:{jobRequest:"jobRequest",createDiffReport:"createJob",removeJobRequest:"removeJob"},initialize:function(){s._.bindAll(this,"showResult","showError","waitForJobComplete")},removeView:function(){this.lastView&&this.lastView.remove()},postRender:function(){var e=this,t=function(){"IN_PROGRESS"===e.model.get("jobStatus")?(e.showRunning(),e.waitForJobComplete().then(e.showResult).fail(e.showError)):e.model.get("jobCompletedDate")?e.showLastRun():e.showLoadingComplete()};this.model.fetch().then(t).fail(this.showError)},showLoading:function(){this.removeView(),this.lastView=this.add(u.default).last()},showLoadingComplete:function(){this.removeView(),this.model.trigger("jobComplete")},showRunning:function(){this.removeView(),this.lastView=this.add(g.default).last(),this.model.trigger("jobRunning")},showLastRun:function(){this.removeView(),this.lastView=this.add(d.default).last(),this.model.trigger("jobComplete")},showResult:function(){this.removeView(),this.lastView=this.add(m.default).last(),this.model.trigger("jobComplete")},showError:function(){this.removeView(),this.lastView=this.add(l.default).last(),this.model.trigger("jobComplete")},jobRequest:function(){return"DEPROVISIONING"===this.options.reportType?void this.model.trigger("showReportModal","createDiffReport"):void this.createJob()},createJob:function(){this.showRunning();var e=this.model.get("saveOptions");this.model.reset(),this.model.set(e),this.model.save().then(this.waitForJobComplete).then(this.showResult).fail(this.showError)},removeJob:function(){this.model.get("jobId")&&a.default.removeJob(this.model.get("jobId"))},waitForJobComplete:function(){var e=this.model,t=s.$.Deferred(),i=e.get("jobId");return a.default.addJob(i,{onSuccess:function(){e.fetch().then(function(){t.resolve()})},onFailure:function(){t.reject()}}),t.promise()}})},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(2);t.default=n.View.extend({className:"infobox infobox-no-border infobox-error status-infobox-error",template:'<p>{{i18n code="appinstance.assignments.report.download.report.error"}}</p>'})},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(2);t.default=n.View.extend({className:"last-run-result",events:{"click a":"downloadReport"},template:'<p>\t       <label>{{i18n code="appinstance.assignments.report.lastrun.text"}}</label> {{jobCompletedDateDisplay}}\t     </p>\t     {{#if __displayTimeRange__}}\t     <p>\t       <label>{{i18n code="appinstance.assignments.report.timerange.text"}}</label>\t       {{startDateDisplay}} {{i18n code="appinstance.assignments.report.timerange.to"}} {{endDateDisplay}}</p>\t     {{/if}}\t     <p>\t       <a href="#">{{i18n code="appinstance.assignments.report.download.lastreport.text" bundle="messages"}}</a>\t     </p>',downloadReport:function(e){e.stopPropagation(),e.preventDefault(),this.state.trigger("downloadReport",this.model.get("downloadCsvUrl"))}})},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(2);t.default=n.View.extend({className:"infobox infobox-no-border infobox-info status-infobox-loading",template:'<p>{{i18n code="appinstance.assignments.report.loading.infobox.text"}}</p>'})},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(2);t.default=n.View.extend({className:"infobox infobox-no-border infobox-success report-result",template:'<p>{{i18n code="appinstance.assignments.report.download.report.completed.text"}}</p>\t     <p class="completed-date">\t      {{i18n code="appinstance.assignments.report.lastrun.text"}} {{jobCompletedDateDisplay}}\t     </p>',initialize:function(){this.add((0,n.createButton)({title:(0,n.loc)("appinstance.assignments.report.download.report.button"),className:"button-primary button-download-report",icon:"download-16",events:{click:function(e){e.preventDefault(),this.state.trigger("downloadReport",this.model.get("downloadCsvUrl"))}}}))}})},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(2);t.default=n.View.extend({className:"infobox infobox-no-border infobox-warning status-infobox-running",template:'<p>{{i18n code="appinstance.assignments.report.running.text"}}<p>'})},function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=i(2),o=n(s);t.default=o.default.View.extend({className:"implicit-assignment-state",template:o.default.tpl('\t    <span class="icon icon-16 icon-only group-16"></span>\t    <h3>This app is implicitly assigned to all users</h3>\t    <h4>Your sign on policies will determine who is allowed to access the app</h4>\t  ')})},function(e,t,i){"use strict";function n(e){if(window.saasure&&window.saasure.GroupsSection){var t=window.saasure.GroupsSection(!0);e.listenTo(e,"runConvertAssignment",function(){t&&t.initConversionPage()})}else s.Logger.warn("can not init group conversion util due to window.saasure.GroupsSection is undefined ")}Object.defineProperty(t,"__esModule",{value:!0});var s=i(2);t.default={init:n}},function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=i(2),o=i(486),a=n(o),r=i(269),l=n(r),p=i(267),d=n(p),c={assignedSearchQuery:void 0,unassignedSearchQuery:void 0,newAssignmentCount:0};t.default=s.Controller.extend({state:c,events:{"click .gaa-edit-link":function(e){e.preventDefault(),this.state.trigger("editAppGroup",e.currentTarget.getAttribute("href").substring(1))},"click .gaa-delete-link":function(e){e.preventDefault();var t=e.currentTarget.getAttribute("id").replace("gaa-delete-link-",""),i=s.$.trim((0,s.$)("#group-app-assignment-row-"+t+" .app-info .name").text());this.state.trigger("unassignGroup",e.currentTarget.getAttribute("href").substring(1),i)},"click #assign-app-to-groups":function(e){e.preventDefault(),this.state.trigger("assignGroups")}},initialize:function(){this.appInstanceId=this.settings.get("appInstanceId"),this.addListeners()},addListeners:function(){this.listenTo(this.state,"unassignGroup",this.unassignGroup),this.listenTo(this.state,"assignGroups",this.renderAddModal),this.listenTo(this.state,"editAppGroup",this.renderEditModal),this.listenTo(this.state,"closeModal",this.updateListView)},renderAddModal:function(){this.modal&&this.modal.remove(),this.modal=new d.default({settings:this.settings,state:this.state,appInstanceId:this.settings.get("appInstanceId"),appInstanceLabel:this.settings.get("appInstanceName"),appName:this.settings.get("appUniqueName")}),this.modal.render()},renderEditModal:function(e){this.modal&&this.modal.remove(),this.modal=new a.default({state:this.state,groupId:e,appInstanceId:this.settings.get("appInstanceId"),appInstanceLabel:this.settings.get("appInstanceName"),appName:this.settings.get("appUniqueName"),title:(0,s.loc)("appinstance.groupassignment.edit.title")
}),this.modal.render()},unassignGroup:function(e,t){var i=new l.default.Model({id:e,__instanceId__:this.appInstanceId,__isNew__:!1}),n=this.updateListView;this.confirm({title:(0,s.loc)("appinstance.groupassignment.assigned.unassign.confirm.title"),subtitle:(0,s.loc)("appinstance.unassign.confirm.content","messages",[this.settings.get("appInstanceName"),t]),ok:function(){i.destroy().done(n)}})},updateListView:function(){window.location.reload()}})},function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=i(2),o=i(254),a=n(o),r=i(274),l=n(r),p=i(261),d=n(p),c=i(262),u=n(c),h=i(269),m=n(h),f=i(429),g=n(f),_=s.internal.views.forms.helpers.SchemaFormFactory;t.default=s.Controller.extend({initialize:function(){s._.bindAll(this,"renderDeleteModal","displayEditModal"),this.appInstanceId=this.options.appInstanceId,this.groupId=this.options.groupId,this.options.deleteApp?this.deleteAppAssignment():this.editAppAssignment()},deleteAppAssignment:function(){this.model=new m.default.Model({id:this.groupId,__instanceId__:this.appInstanceId}),this.model.fetch().then(this.renderDeleteModal)},renderDeleteModal:function(){var e=this;this.confirm({title:(0,s.loc)("group.confirm.delete.title"),subtitle:(0,s.loc)("group.confirm.delete.message","messages",[this.options.appInstanceLabel]),ok:function(){e.model.destroy(),(0,s.$)("li#"+e.appInstanceId).hide()}})},editAppAssignment:function(){var e=this,t={};this.settings.hasFeature("APPLICATION_ENTITLEMENT_POLICY")&&(t.expand=[m.default.EXPAND.METADATA]),this.model=new m.default.Model({id:this.groupId,__instanceId__:this.appInstanceId},t),this.appGroupProfile=new l.default.Model({id:this.appInstanceId}),this.possibleValues=new d.default({__instanceId__:this.appInstanceId}),this.userAssignmentHelpText=new u.default({instanceId:this.appInstanceId}),s.$.when(this.model.fetch(),this.appGroupProfile.fetch(),this.possibleValues.fetch(),this.userAssignmentHelpText.fetch()).then(function(){return e.entitlementFetch(e.appGroupProfile,e.model)}).then(this.displayEditModal)},displayEditModal:function(e){var t=_.prepareSchema(this.appGroupProfile.get("properties"),this.possibleValues.toJSON(),this.model);if(t.length>0)this.modal=new g.default({settings:this.settings,model:this.model,schemaProperties:t,state:this.state,title:this.options.title,appInstanceId:this.appInstanceId,appName:this.options.appName,entitlementAttributes:e,userAssignmentHelpText:this.userAssignmentHelpText}),this.modal.render();else{var i=this.options.appInstanceLabel;this.confirm({title:this.options.title,subtitle:(0,s.loc)("group.noprofile.modal.message","messages",[i,i,i]),save:(0,s.loc)("ok")})}},entitlementFetch:function(e,t){return this.settings.hasFeature("APPLICATION_ENTITLEMENT_POLICY")?a.default.createGAAEntitlementMeta(e,t):null}})},function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=i(2),o=i(488),a=n(o);t.default=s.Controller.extend({View:a.default})},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(2),s=(0,n.tpl)('\t    <div class="o-form-fieldset">\t      {{i18n code="appinstance.header.infomessage.firstline"}}\t    </div>\t    <div class="o-form-fieldset">\t      <a href="/admin/devices/mobile-policies" class="link-button">\t        {{i18n code="appinstance.header.infomessage.buttons.policies"}}\t      </a>\t    </div>\t    <div class="form-divider"></div>\t    <div class="o-form-fieldset">\t      <a href="/admin/apps/active" class="link-button button-primary">\t        &#8592; {{i18n code="appinstance.header.infomessage.buttons.back"}}\t      </a>\t    </div>\t      ');t.default=n.View.extend({className:"header-custom-warning",initialize:function(){this.add((0,n.createCallout)({title:(0,n.loc)("appinstance.header.infomessage.title"),content:s()}))}})},function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=i(2),o=i(490),a=n(o),r=i(491),l=n(r);t.default=s.Controller.extend({View:l.default,initialize:function(){this.model=new a.default,this.model.set("__instance_id__",this.options.appInstanceId),this.model.set("__application_type__",this.options.oidcApplicationType.toLowerCase()),this.model.fetch()}})},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(2);t.default=n.Model.extend({props:{client_id:"string",client_secret:"string",token_endpoint_auth_method:"string"},local:{__instance_id__:"string",__application_type__:{type:"string",value:"web"},__original_client_auth_method__:"string"},derived:{__show_client_secret__:{deps:["client_secret","token_endpoint_auth_method"],fn:function(e,t){return e&&("client_secret_basic"===t||"client_secret_post"===t||"client_secret_jwt"===t)}}},url:function(){return(0,n.tpl)("/api/v1/internal/apps/{{instanceId}}/settings/clientcreds")({instanceId:this.get("__instance_id__")})},parse:function(e){return n._.isNull(e)||n._.isUndefined(e)?null:(this.set("__original_client_auth_method__",e.token_endpoint_auth_method),e)}})},function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=i(2),o=i(286),a=n(o),r=i(492),l=n(r),p=new a.default.ClientMetrics;t.default=s.Form.extend({layout:"o-form-theme",title:(0,s.loc)("oauth.settings.client.panel.clientCredentials.title"),read:!0,autoSave:!1,className:"oidc-credentials-form",save:(0,s.loc)("oauth.settings.client.panel.clientCredentials.button.generateClientSecret"),noCancelButton:!0,readOnly:function(){return"browser"===this.model.get("__application_type__")||this.settings.get("shouldHideEditCapabilities")||!this.settings.hasPermission("manageOAuthClient")||!this.settings.hasPermission("active")},initialize:function(){this.addInput({label:(0,s.loc)("oauth.settings.client.clientId.label"),type:"text",name:"client_id",readOnly:!0,explain:(0,s.loc)("oauth.settings.client.clientId.help")}),this.addInput({label:(0,s.loc)("oauth.settings.client.tokenEndpointAuthMethod.label"),type:"radio",name:"token_endpoint_auth_method",options:{pkce:{label:(0,s.loc)("oauth.settings.client.tokenEndpointAuthMethod.pkce.value"),explain:(0,s.loc)("oauth.settings.client.tokenEndpointAuthMethod.pkce.explain")},client_secret:{label:(0,s.loc)("oauth.settings.client.tokenEndpointAuthMethod.secret.value"),explain:(0,s.loc)("oauth.settings.client.tokenEndpointAuthMethod.secret.explain")}},events:{"change :radio":s._.bind(this.__toggleButtons,this)},showWhen:{__application_type__:"native"},to:function(e){var t=this.model.get("__original_client_auth_method__");return"pkce"===e?"none":"client_secret_basic"===t||"client_secret_post"===t||"client_secret_jwt"===t?t:"client_secret_basic"},from:function(e){return"client_secret_basic"===e||"client_secret_post"===e||"client_secret_jwt"===e?"client_secret":"pkce"}}),this.addInput({label:(0,s.loc)("oauth.settings.client.clientSecret.label"),input:l.default,name:"client_secret",readOnly:!0,autoRender:!0,explain:s._.bind(function(){return"web"===this.model.get("__application_type__")?(0,s.loc)("oauth.settings.client.clientSecret.help"):null},this),showWhen:{__show_client_secret__:!0},params:{labels:{show:(0,s.loc)("oauth.settings.client.clientSecret.button.show"),hide:(0,s.loc)("oauth.settings.client.clientSecret.button.hide")}}}),this.listenTo(this.model,"change:__edit__",this.__toggleEditMode),this.listenTo(this.model,"change:__application_type__",this.__configToolbar),this.listenTo(this,"save",this.__submit),this.__configToolbar()},__configToolbar:function(){"native"===this.model.get("__application_type__")&&this.noCancelButton&&(this.save=null,this.noCancelButton=!1,this.addButton({text:(0,s.loc)("oauth.settings.client.panel.clientCredentials.button.generateClientSecret"),action:s._.bind(this.__generateNewSecret,this),type:"new-token"}))},__toggleButtons:function(){this.__removeMessage(),"client_secret_basic"!==this.model.get("token_endpoint_auth_method")&&"client_secret_post"!==this.model.get("token_endpoint_auth_method")&&"client_secret_jwt"!==this.model.get("token_endpoint_auth_method")||!this.model.get("client_secret")?this.$('input[data-type="new-token"]').hide():this.$('input[data-type="new-token"]').show()},__toggleEditMode:function(e,t){t||(this.latestClientSecret&&this.model.set("client_secret",this.latestClientSecret),this.__removeMessage())},__removeMessage:function(){this.messageBox&&(this.messageBox.remove(),this.messageBox=void 0)},__generateNewSecret:function(){var e=(0,s.tpl)("/oauth2/v1/clients/{{clientId}}/lifecycle/newSecret");s.$.ajax(e({clientId:this.model.get("client_id")}),{type:"POST"}).done(s._.bind(function(e){if(e&&e.client_secret){this.latestClientSecret=e.client_secret,this.model.set("client_secret",e.client_secret);var t={orgId:this.settings.attributes.orgId,clientId:e.client_id};p.trackClientCredentialsUpdated(t),this.messageBox||(this.messageBox=(0,s.createCallout)({type:"success",title:(0,s.loc)("oauth.settings.client.panel.clientCredentials.callout.clientSecretRegenerated")}),this.add(this.messageBox,".o-form-error-container"))}},this))},__submit:function(){if("native"===this.model.get("__application_type__"))if("none"===this.model.get("token_endpoint_auth_method")&&this.model.get("client_secret")||("client_secret_basic"===this.model.get("token_endpoint_auth_method")||"client_secret_post"===this.model.get("token_endpoint_auth_method")||"client_secret_jwt"===this.model.get("token_endpoint_auth_method"))&&!this.model.get("client_secret")){this.latestClientSecret=void 0,this.model.unset("client_secret"),this.model.save();var e={orgId:this.settings.attributes.orgId,clientId:this.model.get("client_id")};p.trackClientCredentialsUpdated(e)}else this.model.set("__edit__",!1);else"web"!==this.model.get("__application_type__")&&"service"!==this.model.get("__application_type__")||this.__generateNewSecret()}})},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(2),s=n.internal.views.forms.inputs.TextBox;t.default=s.extend({readMode:function(){var e=this;s.prototype.readMode.apply(this,arguments);var t=this.options.params.labels&&this.options.params.labels||{},i=!1;"text"!==this.options.type&&(i=!0,this.$el.text("****************************************"));var o=(0,n.$)("<span />").addClass("link-button secret-text-button").text(i?t.show:t.hide).click(function(){e.options.type=i?"text":"password",e.render()});this.$el.prepend((0,n.$)("<span>&nbsp;</span>")),this.$el.prepend(o)}})},function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=i(2),o=i(494),a=n(o),r=i(495),l=n(r);t.default=s.Controller.extend({View:l.default,initialize:function(){this.model=new a.default({instanceId:this.options.appInstanceId}),this.model.fetch({success:s._.bind(function(){this.first().remove(),this.add(new this.View(this.toJSON())),this._toggleAppEmbeddedLink()},this)}),this.listenTo(this.model,"change:grant_types",this._toggleAppEmbeddedLink),this.listenTo(this.model,"change:login_initiated_by",this._toggleAppEmbeddedLink),this.listenTo(this.model,"change:__edit__",this._toggleAppEmbeddedLink),this.listenTo(this.model,"sync",this._updateAppLabel)},_toggleAppEmbeddedLink:function(){"OKTA_OR_APP"===this.model.get("login_initiated_by")&&s._.contains(this.model.get("grant_types"),"implicit")?(0,s.$)("#app-embedded-link-container").show():(0,s.$)("#app-embedded-link-container").hide()},_updateAppLabel:function(){(0,s.$)("#app-instance-name").html(this.model.escape("label"))},postRender:function(){this.$el.attr("data-appinstance-id",this.options.appInstanceId)}})},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(2);t.default=n.Model.extend({props:{instanceId:"string",label:"string",application_type:{type:"string",values:["web","browser","native","service"],required:!0,value:"web"},grant_types:["array",!0,[]],response_types:["array",!0,[]],redirect_uris:["array",!0,[]],login_initiated_by:{type:"string",values:["APP","OKTA_OR_APP"],value:"APP"},login_flow_type:{type:"string",values:["SP","IDP"],required:!1,value:"SP"},app_visibility:"array",initiate_login_uri:"string",okta_initiate_login_scope:"array"},derived:{displayApplicationType:{deps:["application_type"],fn:function(e){switch(e){case"web":return(0,n.loc)("oauth.settings.client.applicationType.value.web");case"browser":return(0,n.loc)("oauth.settings.client.applicationType.value.browser");case"native":return(0,n.loc)("oauth.settings.client.applicationType.value.native")}return""}},displayLoginInitiatedBy:{deps:["application_type","grant_types"],fn:function(e,t){return("web"===e||"browser"===e)&&n._.contains(t||[],"implicit")}}},local:{__implicit_response_types__:["array",!0,[]]},extraProperties:!0,url:function(){return(0,n.tpl)("/api/v1/internal/apps/{{instanceId}}/settings/oidc")({instanceId:this.get("instanceId")})},validate:function(e){if(n._.contains(e.grant_types,"implicit")&&n._.isEmpty(e.__implicit_response_types__))return{__implicit_response_types__:(0,n.loc)("oauth.error.client.implicit_requires_at_least_one_token_response_type")}},toJSON:function(){var e=n.Model.prototype.toJSON.apply(this,arguments),t=n._.contains(e.grant_types,"implicit");return t||(e.login_initiated_by=null),"service"!==e.application_type&&(e.response_types=n._.without(e.response_types,"id_token","token"),t&&(e.response_types=n._.union(e.response_types,this.get("__implicit_response_types__")))),e},parse:function(e){return n._.isNull(e)||n._.isUndefined(e)?null:(e.grant_types&&n._.contains(e.grant_types,"implicit")?e.response_types&&this.set("__implicit_response_types__",n._.intersection(e.response_types,["id_token","token"])):this.set("__implicit_response_types__",["id_token"]),e)}})},function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=i(2),o=i(286),a=n(o),r=s.internal.views.forms.inputs.SimpleCheckBoxSet,l=new a.default.ClientMetrics;t.default=s.Form.extend({layout:"o-form-theme",title:(0,s.loc)("idp.config.generalSettings"),read:!0,autoSave:!0,className:"oidc-settings-form",readOnly:function(){return this.settings.get("shouldHideEditCapabilities")||!this.settings.hasPermission("manageOAuthClient")||!this.settings.hasPermission("active")},initialize:function(){if(this.addInput({label:(0,s.loc)("appwizard.general.appLabel"),type:"text",name:"label",errorField:"client_name"}),"SERVICE"!==this.settings.get("oidcApplicationType")){this.addInput({label:(0,s.loc)("oauth.settings.client.applicationType.label"),type:"text",name:"displayApplicationType",readOnly:!0});var e=s._.contains(["web","native"],this.model.get("application_type")),t={},i={};this.settings.hasFeature("API_ACCESS_MANAGEMENT")&&"web"===this.model.get("application_type")&&(t.client_credentials=(0,s.loc)("idp.config.oidc.settings.allowedGrantTypes.clientCredentials")),e&&(t.authorization_code=(0,s.loc)("oauth.settings.client.grantTypes.code.value"),t.refresh_token=(0,s.loc)("oauth.settings.client.grantTypes.refreshToken.value"),i.authorization_code=!0),"native"===this.model.get("application_type")&&(t.password=(0,s.loc)("oauth.settings.client.grantTypes.resourceOwnerPassword.value")),"browser"===this.model.get("application_type")?(t.implicit=(0,s.loc)("oauth.settings.client.grantTypes.implicit.value"),i.implicit=!0):t.implicit=(0,s.loc)("oauth.settings.client.grantTypes.implicit.hybrid.value"),this.addInput({type:"checkboxset",label:(0,s.loc)("oauth.settings.client.grantTypes.label"),options:t,name:"grant_types",params:{disabledKeys:i}}),this.addInput({type:"checkboxset",name:"__implicit_response_types__",options:{id_token:(0,s.loc)("oauth.settings.client.grantTypes.implicit.idToken.subvalue"),token:(0,s.loc)("oauth.settings.client.grantTypes.implicit.accessToken.subvalue")},showWhen:{grant_types:function(e){return s._.contains(e,"implicit")}}}),this.addInput({type:"list",name:"redirect_uris",label:(0,s.loc)("oauth.settings.client.loginRedirectUris.label"),tooltip:(0,s.loc)("oauth.settings.client.loginRedirectUris.help"),input:{type:"text",name:"uri"},from:function(e){return s._.map(e||[],function(e){return{uri:e}})},to:function(e){return s._.compact(s._.pluck(e,"uri"))},params:{addLabel:(0,s.loc)("oauth.settings.addUri")}}),this.addInput({type:"list",name:"post_logout_redirect_uris",label:(0,s.loc)("oauth.settings.client.postLogoutRedirectUris.label"),tooltip:(0,s.loc)("oauth.settings.client.postLogoutRedirectUris.help"),input:{type:"text",name:"uri"},from:function(e){return s._.map(e||[],function(e){return{uri:e}})},to:function(e){return s._.compact(s._.pluck(e,"uri"))},params:{addLabel:(0,s.loc)("oauth.settings.addUri")}}),this.addInput({label:(0,s.loc)("oauth.settings.client.loginInitiatedBy.label"),type:"select",name:"login_initiated_by",options:{APP:(0,s.loc)("oauth.settings.client.loginInitiatedBy.app.value"),OKTA_OR_APP:(0,s.loc)("oauth.settings.client.loginInitiatedBy.oktaOrApp.value")},showWhen:{displayLoginInitiatedBy:!0}}),this.addInput({input:r,label:(0,s.loc)("oauth.settings.client.appVisibility.label"),options:{WEB:(0,s.loc)("oauth.settings.client.appVisibility.webChiclet.value"),MOBILE:(0,s.loc)("oauth.settings.client.appVisibility.mobileChiclet.value")},name:"app_visibility",showWhen:{displayLoginInitiatedBy:!0,login_initiated_by:"OKTA_OR_APP"}}),this.addInput({label:(0,s.loc)("oauth.settings.client.loginFlow.label"),type:"radio",options:{SP:(0,s.loc)("oauth.settings.client.loginFlow.oidcSpec.value"),IDP:(0,s.loc)("oauth.settings.client.loginFlow.oktaRecommended.value")},name:"login_flow_type",showWhen:{displayLoginInitiatedBy:!0,application_type:"browser",login_initiated_by:"OKTA_OR_APP"}}),this.addInput({label:(0,s.loc)("oauth.settings.client.initiateLoginUri.label"),type:"text",name:"initiate_login_uri",showWhen:{displayLoginInitiatedBy:!0,login_initiated_by:"OKTA_OR_APP",login_flow_type:"SP"}}),this.addInput({input:r,label:(0,s.loc)("oauth.settings.client.scopes.label"),options:{profile:(0,s.loc)("oauth.settings.client.scopes.profile.value"),email:(0,s.loc)("oauth.settings.client.scopes.email.value"),address:(0,s.loc)("oauth.settings.client.scopes.address.value"),phone:(0,s.loc)("oauth.settings.client.scopes.phone.value"),groups:(0,s.loc)("oauth.settings.client.scopes.groups.value")},name:"okta_initiate_login_scope",showWhen:{displayLoginInitiatedBy:!0,login_initiated_by:"OKTA_OR_APP",login_flow_type:"IDP"}}),this.listenTo(this.model,"change:__edit__",this.__onBeforeEdit),this.listenTo(this,"save",this.__onBeforeSave),this.listenTo(this,"saved",this.__onAfterSave)}},__onBeforeSave:function(){"OKTA_OR_APP"===this.model.get("login_initiated_by")&&"SP"===this.model.get("login_flow_type")||this.model.unset("initiate_login_uri")},__onAfterSave:function(){var e={orgId:this.settings.attributes.orgId,clientId:this.model.get("clientId")};l.trackGeneralSettingsUpdated(e)},__onBeforeEdit:function(){this.model.get("initiate_login_uri")||(this.model.set("initiate_login_uri",this.model.get("redirect_uris")[0]),this.render())}})},function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=i(2),o=i(497),a=n(o),r=i(498),l=n(r);t.default=s.Controller.extend({View:l.default,initialize:function(){this.model=new a.default({instanceId:this.options.appInstanceId}),this.model.fetch()}})},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(2);t.default=n.Model.extend({props:{instanceId:"string",auto_key_rotation:"boolean"},url:function(){return(0,n.tpl)("/api/v1/internal/apps/{{instanceId}}/settings/oauth/tokenCredentials")({instanceId:this.get("instanceId")})}})},function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=i(2),o=i(286),a=n(o),r=i(490),l=n(r),p=new a.default.ClientMetrics;t.default=s.Form.extend({layout:"o-form-theme",title:(0,s.loc)("oauth.settings.client.panel.tokenCredentials.title"),read:!0,autoSave:!0,className:"oauth-token-credentials-form",readOnly:function(){return this.settings.get("shouldHideEditCapabilities")||!this.settings.hasPermission("manageOAuthClient")||!this.settings.hasPermission("active")},initialize:function(){this.addInput({type:"select",name:"auto_key_rotation",label:(0,s.loc)("oauth.settings.client.keyRotation.label"),tooltip:(0,s.loc)("oauth.settings.client.keyRotation.help"),options:{true:(0,s.loc)("oauth.settings.keyRotation.value.automatic"),false:(0,s.loc)("oauth.settings.keyRotation.value.manual")},to:function(e){return"true"===e},from:function(e){return(!!e).toString()},disabled:!this.settings.hasFeature("KEY_ROLLOVER")}),this.listenTo(this,"saved",this.__onAfterSave)},__onAfterSave:function(){var e=this,t=new l.default;t.set("__instance_id__",this.model.get("instanceId")),t.fetch().done(function(){var i={orgId:e.settings.attributes.orgId,clientId:t.get("client_id")};p.trackTokenCredentialsUpdated(i)})}})},function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=i(2),o=i(500),a=n(o),r=i(501),l=n(r);t.default=s.Controller.extend({View:l.default,initialize:function(){this.model=new a.default({instanceId:this.options.appInstanceId}),this.model.fetch()}})},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(2);t.default=n.Model.extend({props:{instanceId:"string",issuer:"string",audience:"string",valueType:{type:"string",values:["GROUPS","EXPRESSION"],required:!0,value:"GROUPS"},groupFilterType:{type:"string",values:["STARTS_WITH","EQUALS","CONTAINS","REGEX"],required:!0,value:"STARTS_WITH"}},derived:{claimsDescription:{fn:function(){return(0,n.loc)("oauth.settings.client.claims.readOnlyValue")}}},local:{__group_filter_name__:["string",!1,"groups"],__group_filter_value__:["string",!1,""],__group_expression_name__:["string",!1,"groups"],__group_expression_value__:["string",!1,""]},toJSON:function(){var e=n.Model.prototype.toJSON.apply(this,arguments);return"GROUPS"===this.get("valueType")?(e.name=this.get("__group_filter_name__"),e.value=this.get("__group_filter_value__")):(e.name=this.get("__group_expression_name__"),e.value=this.get("__group_expression_value__")),e},parse:function(e){return e.__group_expression_name__="groups",e.__group_filter_name__="groups","GROUPS"===e.valueType?(e.__group_filter_name__=e.name,e.__group_filter_value__=e.value):(e.__group_expression_name__=e.name,e.__group_expression_value__=e.value),e},extraProperties:!0,url:function(){return(0,n.tpl)("/api/v1/internal/apps/{{instanceId}}/settings/oauth/idToken")({instanceId:this.get("instanceId")})}})},function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=i(2),o=i(286),a=n(o),r=i(490),l=n(r),p=s.internal.views.forms.inputs.TextBox,d=new a.default.ClientMetrics;t.default=s.Form.extend({layout:"o-form-theme",title:(0,s.loc)("oauth.settings.client.panel.idToken.title"),read:!0,autoSave:!0,className:"oauth-oidc-form",readOnly:function(){return this.settings.get("shouldHideEditCapabilities")||!this.settings.hasPermission("manageOAuthClient")||!this.settings.hasPermission("active")},initialize:function(){this.addInput({label:(0,s.loc)("oauth.settings.client.issuer.label"),type:"text",name:"issuer",readOnly:!0}),this.addInput({label:(0,s.loc)("oauth.settings.client.audience.label"),type:"text",name:"audience",readOnly:!0}),this.addInput({label:(0,s.loc)("oauth.settings.client.claims.label"),type:"text",name:"claimsDescription",readOnly:!0}),this.addInput({label:(0,s.loc)("oauth.settings.client.groupsClaimType.label"),type:"select",name:"valueType",options:{GROUPS:(0,s.loc)("oauth.settings.client.groupsClaimType.filter.value"),EXPRESSION:(0,s.loc)("oauth.settings.client.groupsClaimType.expression.value")},readModeString:function(){return this.model.get("valueType")?null:" "}}),this.addInput({label:(0,s.loc)("oauth.settings.client.groupsClaimFilter.label"),tooltip:(0,s.loc)("oauth.settings.client.groupsClaimFilter.help"),input:[{type:"text",name:"__group_filter_name__",errorField:"name",placeholder:(0,s.loc)("oauth.settings.client.groupsClaim.claimName.placeholder"),input:p.extend({className:"o-form-input-group"}),readModeString:function(){return this.model.get("__group_filter_value__")?null:(0,s.loc)("oauth.settings.none.readOnlyValue")}},{type:"select+text",name:["__group_filter_value__","groupFilterType"],errorField:"groupFilterType",placeholder:[(0,s.loc)("oauth.settings.client.groupsClaimFilter.enterAValue.placeholder"),null],options:{STARTS_WITH:(0,s.loc)("oauth.settings.filter.startsWith"),EQUALS:(0,s.loc)("oauth.settings.filter.equals"),CONTAINS:(0,s.loc)("oauth.settings.filter.contains"),REGEX:(0,s.loc)("oauth.settings.filter.regex")},readModeString:function(){return this.model.get("__group_filter_value__")?null:" "}}],showWhen:{valueType:"GROUPS"}}),this.addInput({label:(0,s.loc)("oauth.settings.client.groupsClaimExpression.label"),tooltip:(0,s.loc)("oauth.settings.client.groupsClaimExpression.help"),input:[{type:"text",name:"__group_expression_name__",errorField:"name",placeholder:(0,s.loc)("oauth.settings.client.groupsClaim.claimName.placeholder"),readModeString:function(){return this.model.get("__group_expression_value__")?null:(0,s.loc)("oauth.settings.none.readOnlyValue")}},{type:"text",name:"__group_expression_value__",placeholder:(0,s.loc)("oauth.settings.client.groupsClaimExpression.inputExpression.placeholder"),readModeString:function(){return this.model.get("__group_expression_value__")?null:" "}}],showWhen:{valueType:"EXPRESSION"}}),this.listenTo(this,"saved",this.__onAfterSave)},__onAfterSave:function(){var e=this,t=new l.default;t.set("__instance_id__",this.model.get("instanceId")),t.fetch().done(function(){var i={orgId:e.settings.attributes.orgId,clientId:t.get("client_id")};d.trackOIDCTokenSettingsUpdated(i)})}})},function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=i(2),o=i(64),a=n(o),r=i(255),l=n(r),p=i(258),d=n(p),c=i(503),u=n(c),h=i(504),m=n(h);t.default=s.Controller.extend({initialize:function(){this.oktaUserProfile=new l.default.Model({id:"default"}),this.appUserProfile=new a.default.Model({id:"effective"},{instanceId:this.settings.get("appInstanceId")}),this.previewSourceModel=new u.default.Model;var e=this;this.previewSourceModel.set("sourceExpression",(0,s.$)(this.settings.get("importUserNameInput")).val()),(0,s.$)(this.settings.get("importUserNameInput")).on("change",function(){e.previewSourceModel.set("sourceExpression",(0,s.$)(this).val())}),s._.bindAll(this,"renderPreviewView")},postRender:function(){s.$.when(this.oktaUserProfile.fetch(),this.appUserProfile.fetch()).done(this.renderPreviewView)},renderPreviewView:function(){var e=new d.default({sourceId:this.appUserProfile.get("id"),targetId:this.oktaUserProfile.get("id"),includeAllTargetFields:!1}),t=new m.default({model:e,sourceModel:this.previewSourceModel,targetField:"login"});this.add(t)}})},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(2),s=n.Model.extend({props:{sourceExpression:["string",!1,""]}});t.default={Model:s}},function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=i(2),o=i(505),a=n(o),r=s.internal.views.forms.helpers.ErrorParser,l=s.View.extend({className:"margin-top-15",template:'\t      <div class="preview-mapping-result">\t        <div class="target-name">{{targetValue}}</div>\t      </div>\t    '}),p=(0,s.tpl)('<p class="okta-form-input-error o-form-input-error o-form-explain">\t    <span class="icon icon-16 error-16-small"></span>{{error}}</p>');t.default=s.View.extend({className:"mapping-previewer margin-top-15 o-form-input",modelEvents:{sync:"handleSaveSuccess",error:"handleSaveError"},initialize:function(){s._.bindAll(this,"fetchPreviewSuccess","fetchPreviewError","clearPreviewResult","previewResultViewChanged","clearError","showError"),this.previewUserPicker=this.add(a.default,{options:{model:this.model,placeholder:(0,s.loc)("appinstance.signon.preview.userPicker.placeholder")}}).last(),this.listenTo(this.previewUserPicker,"onSelect",this.previewMappingFetch),this.listenTo(this.previewUserPicker,"onClear",this.clearPreview)},resetPicker:function(){this.previewUserPicker.resetPicker()},clearPreview:function(){this.clearError(),this.clearPreviewResult(),this.previewResultViewChanged()},clearPreviewResult:function(){this.previewMapping&&this.previewMapping.remove()},previewResultViewChanged:function(){this.trigger("change:previewResultView")},previewMappingFetch:function(){var e=[{targetField:this.options.targetField,sourceExpression:this.options.sourceModel.get("sourceExpression")}];this.model.set("propertyMappings",e),this.model.save()},handleSaveSuccess:function(){this.clearError(),this.clearPreviewResult(),this.fetchPreviewSuccess(),this.previewResultViewChanged()},handleSaveError:function(e,t){this.clearError(),this.clearPreviewResult(),this.fetchPreviewError(t),this.previewResultViewChanged()},fetchPreviewSuccess:function(){var e=s._.where(this.model.get("propertyMappings"),{targetField:this.options.targetField});if(s._.isArray(e)&&e[0])if(e[0].error)this.showError(e[0].error);else{var t=new l({targetValue:e[0].value||"null"});this.previewMapping=this.add(t).last()}else this.showError((0,s.loc)("appinstance.signon.preview.error"))},fetchPreviewError:function(e){var t=this.getFirstErrorSummary(e)||(0,s.loc)("appinstance.signon.preview.error");this.showError(t)},getFirstErrorSummary:function(e){var t=r.getResponseJSON(e),i=s._.head(t.errorCauses);return i&&i.errorSummary||t.errorSummary},showError:function(e){this.$el.addClass("o-form-has-errors"),this.$(".o-form-control, .o-form-label-inline").addClass("o-form-has-errors input-fix"),this.previewMapping=this.add(p({error:e})).last(),this.trigger("error:previewResultView")},clearError:function(){this.$el.removeClass("o-form-has-errors"),this.$(".o-form-has-errors").removeClass("o-form-has-errors"),this.trigger("clearerror:previewResultView")}})},function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=i(104),o=n(s);t.default=o.default.extend({className:"preview-user-picker o-form-input-group margin-top-15",template:'\t      <div class="o-form-input-group-controls">\t        <span class="input-fix o-form-control">\t          <input type="text" \t            placeholder="{{placeholder}}"/>\t        </span>\t        <div class="o-form-label-inline">\t          <span class="icon visibility-16"></span>\t        </div>\t      </div>\t    '})},function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=i(2),o=i(507),a=n(o);t.default=s.Controller.extend({state:{provisionSettingType:null,provisionSubFilter:null},postRender:function(){var e=this.toJSON(s._.omit(this.options,"el"));this.add(new a.default(e))}})},function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function s(e){if(Array.isArray(e)){for(var t=0,i=Array(e.length);t<e.length;t++)i[t]=e[t];return i}return Array.from(e)}Object.defineProperty(t,"__esModule",{value:!0});var o=i(2),a=i(234),r=n(a),l=i(261),p=n(l),d=i(64),c=n(d),u=i(255),h=n(u),m=i(256),f=n(m),g=i(508),_=n(g),v=i(510),y=n(v),b=i(522),A=n(b),w=i(523),I=n(w),E=o.internal.views.datalist.util.FilterFactory,N=o.internal.views.forms.helpers.SchemaFormFactory,x=o._.property("label"),T={"create-n-update":{title:(0,o.loc)("appinstance.provisioning.settings.provisioningToApp"),label:(0,o.loc)("appinstance.provisioning.settings.to.app"),fn:"setupCreateAndUpdate"},"import-n-mastering":{title:(0,o.loc)("appinstance.provisioning.settings.importIntoOkta"),
label:(0,o.loc)("appinstance.provisioning.settings.to.okta"),fn:"setupImportAndMastering"},"api-credentials":{title:(0,o.loc)("appinstance.provisioning.settings.apiIntegration"),label:(0,o.loc)("appinstance.provisioning.settings.apiIntegration"),fn:"setupAPICredentials"}},S=o._.mapObject(T,x),M="mapping-direction-icons-container",P="required-mapping-warning-container",C=(0,o.tpl)('<div class="float-left app-logo"><img src="{{fromUrl}}" /></div>\t        <span class="float-left icon icon-16 icon-only arrow-right-16"></span>\t        <div class="float-left app-logo"><img src="{{toUrl}}" /></div>'),O="/img/logos/okta-logo.png";t.default=o.View.extend({stateEvents:{"change:provisionSettingType":"handleFilterChange","missed:required:mappings":"renderRequiredMappingWarning"},filterOptions:function(){return this.isProvisionEnabled()?S:o._.pick(S,"api-credentials")},filterEvents:o._.mapObject(T,o._.property("fn")),filterTitles:function(){var e=o._.mapObject(T,o._.property("title"));return this.settings.hasFeature("PROFILE_MASTER_USER_LIFECYCLE_SETTINGS")&&(e["import-n-mastering"]=(0,o.loc)("appinstance.provisioning.settings.import.general")),e},className:"data-list data-list-sidebar-left clearfix",isProvisionEnabled:function(){return this.settings.get("isApiEnabled")===!0&&this.appInstance.get("__provisionEnabled__")===!0},handleFilterChange:function(e,t){this.ProfileMasterLifecycleSettingsView&&this.ProfileMasterLifecycleSettingsView.remove();var i=this.filterEvents[t],n=this.filterTitles()[t],s=this.$(this.provisionSettingsForm+" .ajax-form-cancel-link");s.is(":visible")&&s.get(0)&&o._.isFunction(s.get(0).click)&&s.get(0).click(),this.abortAttributeTableDataXHR(),this.removeExistsAttributeTable(),this.removeRequiredMappingWarning(),this.removeMappingDirectionIcons(),this.updateSettingTitle(n),this.$(".app-help-text-container").hide(),this.$(".js-enable-provision-features").hide(),this.isProvisionEnabled()||(this.$(this.provisionSettingsForm+" .js-provision-settings-form-title").css("visibility","hidden"),this.$(".link-bar .ajax-form-edit-link").css("visibility","hidden"),this.$(this.provisionSettingsForm).hide()),o._.keys(this.filterOptions()).length>1?this.state.set("provisionSubFilter",t):this.state.set("provisionSubFilter",""),this[i](),this.configureSubSectionLayout()},configureSubSectionLayout:function(){this.$(".js-setting-section.top-configure-section").removeClass("top-configure-section"),this.$("form").each(function(){var e=(0,o.$)(this).find(".js-setting-section").filter(function(){var e=(0,o.$)(this);return"block"===e.css("display")});(0,o.$)(e[0]).addClass("top-configure-section")})},abortAttributeTableDataXHR:function(){o._.each(this.attributeTableDataXHR,function(e){e&&4!==e.readState&&o._.isFunction(e.abort)&&e.abort()})},removeExistsAttributeTable:function(){this.attributeTableView&&(this.attributeTableView.remove(),this.attributeTableView=null)},removeMappingDirectionIcons:function(){this.$("."+M).empty()},updateSettingTitle:function(e){this.$(this.provisionSettingsForm+" .js-provision-settings-form-title").text(e)},setupAPICredentials:function(){this.$(this.provisionSettingsForm).show(),this.$(".app-help-text-container").show(),this.$(".js-enable-provision-features").show(),this.tailorSettingsForm([" .js-settings-api-credentials"," .user-management-form-controls"],[" .provisioning-feature"," .js-provision-type-supported"," .default-entitlements-mapping-divider"," .legacy-attributes-and-mappings-container"])},setupImportAndMastering:function(){var e=void 0,t=void 0;this.addMappingDirectionIcons("APP_TO_OKTA"),this.settings.hasFeature("PROFILE_MASTER_USER_LIFECYCLE_SETTINGS")?(e=[" .user-management-form-controls"," .provisioning-feature"," .provisioning-feature .js-settings-import-new-users"],t=[" .js-settings-api-credentials"," .js-provision-type-supported"," .provisioning-feature .js-settings-profile-master"," .provisioning-feature .js-settings-push-new-users"," .provisioning-feature .js-settings-push-profiles"," .provisioning-feature .js-settings-deactivations"," .provisioning-feature .js-settings-push-password"," .legacy-attributes-and-mappings-container"],this.settings.hasFeature("DEFAULT_ENTITLEMENTS_MAPPING")?e.push(" .default-entitlements-mapping-divider"):t.push(" .default-entitlements-mapping-divider"),this.tailorSettingsForm(e,t),this.ProfileMasterLifecycleSettingsView=new I.default({settings:this.settings}),this.add(this.ProfileMasterLifecycleSettingsView,this.options.profileMasterUserLifecycleSettingsContainer)):(e=[" .provisioning-feature"," .provisioning-feature .js-settings-import-new-users"," .provisioning-feature .js-settings-profile-master"," .user-management-form-controls"],t=[" .js-settings-api-credentials"," .js-provision-type-supported"," .provisioning-feature .js-settings-push-new-users"," .provisioning-feature .js-settings-push-profiles"," .provisioning-feature .js-settings-deactivations"," .provisioning-feature .js-settings-push-password"," .legacy-attributes-and-mappings-container"],this.settings.hasFeature("DEFAULT_ENTITLEMENTS_MAPPING")?e.push(" .default-entitlements-mapping-divider"):t.push(" .default-entitlements-mapping-divider"),this.tailorSettingsForm(e,t)),this.settings.hasFeature("DEFAULT_ENTITLEMENTS_MAPPING")&&this.fetchAppToOktaMapping().then(this.renderImportedAttributeView)},fetchAppToOktaMapping:function(){var e=this.appUserProfile.get("id"),t=this.oktaUserProfile.get("id"),i={source:e,target:t};return this.attributeTableDataXHR=[this.appToOktaMapping.fetch({data:i})],o.$.when.apply(o.$,s(this.attributeTableDataXHR))},renderImportedAttributeView:function(){this.appToOktaCollection=_.default.createCollection(this.appUserProfile,this.oktaUserProfile,this.appToOktaMapping),this.attributeTableView=this.add(y.default,{selector:".provision-form-container",options:{mappingModel:this.appToOktaMapping,collection:this.appToOktaCollection,appInstance:this.appInstance,sourceProfile:this.appUserProfile,targetProfile:this.oktaUserProfile,state:this.state}}).last()},setupCreateAndUpdate:function(){var e=[" .provisioning-feature"," .js-provision-type-supported"," .provisioning-feature .js-settings-push-new-users"," .provisioning-feature .js-settings-push-profiles"," .provisioning-feature .js-settings-push-password"," .provisioning-feature .js-settings-deactivations"," .user-management-form-controls"," .default-entitlements-mapping-divider"],t=[" .js-settings-api-credentials"," .provisioning-feature .js-settings-import-new-users"," .provisioning-feature .js-settings-profile-master"];this.settings.hasFeature("DEFAULT_ENTITLEMENTS_MAPPING")?t.push(" .legacy-attributes-and-mappings-container"):e.push(" .legacy-attributes-and-mappings-container"),this.addMappingDirectionIcons("OKTA_TO_APP"),this.tailorSettingsForm(e,t),this.settings.hasFeature("DEFAULT_ENTITLEMENTS_MAPPING")&&this.fetchOktaToAppMapping().then(this.renderProvisioningAttributeView)},fetchOktaToAppMapping:function(){var e=this.oktaUserProfile.get("id"),t=this.appUserProfile.get("id"),i={source:e,target:t};return this.attributeTableDataXHR=[this.oktaToAppMapping.fetch({data:i}),this.possibleValues.fetch(),this.groupAppUserProfile.fetch()],o.$.when.apply(o.$,s(this.attributeTableDataXHR)).then(this.augmentSchemaProperties)},augmentSchemaProperties:function(){var e=this.appUserProfile.get("properties"),t=this.possibleValues.toJSON();N.hasValidSchemaProps(e,t)&&(N.augmentSchemaProps(e,t,new o.Model),this.appUserProfile.set("properties",e))},renderProvisioningAttributeView:function(){var e=this.groupAppUserProfile.get("properties"),t=e?e.map(function(e){return e.get("name")}):[];this.oktaToAppCollection=_.default.createCollection(this.oktaUserProfile,this.appUserProfile,this.oktaToAppMapping),this.oktaToAppCollection.resetAttributeScope(t),this.attributeTableView=this.add(A.default,{selector:".provision-form-container",options:{mappingModel:this.oktaToAppMapping,collection:this.oktaToAppCollection,appInstance:this.appInstance,targetProfile:this.appUserProfile,sourceProfile:this.oktaUserProfile,state:this.state}}).last()},tailorSettingsForm:function(e,t){var i=function(e){return this.provisionSettingsForm+e},n=o._.map(e,i,this).join(", "),s=o._.map(t,i,this).join(", ");this.$(s).hide(),this.$(n).show()},addMappingDirectionIcons:function(e){var t=this.appInstance.get("__logoUrl__"),i="."+M,n={};"APP_TO_OKTA"===e?n={fromUrl:t,toUrl:O}:"OKTA_TO_APP"===e&&(n={fromUrl:O,toUrl:t}),this.add(C(n),{selector:i})},renderRequiredMappingWarning:function(e,t){if(this.removeRequiredMappingWarning(),!o._.isEmpty(e)){var i=(0,o.createCallout)({type:"warning",subtitle:(0,o.loc)("appinstance.provisioning.attributesTable.unmapped.attributes.warning.title","messages",[t])});this.add(i,{selector:"."+P})}},removeRequiredMappingWarning:function(){this.$("."+P).empty()},initialize:function(){this.provisionSettingsForm=this.settings.get("provisionSettingsForm"),this.appInstanceId=this.settings.get("appInstanceId"),this.appInstance=new r.default.Model({id:this.appInstanceId}),this.oktaUserProfile=new h.default.Model({id:"default"},{expand:["schema"]}),this.appUserProfile=new c.default.Model({id:"effective"},{instanceId:this.appInstanceId,expand:["schema","appLogo","app"]}),this.possibleValues=new p.default({__instanceId__:this.settings.get("appInstanceId")}),this.appToOktaMapping=new f.default.Model,this.oktaToAppMapping=new f.default.Model,this.groupAppUserProfile=new c.default.Model({id:"groups"},{instanceId:this.appInstanceId,expand:"schema"}),o._.bindAll(this,"renderViews","renderImportedAttributeView","renderProvisioningAttributeView","augmentSchemaProperties")},postRender:function(){this.fetchProfiles().then(this.renderViews)},fetchProfiles:function(){return o.$.when(this.appInstance.fetch(),this.oktaUserProfile.fetch(),this.appUserProfile.fetch())},renderViews:function(){this.add(E.createFilters([{type:"filterset",label:"Settings",field:"provisionSettingType",options:this.filterOptions()}])),this.renderMainContaner(),this.renderMissingRequiredInfoContaner(),this.renderMappingDirectionIconsContainer(),this.renderHelpText(),this.renderSettingsForm(),this.state.set("provisionSettingType",this.getDefaultSettingType()),this.$(this.provisionSettingsForm).css("visibility","visible")},getDefaultSettingType:function(){var e=this.options.provisionSubFilter,t=this.filterOptions();return o._.has(t,e)?e:o._.first(o._.keys(t))},renderMainContaner:function(){this.add('<div class="data-list-content-wrap"><div class="data-list-content provision-form-container"></div></div>')},renderMissingRequiredInfoContaner:function(){this.add('<div class="'+P+'"></div>',{selector:".provision-form-container"})},renderMappingDirectionIconsContainer:function(){this.add('<div class="'+M+'"></div>',{selector:".provision-form-container"})},renderHelpText:function(){var e=(0,o.$)("#appHelp").detach(),t=o.$.trim(e.html());o._.isEmpty(t)||(this.add('<div class="infobox clearfix margin-btm-15 app-help-text-container"><span class="icon info-16"></span></div>',{selector:".provision-form-container"}),e.find("ul").addClass("bullets"),t=e.html().replace(/\<h[4-6]\>/g,"<h3>"),this.$(".app-help-text-container").append(t))},renderSettingsForm:function(){if(!this.options.hideProvisionForm){var e=(0,o.$)(this.provisionSettingsForm);e.find(".js-settings-api-credentials-title").hide(),e.find(".js-provision-feature-title").hide(),e.find(".js-provision-type-supported-title").hide(),e.appendTo(this.$(".provision-form-container"))}}})},function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function s(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function o(e){var t=e.get("propertyMappings");return t?t.reduce(function(e,t){return e[t.get("targetField")]=t,e},{}):{}}function a(e,t,i,n){var s={attrTitle:n.get("title"),attrName:n.get("name"),attrScope:n.get("scope"),attrDisplayType:n.get("__displayType__"),attrRequired:n.get("required"),sourceProfileName:e.get("name"),targetProfileName:t.get("name"),targetSchemaProperty:n},o=n.get("name"),a=i[o],r=new x(s,{parse:!0});return a&&(r.set(a.pick("pushStatus")),r.setExpressionValue(a.get("sourceExpression"))),r.get("__onlyShowFixedValue__")&&r.set("mappingType",I.key),r}function r(e,t,i){var n=o(i),s=l._.partial(a,e,t,n),r=t.get("properties"),p=r.map(s),d=new T;return d.initToggleableCollection(p),d}Object.defineProperty(t,"__esModule",{value:!0});var l=i(2),p=i(259),d=n(p),c=i(260),u=n(c),h=i(509),m=n(h),f=l.internal.util.SchemaUtil,g=function(e){return"user"===e},_=function e(t){return l._.isArray(t)?l._.all(t,e):""===t||l._.isUndefined(t)},v={key:"PUSH",title:(0,l.loc)("appinstance.provisioning.attributesTable.view.apply.mapping.on.create.and.update")},y={key:"DONT_PUSH",title:(0,l.loc)("appinstance.provisioning.attributesTable.view.apply.mapping.on.create")},b=[y,v].reduce(function(e,t){var i=t.key,n=t.title;return l._.extend(e,s({},i,n))},{}),A={key:"ATTRIBUTE",title:function(e){return(0,l.loc)("appinstance.provisioning.mapping.type.from.source.profile","messages",[e])}},w={key:"EXPRESSION",title:(0,l.loc)("appinstance.provisioning.mapping.type.expression")},I={key:"FIXED_VALUE",title:(0,l.loc)("appinstance.provisioning.mapping.type.same.value")},E={key:"",title:(0,l.loc)("appinstance.provisioning.mapping.type.empty")},N=[E,I,A,w],x=l.Model.extend({flat:!1,extraProperties:function(e){var t=this.get("targetSchemaProperty")||this.options.targetSchemaProperty;return t&&t.allows(e)},props:{attrTitle:"string",attrName:"string",attrScope:"string",attrRequired:"boolean",attrDisplayType:"string",sourceExpression:{type:"string"},pushStatus:{type:"string",values:["PUSH","DONT_PUSH",""],required:!0},mappingType:{type:"string",values:l._.map(N,l._.property("key")),value:E.key,required:!0},mappingAttributeValue:"string",sourceProfileName:"string",targetSchemaProperty:"object",mappingPreviewUserId:"string",mappingPreviewValue:"string"},derived:{__isFromOktaUserProfile__:{deps:["sourceProfileName"],fn:g},__isToOktaUserProfile__:{deps:["targetProfileName"],fn:g},__isAppUserName__:{deps:["attrName"],fn:function(e){return"userName"===e}},__isOktaUserName__:{deps:["attrName"],fn:function(e){return"login"===e}},__isArrayType__:{deps:["attrDisplayType"],fn:f.isArrayDataType.bind(f)},__isAllowCreateMapping__:{deps:["attrDisplayType"],fn:function(e){return!l._.contains([f.ARRAYDISPLAYTYPE.arrayofobject,f.DATATYPE.object],e)}},__hasMapping__:{deps:["__isOktaUserName__","__isAppUserName__","sourceExpression"],fn:function(e,t,i){return e||t||l._.isString(i)}},__requiredButNoAppMapping__:{deps:["attrRequired","__hasMapping__"],fn:function(e,t){return e&&!t}},__displayScope__:{deps:["attrScope","attrName"],fn:function(e,t){return"userName"===t||"SELF"===e?(0,l.loc)("appinstance.provisioning.attributesTable.view.mapping.value.personal.label"):(0,l.loc)("appinstance.provisioning.attributesTable.view.mapping.value.entitlement.label")}},__applyMappingOn__:{deps:["__isOktaUserName__","__isAppUserName__","pushStatus"],fn:function(e,t,i){return e||t?"":b[i]||""}},__onlyShowFixedValue__:{cache:!1,deps:["targetSchemaProperty"],fn:function(e){if(!e)return!1;if(e.isEnumType()||"boolean"===e.get("type"))return!0;var t=e.get("__possibleValues__");return!(!l._.isArray(t)||l._.isEmpty(t))}},__fixedValueFieldName__:{deps:["targetSchemaProperty"],fn:function(e){return e&&e.get("name")}}},getMappingTypeSelectorOptions:function(e){var t=this.get("__isArrayType__"),i=t?l._.without(N,A):N;return l._.reduce(i,function(t,i){var n=i.key,o=i.title,a=l._.isFunction(o)?o(e):o;return l._.extend(t,s({},n,a))},{})},getExpressionValue:function(){if(this.get("mappingType")===A.key)return this.get("__isFromOktaUserProfile__")?d.default.fromOktaUserAttribute(this.get("mappingAttributeValue")):d.default.fromAppUserAttribute(this.get("mappingAttributeValue"));if(this.get("mappingType")===I.key&&this.get("targetSchemaProperty")){var e=this.get("targetSchemaProperty").get("name"),t=this.get(e),i=l._.isArray(t)?l._.filter(t,function(e){return void 0!==e&&""!==e}):t;return d.default.fromFixedValue(i)}return this.get("sourceExpression")},setExpressionValue:function(e){var t=d.default.toAttribute(e),i=d.default.toFixedValue(e);t?this.set({mappingType:A.key,mappingAttributeValue:t}):i&&this.get("targetSchemaProperty")?(this.setFixedValue(e,i),this.set({mappingType:I.key})):this.set({mappingType:w.key}),this.set("sourceExpression",e)},setFixedValue:function(e,t){var i=this.get("targetSchemaProperty").get("name"),n=this.get("targetSchemaProperty").get("type");t=u.default.normalizeValue(n,t),void 0!==t?this.set(i,t):this.set(i,e)},validate:function(e){var t={};if(!e||!e.targetSchemaProperty||!e.pushStatus)return t;var i=e.targetSchemaProperty.get("name");return e.mappingType===I.key&&_(e[i])&&(t[i]=l.Model.ERROR_BLANK),e.mappingType===w.key&&l._.isEmpty(e.sourceExpression)&&(t.sourceExpression=l.Model.ERROR_BLANK),t},resetAfterMappingErased:function(){var e=this.get("targetSchemaProperty").get("name");this.set(s({sourceExpression:void 0,pushStatus:void 0,mappingType:this.get("__onlyShowFixedValue__")?I.key:void 0,mappingAttributeValue:void 0},e,void 0))}}),T=l.Collection.extend(l._.extend({},m.default,{model:x,resetAttributeScope:function(e){if(l._.isArray(e)&&!l._.isEmpty(e)){var t=l._.bind(l._.contains,l._,e);this.each(function(e){t(e.get("attrName"))?e.set("attrScope","NONE"):e.set("attrScope","SELF")})}},filterFn:function(e){return e.get("__hasMapping__")||e.get("attrRequired")}}));t.default={Model:x,Collection:T,createCollection:r,PUSH_OPTION:v,DONT_PUSH_OPTION:y,PUSH_STATUS_TITLE:b}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(2);t.default={filterFn:n._.identity,hasMore:!0,extraCollection:new n.Collection,showMore:function(){this.add(this.extraCollection.toArray()),this.hasMore=!1},showLess:function(){this.remove(this.extraCollection.toArray()),this.hasMore=!0},initToggleableCollection:function(e){var t=n._.filter(e,this.filterFn),i=n._.difference(e,t);this.add(t),this.extraCollection=new this.constructor,this.extraCollection.add(i),n._.isEmpty(i)&&(this.hasMore=!1),this.hasMore===!1&&this.add(i)},refresh:function(){var e=n._.union(this.toArray(),this.extraCollection.toArray());this.reset(),this.initToggleableCollection(e)}}},function(e,t,i){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=i(2),a=i(511),r=s(a),l=i(517),p=n(l),d=(0,o.tpl)("/admin/universaldirectory#okta/{{profileId}}"),c=p.ListView.extend({columns:[{label:(0,o.loc)("appinstance.provisioning.attributesTable.header.oktaAttribute"),template:'<p class="content-wrap">{{attrTitle}}</p><p class="content-code content-wrap">{{attrName}}</p>'},p.COLUMNS.MAPPING_VALUE,p.COLUMNS.APPLY_ON,p.COLUMNS.ACTION]});t.default=r.default.extend({AttrListView:c,headerClassNames:["col-attribute-name","col-mapping-value","col-apply-mapping-on","col-actions"],sourceAttributeAppTitle:function(){return this.options.appInstance.get("label")},targetAttributeAppTitle:(0,o.loc)("okta"),headerViewOption:function(){return{editProfileLink:d({profileId:this.options.targetProfile.get("id")}),forceSyncTooltip:(0,o.loc)("appinstance.provisioning.mapping.force.sync.to.okta.tooltip")}},reapplyMappingSuccessMsg:(0,o.loc)("appinstance.provisioning.mapping.force.sync.to.okta")})},function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=i(2),o=i(512),a=n(o),r=i(513),l=n(r),p=i(516),d=n(p),c=s.internal.util.Util;t.default=s.View.extend({className:"rounded-top-4 attributes-mapping-table",AttrListView:c.constantError("AttrListView is an abstract variable"),sourceAttributeAppTitle:c.constantError("sourceAttributeAppTitle is an abstract variable"),targetAttributeAppTitle:c.constantError("targetAttributeAppTitle is an abstract variable"),headerViewOption:c.constantError("headerViewOption is an abstract variable"),headerClassNames:[],reapplyMappingSuccessMsg:"",stateEvents:{"edit:attributeMapping":"handleEditMappingClick","delete:attributeMapping":"handleDeleteMappingClick","reapply:attributeMapping":"handleReapplyMappingClick"},initialize:function(){s.View.prototype.initialize.apply(this,arguments),this.add(d.default,{options:s._.extend({sourceAttributeAppTitle:s._.result(this,"sourceAttributeAppTitle"),targetAttributeAppTitle:s._.result(this,"targetAttributeAppTitle")},s._.result(this,"headerViewOption"))}),this.add(this.AttrListView),this.listenTo(this.options.mappingModel,"saved:mapping",function(){this.collection.refresh(),this.renderRequiredMappingWarning(),this.notify("success",(0,s.loc)("appinstance.provisioning.settings.mapping.update.success"))}),s._.bindAll(this,"reapplyMappingSuccess","reapplyMappingFail")},postRender:function(){this.renderRequiredMappingWarning(),s._.isArray(this.headerClassNames)&&this.headerClassNames.length&&this.setHeaderStyle()},setHeaderStyle:function(){var e=this,t=e.$(".data-list-table thead th");t.each(function(t,i){e.$(i).addClass(e.headerClassNames[t])})},renderRequiredMappingWarning:function(){var e=this.collection.toArray(),t=s._.chain(e).filter(function(e){return e.get("__requiredButNoAppMapping__")}).map(this.generateAttrDisplayInInfobox).value();this.state.trigger("missed:required:mappings",t,s._.result(this,"targetAttributeAppTitle"))},generateAttrDisplayInInfobox:function(e){var t=e.get("__isToOktaUserProfile__")?"user.":"appuser.";return t+e.get("attrName")},handleReapplyMappingClick:function(){var e=new a.default.Model({sourceId:this.options.sourceProfile.get("id"),targetId:this.options.targetProfile.get("id")});e.save().done(this.reapplyMappingSuccess).fail(this.reapplyMappingFail)},reapplyMappingSuccess:function(){var e=s._.result(this,"reapplyMappingSuccessMsg")||(0,s.loc)("appinstance.provisioning.mapping.force.sync.success.default");this.notify("success",e)},reapplyMappingFail:function(e){this.notify("error",e.responseJSON.errorSummary)},handleEditMappingClick:function(e){var t=new l.default(s._.extend({appInstance:this.options.appInstance,sourceProfile:this.options.sourceProfile,targetProfile:this.options.targetProfile,mappingModel:this.options.mappingModel,model:e,state:this.state},{sourceAttributeAppTitle:s._.result(this,"sourceAttributeAppTitle"),targetAttributeAppTitle:s._.result(this,"targetAttributeAppTitle")}));t.render()},handleDeleteMappingClick:function(e){this.confirm((0,s.loc)("appinstance.provisioning.mapping.delete.modal.title"),(0,s.loc)("appinstance.provisioning.mapping.delete.modal.message","messages",[e.get("attrName")]),this.deleteMapping.bind(this,e))},deleteMapping:function(e){var t=this,i=e.get("attrName"),n=this.options.mappingModel.get("propertyMappings"),s=n.findWhere({targetField:i}),o=s.toJSON(),a=function(e){n.set(o),t.model.trigger("error",t.model,e)},r=function(){e.resetAfterMappingErased(),t.options.mappingModel.trigger("saved:mapping")};s.set({sourceExpression:null,pushStatus:null}),this.options.mappingModel.save().fail(a).done(r)}})},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(2),s=(0,n.tpl)("/api/internal/v1/mappings/reapply?source={{sourceId}}&target={{targetId}}"),o=n.Model.extend({props:{sourceId:"string",targetId:"string"},url:function(){return s(this.toJSON())},sync:function(e,t,i){return"create"===e&&(i.method="PUT"),n.Model.prototype.sync.call(this,e,t,i)}});t.default={Model:o}},function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=i(2),o=i(290),a=n(o),r=i(235),l=n(r),p=i(104),d=n(p),c=i(258),u=n(c),h=i(514),m=n(h),f=i(515),g=n(f),_=s.internal.views.forms.helpers,v=_.SchemaFormFactory,y=6,b=s.View.extend({template:(0,s.tpl)('<a href="http://developer.okta.com/reference/okta_expression_language/index" target="_blank">{{i18n code="appinstance.provisioning.mapping.expression.reference"}}</a>')}),A=(0,s.tpl)("{{appTitle}} - {{attrName}}"),w="177px";t.default=s.FormDialog.extend({params:{minWidth:800},title:function(){return A({appTitle:this.options.targetAttributeAppTitle,attrName:this.options.model.get("attrTitle")})},className:"edit-attribute-mapping-modal",modelEvents:function(){var e={"change:mappingType":"handleMappingTypeChanged","change:mappingAttributeValue":"setSourceExpression","change:sourceExpression":"handleSourceExpressionChanged","change:mappingPreviewValue":"showPreviewView"};return e["change:"+this.model.get("__fixedValueFieldName__")]="setSourceExpression",e},initialize:function(){this.addMappingInputs(),this.addMappingPolicyInput(),this.previewMappingModel=new u.default({sourceId:this.options.sourceProfile.get("id"),targetId:this.options.targetProfile.get("id"),includeAllTargetFields:!1}),this.listenTo(this,"save",this.saveMapping),this.doPreviewMapping=s._.debounce(this.doPreviewMapping,300)},addMappingInputs:function(){var e=this,t=this.options.sourceProfile.generateSelectOptions(),i={type:"text",name:"noneExistsSpaceField",readOnly:!0},n={type:"select",name:"mappingType",options:this.model.getMappingTypeSelectorOptions(this.options.sourceAttributeAppTitle),params:{autoWidth:!1,width:w}},o={name:"mappingAttributeValue",input:m.default,params:{width:w,arrayData:t}},a={type:"text",name:"mappingPreviewValue",readOnly:!0},r={type:"group",toggleWhen:{mappingType:"EXPRESSION"},explain:b,input:[{name:"sourceExpression",type:"textarea",className:"source-expression-editor"},i,a]},l=this.getFixedValueInputOpt(),p=[];p=this.model.get("__onlyShowFixedValue__")?[s._.extend(l,{label:(0,s.loc)("appinstance.provisioning.mapping.input.attribute.value"),params:s._.extend({autoWidth:!0},l.params)})]:this.model.get("__isArrayType__")?[s._.extend({label:(0,s.loc)("appinstance.provisioning.mapping.input.attribute.value")},n),{type:"group",toggleWhen:{mappingType:"FIXED_VALUE"},className:"array-type-attribute-input",input:[l,i,a]},r]:[s._.extend({label:(0,s.loc)("appinstance.provisioning.mapping.input.attribute.value"),toggleWhen:{mappingType:function(e){return["ATTRIBUTE","FIXED_VALUE"].indexOf(e)===-1}}},n),{label:(0,s.loc)("appinstance.provisioning.mapping.input.attribute.value"),type:"group",toggleWhen:{mappingType:"FIXED_VALUE"},input:[s._.extend({},n),i,l,i,a]},{label:(0,s.loc)("appinstance.provisioning.mapping.input.attribute.value"),type:"group",toggleWhen:{mappingType:"ATTRIBUTE"},input:[s._.extend({},n),i,o,i,a]},r],p.forEach(function(t){e.addInput(t)})},getFixedValueInputOpt:function(){var e=v.createInputOptions(this.model.get("targetSchemaProperty")),t=void 0;return"checkboxset"===e.type&&s._.size(e.options)>=y&&(t=(e.className?e.className+" ":"")+"fixed-checkboxset",e=s._.defaults({className:t},e)),s._.extend({},s._.omit(e,"label"),{showWhen:{mappingType:"FIXED_VALUE"}})},addMappingPolicyInput:function(){this.addInput({name:"pushStatus",label:(0,s.loc)("appinstance.provisioning.mapping.input.apply.on"),input:g.default,showWhen:{mappingType:function(e){return!!e}},params:{appInstance:this.options.appInstance}})},render:function(){s.FormDialog.prototype.render.apply(this,arguments),this.model.get("__onlyShowFixedValue__")||(this.hidePreviewView(),this.addPreviewPickerIntoToolbar(),this.setDefaultPreviewUser())},addPreviewPickerIntoToolbar:function(){var e={selector:".o-form-button-bar",options:{field:"mappingPreviewUserId"}};if(this.model.get("__isToOktaUserProfile__")){var t=this.options.appInstance.get("id");e.options.userApiUrl="/api/v1/apps/"+t+"/users?expand=user&q=%QUERY&limit=10",e.options.parseResponse=function(e){return e&&e._embedded&&e._embedded.user}}this.previewUserPicker=this.add(d.default,e).last(),this.bindPreviewPickerEvents()},setDefaultPreviewUser:function(){var e=this;if(this.model.get("__isToOktaUserProfile__")){var t=new l.default.Collection(null,{__instanceId__:this.options.appInstance.get("id"),expand:"user"});t.fetch({data:{limit:1}}).then(function(){1===t.length&&e.previewUserPicker.prefillUser(t.at(0).get("__oktaUser__"))})}if(this.model.get("__isFromOktaUserProfile__")){var i=new a.default.Model({id:"me"});i.fetch().done(function(){e.previewUserPicker.prefillUser(i.toJSON())})}},bindPreviewPickerEvents:function(){var e=this;this.listenTo(this.model,"form:clear-errors",function(){e.model.set({mappingPreviewValue:void 0})}),this.listenTo(this.previewUserPicker,"onClear",function(){e.model.set({mappingPreviewUserId:void 0}),e.clearErrors()}),this.listenTo(this.previewUserPicker,"onSelect",function(){this.clearErrors(),this.previewMapping()})},doPreviewMapping:function(e){var t=[{targetField:this.model.get("__fixedValueFieldName__"),sourceExpression:this.model.get("sourceExpression")}];this.previewMappingModel.set({propertyMappings:t,userId:e}),this.previewMappingModel.save().done(this.handlePreviewSuccess.bind(this)).fail(this.handleXhrError.bind(this))},handlePreviewSuccess:function(){var e=s._.where(this.previewMappingModel.get("propertyMappings"),{targetField:this.model.get("__fixedValueFieldName__")});this.clearErrors(),s._.isArray(e)&&e[0]?e[0].error?this.showPreviewError(e[0].error):this.model.set("mappingPreviewValue",e[0].__displayValue__):this.showPreviewError((0,s.loc)("appinstance.signon.preview.error"))},parseErrorMessage:function(e){return e&&s._.isArray(e.errorCauses)&&e.errorCauses.length>=1?e.errorCauses[0]:e},showPreviewView:function(e,t){this.$(".o-form-input-name-mappingPreviewValue").text(t||"").removeClass("preview-error").toggleClass("hide",!t)},hidePreviewView:function(){this.$(".o-form-input-name-mappingPreviewValue").addClass("hide")},showPreviewError:function(e){this.model.set("mappingPreviewValue",e),this.$(".o-form-input-name-mappingPreviewValue").addClass("preview-error")},handleMappingTypeChanged:function(){this.clearErrors(),this.setSourceExpression(),this.previewMapping()},setSourceExpression:function(){var e=this.model.getExpressionValue();this.model.set("sourceExpression",e),this.$(".o-form-input-name-sourceExpression textarea").val(e)},handleSourceExpressionChanged:function(){this.clearErrors(),this.previewMapping()},previewMapping:function(){this.model.get("mappingPreviewUserId")&&!s._.isEmpty(this.model.get("sourceExpression"))?this.doPreviewMapping(this.model.get("mappingPreviewUserId")):this.hidePreviewView()},saveMapping:function(){var e=this,t=this.model.getExpressionValue(),i=this.model.get("pushStatus"),n=this.model.get("attrName"),s=this.options.mappingModel.get("propertyMappings"),o=s.findWhere({targetField:n}),a=void 0;if(this.model.set("sourceExpression",t),o){var r=o.toJSON();o.set({sourceExpression:t,pushStatus:i}),a=function(t){o.set(r),e.handleXhrError(t)}}else{var l=s.add({sourceExpression:t,targetField:n,pushStatus:i});a=function(t){s.remove(l),e.handleXhrError(t)}}this.form.__setSavingState(),this.options.mappingModel.save().fail(a).done(this.saveMappingSucceed.bind(this)).always(function(){e.form.__clearSavingState()})},saveMappingSucceed:function(){this.options.mappingModel.trigger("saved:mapping"),this.remove()},handleXhrError:function(e){this.model.trigger("error",this.model,e)}})},function(e,t,i){var n,s;n=[i(2),i(44)],s=function(e){var t=e._,i=e.$,n=e.tpl,s=e.loc,o=e.internal,a=o.views.forms.BaseInput,r=n('<span class="attribute-name" data-se="attribute-name-{{name}}">{{name}}</span><span class="attribute-type float-r">{{type}}</span>');return a.extend({focus:t.noop,template:n('<input name="{{id}}" id="{{inputId}}" type="hidden"></input>'),arrayData:[],formatTemplate:t.constant(r),initialize:function(){a.prototype.initialize.apply(this,arguments),t.bindAll(this,"selectEntity","initSelect2Widget")},editMode:function(){a.prototype.editMode.apply(this,arguments),this.arrayData=this.getAttribute("arrayData",[]);var e=this.getModelValue(),i=t.findWhere(this.arrayData,{id:e}),n=this.initSelect2Widget(this.arrayData).on("select2-selecting",this.selectEntity);
i||(i=t.head(this.arrayData),this.selectEntity({choice:i})),n.select2("data",i)},selectEntity:function(e){var t=e.choice;this._value=t.id,this.update()},val:function(){return this._value},initSelect2Widget:function(e){var t={data:e,openOnEnter:!0,width:this.getAttribute("width","100%"),minimumResultsForSearch:10,dropdownCssClass:"attribute-selector "+(this.getAttribute("dropdownCssClass")||""),formatResult:this.getAttribute("formatTemplate"),formatSelection:this.getAttribute("formatTemplate"),formatNoMatches:s("oform.baseselect.noresults"),formatSearching:s("oform.baseselect.searching")};return this.$("input").select2(t)},getAttribute:function(e,i){for(var n,s=[this.options.params,this.options,this],o=s.length,a=0;a<o;a+=1)if(n=t.resultCtx(s[a],e,this),!t.isUndefined(n))return n;return i},remove:function(){i(".attribute-selector").remove(),a.prototype.remove.apply(this,arguments)}})}.apply(t,n),!(void 0!==s&&(e.exports=s))},function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=i(2),o=i(508),a=n(o),r=s.internal.views.forms.inputs.Radio,l="pushStatus";t.default=r.extend({initialize:function(){this.options.options=a.default.PUSH_STATUS_TITLE,this.items=this.initItems(),this.options.model.get(l)||this.options.model.set(l,this.getFirstEnabledOption("key"))},initItems:function(){return this.options.model.get("__isFromOktaUserProfile__")?this.getOptionsOktaToApp():this.getOptionsAppToOkta()},getFirstEnabledOption:function(e){var t=s._.chain(this.items).filter(this.isEnabled).head().value();return t[e]},isEnabled:function(e){return e.enabled!==!1},isDisabled:function(e){return e.enabled===!1},getOptionsOktaToApp:function(){var e=[a.default.DONT_PUSH_OPTION,a.default.PUSH_OPTION],t=this.getParam("appInstance");if(t){var i=t.get("features");s._.isEmpty(i)||s._.contains(i,"PUSH_PROFILE_UPDATES")||(e[1]=s._.extend({},e[1],{enabled:!1}))}return e},getOptionsAppToOkta:function(){var e=[a.default.DONT_PUSH_OPTION,a.default.PUSH_OPTION],t=this.getParam("appInstance");if(t){var i=t.get("features");s._.contains(i,"PROFILE_MASTERING")?e[0]=s._.extend({},e[0],{enabled:!1}):e[1]=s._.extend({},e[1],{enabled:!1})}return e},postRender:function(){var e=this;s._.chain(this.items).filter(this.isDisabled).forEach(function(t){e.$("[value="+t.key+"]").prop("disabled",!0).parent(".custom-radio").addClass("o-form-read-mode")})}})},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(2);i(26);var s=(0,n.tpl)('\n<h3>{{i18n code="appinstance.provisioning.attributesTable.title" arguments="targetAttributeAppTitle"}}</h3>\n<p class="explain-text">\n{{i18n code="appinstance.provisioning.attributesTable.subtitle"\n       arguments="targetAttributeAppTitle;sourceAttributeAppTitle"}}\n</p>\n');t.default=n.View.extend({className:"attribute-data-list-header",initialize:function(e){e||(e={}),this.add(s(e)),this.add((0,n.createButton)({title:(0,n.loc)("appinstance.provisioning.attributesTable.view.goto.profile.button"),href:this.options.editProfileLink,icon:"edit-16"})),this.add((0,n.createButton)({icon:"refresh-16",title:(0,n.loc)("appinstance.provisioning.attributesTable.view.force.sync.button"),click:function(){this.state.trigger("reapply:attributeMapping")},postRender:function(){this.$el.qtip({style:{classes:"qtip-custom qtip-shadow"},position:{my:"bottom left",at:"top center"},content:this.options.forceSyncTooltip,hide:{fixed:!0},show:{delay:0}})}}))}})},function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}var s=i(2),o=i(518),a=n(o),r=i(520),l=n(r),p=i(521),d=n(p),c=s.internal.framework.TableFactory,u={MAPPING_VALUE:{label:(0,s.loc)("appinstance.provisioning.attributesTable.header.value"),view:d.default},APPLY_ON:{label:"Apply on",attributes:{"data-se":"attribute-mapping-push-status"},template:'\n{{#if __hasMapping__}}\n  {{__applyMappingOn__}}\n{{else}}\n  <span class="not-mapped">{{i18n code="appinstance.provisioning.attributesTable.view.not.mapped"}}</span>\n{{/if}}'},ACTION:{view:l.default}},h=s.DataList.extend({footer:a.default,initialize:function(){var e=this.columns;this.item=s.View.extend({tagName:"tbody",template:'<tr role="row" data-se="data-list-row-{{attrName}}"></tr>',children:s._.map(e,function(e){return[c.createCell(e),"tr"]})})}});e.exports={COLUMNS:u,ListView:h}},function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=i(2),o=i(519),a=n(o);t.default=a.default.extend({expand:(0,s.loc)("appinstance.provisioning.attributesTable.view.show.unmapped.attributes"),collapse:(0,s.loc)("appinstance.provisioning.attributesTable.view.hide.unmapped.attributes")})},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(2);t.default=n.View.extend({tagName:"tfoot",className:"data-list-pager-footer",template:'\t      <tr>\t        <td colspan="99">\t          <a href="#" class="data-list-pager-footer-link">{{buttonTitle}}</a>\t        </td>\t      </tr>\t    ',getTemplateData:function(){return{buttonTitle:this.buttonTitle}},events:{"click .data-list-pager-footer-link":"handleClick"},initialize:function(){n._.defaults(this,n._.pick(this.options,"expand","collapse")),this.collection.hasMore?this.buttonTitle=this.expand:this.buttonTitle=this.collapse},handleClick:function(e){e.preventDefault(),e.stopPropagation(),this.collection.hasMore?(this.collection.showMore(),this.buttonTitle=this.collapse):(this.collection.showLess(),this.buttonTitle=this.expand),this.render()}})},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(2);i(26),t.default=n.View.extend({initialize:function(){this.model.get("__isAppUserName__")||this.model.get("__isOktaUserName__")||(this.add((0,n.createButton)({icon:"edit-16",attributes:function(){return{"data-se":"edit-attribute-"+this.model.get("attrName")}},click:function(){this.model.get("__isAllowCreateMapping__")&&this.state.trigger("edit:attributeMapping",this.model)},postRender:function(){this.model.get("__isAllowCreateMapping__")||(this.disable(),this.$el.qtip({style:{classes:"qtip-custom qtip-shadow"},position:{my:"bottom right",at:"top center"},hide:{fixed:!0},show:{delay:0},content:(0,n.loc)("appinstance.provisioning.attributesTable.edit.disabled")}))}})),this.add((0,n.createButton)({icon:"cancel-16",attributes:function(){return{"data-se":"delete-attribute-"+this.model.get("attrName")}},modelEvents:{"change:__hasMapping__":"toggleStatus"},click:function(){this.model.get("__hasMapping__")&&this.state.trigger("delete:attributeMapping",this.model)},postRender:function(){this.toggleStatus()},toggleStatus:function(){this.toggle(this.model.get("__hasMapping__"))}})))}})},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(2);t.default=n.View.extend({className:"content-wrap",attributes:{"data-se":"attribute-mapping-expression"},template:'\t      {{#if showSignOnSettings}}\t        {{{i18n code="appinstance.provisioning.attributesTable.view.configureInSignOn"}}}\t      {{/if}}\t      {{#unless showSignOnSettings}}\t        {{#unless __hasMapping__}}\t          {{#if attrRequired}}\t            <span class="not-mapped-warning-icon icon icon-16 icon-only warning-16-yellow"></span>\t          {{/if}}\t          <span class="not-mapped">{{i18n code="appinstance.provisioning.attributesTable.view.not.mapped"}}</span>\t        {{/unless}}\t        {{#if sourceExpression}}\t          {{sourceExpression}}\t        {{/if}}\t      {{/unless}}\t    ',getTemplateData:function(){var e=n.View.prototype.getTemplateData.apply(this,arguments);return(this.model.get("__isAppUserName__")||this.model.get("__isOktaUserName__"))&&(e.showSignOnSettings=!0),e},postRender:function(){this.model.get("__requiredButNoAppMapping__")&&this.$el.find(".not-mapped-warning-icon").qtip({content:(0,n.loc)("appinstance.provisioning.attributesTable.view.notMapping.tooltip"),style:{classes:"qtip-custom qtip-shadow"},position:{my:"bottom left",at:"top center"},hide:{fixed:!0},show:"mouseover"})}})},function(e,t,i){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=i(2),a=i(511),r=s(a),l=i(517),p=n(l),d=(0,o.tpl)("/admin/universaldirectory#app/{{profileId}}"),c=p.ListView.extend({columns:[{label:(0,o.loc)("appinstance.provisioning.attributesTable.header.attribute"),template:'<p class="content-wrap">{{attrTitle}}</p><p class="content-wrap content-code">{{attrName}}</p>'},{label:(0,o.loc)("appinstance.provisioning.attributesTable.header.attributeType"),template:"{{__displayScope__}}"},p.COLUMNS.MAPPING_VALUE,p.COLUMNS.APPLY_ON,p.COLUMNS.ACTION]});t.default=r.default.extend({AttrListView:c,headerClassNames:["col-attribute-name","col-attribute-type","col-mapping-value","col-apply-mapping-on","col-actions"],sourceAttributeAppTitle:(0,o.loc)("okta"),targetAttributeAppTitle:function(){return this.options.appInstance.get("label")},headerViewOption:function(){return{editProfileLink:d({profileId:this.options.targetProfile.get("id")}),forceSyncTooltip:(0,o.loc)("appinstance.provisioning.mapping.force.sync.to.app.tooltip")}},reapplyMappingSuccessMsg:(0,o.loc)("appinstance.provisioning.mapping.force.sync.to.app")})},function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=i(2),o=i(524),a=n(o),r=i(525),l=n(r),p=i(526),d=n(p),c=i(527),u=n(c);t.default=s.View.extend({initialize:function(){var e=new l.default.Model;e.appInstanceId=this.settings.get("appInstanceId");var t=new a.default.Model;t.appInstanceId=this.settings.get("appInstanceId"),t.fetch(),this.add('<div class="okta-form-divider form-divider"></div>'),this.add(new d.default({model:t,settings:this.settings})),e.fetch(),this.add('<div class="okta-form-divider form-divider"></div>'),this.add(new u.default({model:e,settings:this.settings}))}})},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(2),s=(0,n.tpl)("/api/v1/internal/apps/{{appInstanceId}}/settings/importMatchRules"),o={CONDITION_EMAIL:"source.email eq target.email",CONDITION_OKTA_PREFERENCE:"source.login eq target.login",CONDITION_OKTA_PREFERENCE_OR_EMAIL:"(source.login eq target.login) OR (source.email eq target.email)",CONDITION_FIRST_AND_LAST_NAME:"(source.firstName eq target.firstName) AND (source.lastName eq target.lastName)",CONDITION_OKTA_PREFERENCE_AND_EMAIL:"(source.login eq target.login) AND (source.email eq target.email)",CONDITION_OKTA_PREFERENCE_AND_NAME:"(source.login eq target.login) AND ((source.firstName eq target.firstName) AND (source.lastName eq target.lastName))",CONDITION_EMAIL_AND_NAME:"(source.email eq target.email) AND ((source.firstName eq target.firstName) AND (source.lastName eq target.lastName))",CONDITION_OKTA_PREFERENCE_OR_EMAIL_AND_NAME:"((source.login eq target.login) OR (source.email eq target.email)) AND ((source.firstName eq target.firstName) AND (source.lastName eq target.lastName))",CONDITION_OKTA_PREFERENCE_AND_EMAIL_AND_NAME:"(source.login eq target.login) AND (source.email eq target.email) AND ((source.firstName eq target.firstName) AND (source.lastName eq target.lastName))"},a=["CONDITION_EMAIL","CONDITION_OKTA_PREFERENCE","OTHER"],r=["CONDITION_OKTA_PREFERENCE_OR_EMAIL","CONDITION_FIRST_AND_LAST_NAME","CONDITION_OKTA_PREFERENCE_AND_EMAIL","CONDITION_OKTA_PREFERENCE_AND_NAME","CONDITION_EMAIL_AND_NAME","CONDITION_OKTA_PREFERENCE_OR_EMAIL_AND_NAME","CONDITION_OKTA_PREFERENCE_AND_EMAIL_AND_NAME"],l=n.Model.extend({local:{exactMatchId:"string",exactMatchPriorityOrder:["integer",!0,1],exactMatchExpression:{type:"string",required:!0,value:"CONDITION_EMAIL",values:a},exactMatchOtherExpression:{type:"string",required:!0,value:"CONDITION_OKTA_PREFERENCE_OR_EMAIL",values:r},exactMatchAutoConfirm:["boolean",!0,!1],exactMatchAutoActivate:["boolean",!0,!1],partialMatchId:"string",partialMatchPriorityOrder:["integer",!0,2],partialMatchOnFirstAndLastName:["boolean",!0,!1],partialMatchAutoConfirm:["boolean",!0,!1],partialMatchAutoActivate:["boolean",!0,!1],noMatchId:"string",noMatchPriorityOrder:["integer",!0,9999],noMatchAutoConfirm:["boolean",!0,!1],noMatchAutoActivate:["boolean",!0,!1]},initialize:function(){var e=["change:exactMatchExpression","change:exactMatchOtherExpression","change:partialMatchOnFirstAndLastName"];this.listenTo(this,e.join(" "),this._checkPartialMatchRule)},_checkPartialMatchRule:function(){var e=this.get("exactMatchExpression"),t=this.get("exactMatchOtherExpression");"OTHER"===e&&"CONDITION_FIRST_AND_LAST_NAME"===t&&this.set("partialMatchOnFirstAndLastName",!1),this.get("partialMatchOnFirstAndLastName")===!1&&this.set("partialMatchAutoConfirm",!1)},url:function(){return s(this)},parse:function(e){var t=n._.findWhere(e,{priorityOrder:1}),i=n._.findWhere(e,{priorityOrder:2}),s=n._.findWhere(e,{priorityOrder:9999});t&&this._parseExactMatchSettings(t),t&&i&&this._parsePartialMatchSettings(t,i),s&&this._parseNoMatchSettings(s),this._checkPartialMatchRule()},_parseExactMatchSettings:function(e){this.set("exactMatchId",e.id);var t=n._.invert(o)[e.conditions.expression.value];n._.contains(a,t)?this.set("exactMatchExpression",t):(this.set("exactMatchExpression","OTHER"),this.set("exactMatchOtherExpression",t)),this.set("exactMatchAutoConfirm",e.postMatchActions.autoConfirm),this.set("exactMatchAutoActivate",e.postMatchActions.autoActivate)},_parsePartialMatchSettings:function(e,t){var i=n._.invert(o)[e.conditions.expression.value];if(this.set("partialMatchId",t.id),"CONDITION_FIRST_AND_LAST_NAME"===i)this.set("partialMatchOnFirstAndLastName",!1);else{var s=n._.invert(o)[t.conditions.expression.value];this.set("partialMatchOnFirstAndLastName","CONDITION_FIRST_AND_LAST_NAME"===s)}this.set("partialMatchAutoConfirm",t.postMatchActions.autoConfirm),this.set("partialMatchAutoActivate",t.postMatchActions.autoActivate)},_parseNoMatchSettings:function(e){this.set("noMatchId",e.id),this.set("noMatchAutoConfirm",e.postMatchActions.autoConfirm),this.set("noMatchAutoActivate",e.postMatchActions.autoActivate)},toJSON:function(){var e=[this._setExactMatchJSON(),this._setPartialMatchJSON(),this._setNoMatchJSON()];return e},_setExactMatchJSON:function(){var e=this.get("exactMatchExpression");"OTHER"===e&&(e=this.get("exactMatchOtherExpression"));var t={id:this.get("exactMatchId"),priorityOrder:1,conditions:{expression:{value:o[e]||null}},postMatchActions:{autoConfirm:this.get("exactMatchAutoConfirm"),autoActivate:this.get("exactMatchAutoActivate")}};return t},_setPartialMatchJSON:function(){var e=null;this.get("partialMatchOnFirstAndLastName")&&(e=o.CONDITION_FIRST_AND_LAST_NAME);var t={id:this.get("partialMatchId"),priorityOrder:2,conditions:{expression:{value:e}},postMatchActions:{autoConfirm:this.get("partialMatchAutoConfirm"),autoActivate:this.get("partialMatchAutoActivate")}};return t},_setNoMatchJSON:function(){var e={id:this.get("noMatchId"),priorityOrder:9999,postMatchActions:{autoConfirm:this.get("noMatchAutoConfirm"),autoActivate:this.get("noMatchAutoActivate")}};return e}});t.default={Model:l}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(2),s=(0,n.tpl)("/api/v1/internal/apps/{{appInstanceId}}/lifecycle/enable-features"),o=(0,n.tpl)("/api/v1/internal/apps/{{appInstanceId}}/lifecycle/disable-features"),a=(0,n.tpl)("/api/v1/internal/apps/{{appInstanceId}}/lifecycle/features"),r=function(e,t){return e&&e[t]?e[t]:null},l=n.Model.extend({props:{feature:["string",!0,"PROFILE_MASTERING"],settings:["object",!0,{unsuspendingUsersAllowed:!1,reactivatingUsersAllowed:!1,userOffboardingOption:"NONE"}]},local:{enabled:["boolean",!0,!1],unsuspendingUsersAllowed:["boolean",!0,!1],reactivatingUsersAllowed:["boolean",!0,!1],userOffboardingOption:{type:"string",required:!0,value:"DEACTIVATE",values:["NONE","DEACTIVATE","SUSPEND"]}},parse:function(e){if(e){var t=n._.findWhere(e,{feature:"PROFILE_MASTERING"});if(this.set("enabled",!!t),t){var i=t.settings;this.set("unsuspendingUsersAllowed",r(i,"unsuspendingUsersAllowed")||!1),this.set("reactivatingUsersAllowed",r(i,"reactivatingUsersAllowed")||!1),this.set("userOffboardingOption",r(i,"userOffboardingOption")||"DEACTIVATE")}}},toJSON:function(){var e=n.Model.prototype.toJSON.apply(this,arguments);return e.settings={unsuspendingUsersAllowed:this.get("unsuspendingUsersAllowed"),reactivatingUsersAllowed:this.get("reactivatingUsersAllowed"),userOffboardingOption:this.get("userOffboardingOption")},[e]},sync:function(e,t,i){return"read"===e?this.urlTemplate=a:this.get("enabled")?this.urlTemplate=s:this.urlTemplate=o,n.Model.prototype.sync.call(this,e,t,i)},url:function(){return this.urlTemplate(this)}});t.default={Model:l}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(2);t.default=n.Form.extend({className:"advanced-import-settings-form",title:(0,n.loc)("appinstance.provisioning.importmatchsettings.title"),read:!0,autoSave:!0,initialize:function(){this.addInput({type:"radio",name:"exactMatchExpression",label:(0,n.loc)("appinstance.provisioning.importmatchsettings.matchexpression.label"),options:{CONDITION_OKTA_PREFERENCE:(0,n.loc)("appinstance.provisioning.importmatchsettings.matchexpression.options.CONDITION_OKTA_PREFERENCE"),CONDITION_EMAIL:(0,n.loc)("appinstance.provisioning.importmatchsettings.matchexpression.options.CONDITION_EMAIL"),OTHER:(0,n.loc)("appinstance.provisioning.importmatchsettings.matchexpression.options.OTHER")}}),this.addInput({type:"select",name:"exactMatchOtherExpression",options:{CONDITION_OKTA_PREFERENCE_OR_EMAIL:(0,n.loc)("appinstance.provisioning.importmatchsettings.matchexpression.options.CONDITION_OKTA_PREFERENCE_OR_EMAIL"),CONDITION_FIRST_AND_LAST_NAME:(0,n.loc)("appinstance.provisioning.importmatchsettings.matchexpression.options.CONDITION_FIRST_AND_LAST_NAME"),CONDITION_OKTA_PREFERENCE_AND_EMAIL:(0,n.loc)("appinstance.provisioning.importmatchsettings.matchexpression.options.CONDITION_OKTA_PREFERENCE_AND_EMAIL"),CONDITION_OKTA_PREFERENCE_AND_NAME:(0,n.loc)("appinstance.provisioning.importmatchsettings.matchexpression.options.CONDITION_OKTA_PREFERENCE_AND_NAME"),CONDITION_EMAIL_AND_NAME:(0,n.loc)("appinstance.provisioning.importmatchsettings.matchexpression.options.CONDITION_EMAIL_AND_NAME"),CONDITION_OKTA_PREFERENCE_OR_EMAIL_AND_NAME:(0,n.loc)("appinstance.provisioning.importmatchsettings.matchexpression.options.CONDITION_OKTA_PREFERENCE_OR_EMAIL_AND_NAME"),CONDITION_OKTA_PREFERENCE_AND_EMAIL_AND_NAME:(0,n.loc)("appinstance.provisioning.importmatchsettings.matchexpression.options.CONDITION_OKTA_PREFERENCE_AND_EMAIL_AND_NAME")},disabled:function(){return"OTHER"!==this.model.get("exactMatchExpression")},showWhen:{exactMatchExpression:function(e){var t=this.model.get("__edit__");return t||!t&&"OTHER"===e}}}),this.addInput({type:"checkbox",name:"partialMatchOnFirstAndLastName",label:(0,n.loc)("appinstance.provisioning.importmatchsettings.partialmatches.label"),placeholder:(0,n.loc)("appinstance.provisioning.importmatchsettings.partialmatches.placeholder"),disabled:this._partialMatchCheckboxDisabled}),this.addInput({type:"checkbox",name:"exactMatchAutoConfirm",label:(0,n.loc)("appinstance.provisioning.importmatchsettings.exactmatchconfirm.label"),placeholder:(0,n.loc)("appinstance.provisioning.importmatchsettings.exactmatchconfirm.placeholder"),className:"multi-checkbox-input"}),this.addInput({type:"checkbox",name:"partialMatchAutoConfirm",placeholder:(0,n.loc)("appinstance.provisioning.importmatchsettings.partialmatchconfirm.placeholder"),disabled:function(){return this.model.get("partialMatchOnFirstAndLastName")===!1}}),this.addInput({type:"checkbox",name:"noMatchAutoConfirm",label:(0,n.loc)("appinstance.provisioning.importmatchsettings.nomatchautoconfirm.label"),placeholder:(0,n.loc)("appinstance.provisioning.importmatchsettings.nomatchautoconfirm.placeholder"),className:"multi-checkbox-input"}),this.addInput({type:"checkbox",name:"noMatchAutoActivate",placeholder:(0,n.loc)("appinstance.provisioning.importmatchsettings.nomatchautoactivate.placeholder")});var e=["change:exactMatchExpression","change:exactMatchOtherExpression","change:partialMatchOnFirstAndLastName"];this.listenTo(this.model,e.join(" "),this.render)},_partialMatchCheckboxDisabled:function(){var e=this.model.get("exactMatchExpression"),t=this.model.get("exactMatchOtherExpression");return"OTHER"===e&&"CONDITION_FIRST_AND_LAST_NAME"===t}})},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(2),s=n._.identity,o=n.View.extend({template:(0,n.loc)("appinstance.provisioning.profilelifecyclemastering.enable.explain"),getTemplateData:function(){return this.settings.attributes}});t.default=n.Form.extend({className:"provision-lifecycle-mastering-form",title:(0,n.loc)("appinstance.provisioning.profilelifecyclemastering.title"),read:!0,autoSave:!0,initialize:function(){this.addInput({type:"checkbox",name:"enabled",className:"profile-mastering-enabled-form-field",label:!1,placeholder:(0,n.tpl)((0,n.loc)("appinstance.provisioning.profilelifecyclemastering.enable.placeholder"))(this.settings.attributes),explain:new o({settings:this.settings})}),this.addInput({type:"select",name:"userOffboardingOption",label:(0,n.loc)("appinstance.provisioning.profilelifecyclemastering.offboarding.label"),options:{NONE:(0,n.loc)("appinstance.provisioning.profilelifecyclemastering.offboarding.options.NONE"),DEACTIVATE:(0,n.loc)("appinstance.provisioning.profilelifecyclemastering.offboarding.options.DEACTIVATE"),SUSPEND:(0,n.loc)("appinstance.provisioning.profilelifecyclemastering.offboarding.options.SUSPEND")},showWhen:{enabled:s}}),this.addInput({type:"checkbox",name:"unsuspendingUsersAllowed",label:(0,n.loc)("appinstance.provisioning.profilelifecyclemastering.unsuspendallowed.label"),placeholder:(0,n.loc)("appinstance.provisioning.profilelifecyclemastering.unsuspendallowed.placeholder"),showWhen:{enabled:s},className:"multi-checkbox-input"}),this.addInput({type:"checkbox",name:"reactivatingUsersAllowed",placeholder:(0,n.loc)("appinstance.provisioning.profilelifecyclemastering.reactivateallowed.label"),explain:(0,n.loc)("appinstance.provisioning.profilelifecyclemastering.reactivateallowed.explain"),showWhen:{enabled:s}})}})},function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=i(2),o=i(529),a=n(o),r=i(530),l=n(r);t.default=s.Controller.extend({View:l.default,initialize:function(){this.model=new a.default({instanceId:this.options.appInstanceId}),this.model.fetch()}})},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(2),s=(0,n.tpl)("/api/v1/internal/apps/{{instanceId}}/settings/radius");t.default=n.Model.extend({props:{ipReportingEnabled:"boolean",ipAttribute:"string",ipAttributeVendorSpecific:{type:"string",validate:function(e){return!isNaN(e)}},groupsResponseEnabled:"boolean",groupsAttribute:"string",groupsIds:"array",groupsResponseFormat:"string",groupsResponseFormatDelimiter:"string",groupsNameFormatExpression:"string"},local:{instanceId:"string",__groupNameFormat__:"string",__customGroupNameFormat__:"string"},url:function(){return s({instanceId:this.get("instanceId")})},initialize:function(e){this.set("instanceId",e&&e.instanceId)},toJSON:function(){var e=n.Model.prototype.toJSON.apply(this,arguments),t=this.get("__groupNameFormat__");return"custom"===t&&(e.groupsNameFormatExpression=this.get("__customGroupNameFormat__")),e},parse:function(e){var t=e.groupsNameFormatExpression;return t?"${group.name}"===t?(e.__groupNameFormat__="default",e.__customGroupNameFormat__=""):"ou=${group.name}"===t?(e.__groupNameFormat__="ou",e.__customGroupNameFormat__=""):(e.__groupNameFormat__="custom",e.__customGroupNameFormat__=t):(e.groupsNameFormatExpression="${group.name}",e.__groupNameFormat__="default",e.__customGroupNameFormat__=""),e.groupsResponseFormat=e.groupsResponseFormat||"REPEATED",e.groupsResponseFormatDelimiter=e.groupsResponseFormatDelimiter||";",e}})},function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=i(2),o=i(531),a=n(o);t.default=s.Form.extend({layout:"o-form-theme",title:(0,s.loc)("app.radius.advanced.title"),read:!0,autoSave:!0,className:"radius-form",initialize:function(){this.addSectionTitle((0,s.loc)("app.radius.advanced.clientip.title")),this.addInput({label:!1,name:"ipReportingEnabled",type:"checkbox",className:"main-radio-no-label",placeholder:(0,s.loc)("app.radius.advanced.clientip.report"),explain:(0,s.loc)("app.radius.advanced.clientip.report.description")}),this.addInput({label:(0,s.loc)("app.radius.advanced.clientip.attribute"),type:"select",name:"ipAttribute",options:a.default.ipAttributeOptions,bindings:{ipAttribute:function(e){"Vendor-Specific"!==e&&this.model.set("ipAttributeVendorSpecific","")}},tooltip:(0,s.loc)("app.radius.advanced.clientip.attribute.tooltip"),showWhen:{ipReportingEnabled:!0}}),this.addInput({type:"text",name:"ipAttributeVendorSpecific",placeholder:(0,s.loc)("app.radius.advanced.clientip.attribute.customId"),showWhen:{ipReportingEnabled:!0,ipAttribute:"Vendor-Specific"}}),this.addSectionTitle((0,s.loc)("app.radius.advanced.groups.title")),this.addInput({label:!1,type:"checkbox",name:"groupsResponseEnabled",className:"main-radio-no-label",placeholder:(0,s.loc)("app.radius.advanced.groups.include"),explain:(0,s.loc)("app.radius.advanced.groups.include.description")}),this.addInput({label:(0,s.loc)("app.radius.advanced.groups.attribute"),type:"select",name:"groupsAttribute",options:a.default.groupsAttributeOptions,tooltip:(0,s.loc)("app.radius.advanced.groups.attribute.tooltip"),showWhen:{groupsResponseEnabled:!0}}),this.addInput({label:(0,s.loc)("app.radius.advanced.groups.list"),type:"grouppicker",name:"groupsIds",showWhen:{groupsResponseEnabled:!0}}),this.addInput({label:(0,s.loc)("app.radius.advanced.groups.responseFormat"),type:"radio",name:"groupsResponseFormat",options:{REPEATED:(0,s.loc)("app.radius.advanced.groups.responseFormat.REPEATED"),DELIMITED:(0,s.loc)("app.radius.advanced.groups.responseFormat.DELIMITED")},tooltip:(0,s.loc)("app.radius.advanced.groups.responseFormat.tooltip"),showWhen:{groupsResponseEnabled:!0}}),this.addInput({type:"group",input:[{type:"label",label:(0,s.loc)("app.radius.advanced.groups.responseFormat.delimiter")},{type:"text",name:"groupsResponseFormatDelimiter"}],params:{display:"text"},className:"delimiter",showWhen:{groupsResponseEnabled:!0,groupsResponseFormat:"DELIMITED"}}),this.addInput({label:(0,s.loc)("app.radius.advanced.groups.nameFormat"),type:"select",name:"__groupNameFormat__",options:a.default.groupNameFormatOptions,bindings:{__groupNameFormat__:function(e){"custom"!==e&&(this.model.set("__customGroupNameFormat__",""),this.model.set("groupsNameFormatExpression",a.default.groupNameFormatOptions[e]))}},tooltip:(0,s.loc)("app.radius.advanced.groups.nameFormat.tooltip"),showWhen:{groupsResponseEnabled:!0}}),this.addInput({type:"text",name:"__customGroupNameFormat__",errorField:"groupsNameFormatExpression",showWhen:{groupsResponseEnabled:!0,__groupNameFormat__:"custom"}}),this.listenTo(this.model,"change:__edit__",this.setDelimiterLimit)},setDelimiterLimit:function(){this.$(".delimiter input").attr("maxLength","1")}})},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(2);t.default={groupNameFormatOptions:{default:"${group.name}",ou:"ou=${group.name}",custom:(0,n.loc)("custom")},ipAttributeOptions:{"User-Name":"1 User-Name","User-Password":"2 User-Password","CHAP-Password":"3 CHAP-Password","NAS-IP-Address":"4 NAS-IP-Address","NAS-Port":"5 NAS-Port","Service-Type":"6 Service-Type","Framed-Protocol":"7 Framed-Protocol","Framed-IP-Address":"8 Framed-IP-Address","Framed-IP-Netmask":"9 Framed-IP-Netmask","Framed-MTU":"12 Framed-MTU","Framed-Compression":"13 Framed-Compression","Login-IP-Host":"14 Login-IP-Host","Callback-Number":"19 Callback-Number",State:"24 State","Vendor-Specific":"26 Vendor-Specific","Called-Station-Id":"30 Called-Station-Id","Calling-Station-Id":"31 Calling-Station-Id","NAS-Identifier":"32 NAS-Identifier","Proxy-State":"33 Proxy-State","Login-LAT-Service":"34 Login-LAT-Service","Login-LAT-Node":"35 Login-LAT-Node","Login-LAT-Group":"36 Login-LAT-Group","CHAP-Challenge":"60 CHAP-Challenge","NAS-Port-Type":"61 NAS-Port-Type","Port-Limit":"62 Port-Limit","Login-LAT-Port":"63 Login-LAT-Port"},groupsAttributeOptions:{"Filter-Id":"11 Filter-Id",Class:"25 Class"}}},function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=i(2),o=i(533),a=n(o),r=i(534),l=n(r),p=s.View.extend({template:'<div class="saml-library-version-wrap"> \t        {{#if __isLegacy__}}\t          <span><a>{{i18n code="opensaml.library.version.legacy"}}</a></span> \t          <p class="explain-text">\t            {{i18n code="opensaml.library.version.explain.legacy"}}\t          </p>\t        {{else}}\t          <span><a>{{i18n code="opensaml.library.version.current"}}</a></span> \t          <p class="explain-text">\t            {{i18n code="opensaml.library.version.explain.current"}}\t          </p>\t        {{/if}}\t    </div>',events:{click:function(){this.model.trigger("showDialog")}}});t.default=s.Controller.extend({View:p,initialize:function(){var e=this;this.model=new a.default,this.model.fetch().done(function(){e.render()}),this.listenTo(this.model,"showDialog",s._.bind(this.showDialog,this)),this.listenTo(this.model,"dialogSaved",s._.bind(this.render,this))},showDialog:function(){var e=new l.default(this.toJSON({model:this.model}));this.listenTo(e,"saved",s._.bind(this.__onSave,this)),e.render()},__onSave:function(){this.render();var e="LEGACY"===this.model.get("version")?(0,s.loc)("opensaml.library.version.legacy"):(0,s.loc)("opensaml.library.version.current");(0,s.$)("#saml-library-version-readonly").text(e)}})},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(2);t.default=n.Model.extend({props:{version:{type:"string",values:["LEGACY","CURRENT"],required:!0}},derived:{__isLegacy__:{deps:["version"],fn:function(e){return"LEGACY"===e}}},url:"/api/internal/samlff"})},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(2),s=n.View.extend({className:"infobox",template:'\t        <span class="icon info-16-white"></span>\t        <p>{{i18n code="opensaml.library.version.change.info1"}}</p>\t        <p>{{i18n code="opensaml.library.version.change.info2.v3"}}</p>\t    '});t.default=n.FormDialog.extend({title:(0,n.loc)("opensaml.library.version.label"),params:{autoResize:!0},layout:"o-form-theme",autoSave:!0,initialize:function(){this.add(s),this.addInput({type:"select",name:"version",label:(0,n.loc)("opensaml.library.version.label"),options:{LEGACY:(0,n.loc)("opensaml.library.version.legacy"),CURRENT:(0,n.loc)("opensaml.library.version.current")}})}})},function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=i(2),o=i(64),a=n(o),r=i(255),l=n(r),p=i(258),d=n(p),c=i(503),u=n(c),h=i(504),m=n(h);t.default=s.Controller.extend({initialize:function(){this.previewSourceModel=new u.default.Model,this.appInstanceId=this.settings.get("appInstanceId"),this.oktaUserProfile=new l.default.Model({id:"default"},{expand:"schema"}),this.appUserProfile=new a.default.Model({id:"effective"},{instanceId:this.appInstanceId,expand:"schema"}),s._.bindAll(this,"renderPreviewView")},postRender:function(){s.$.when(this.oktaUserProfile.fetch(),this.appUserProfile.fetch()).done(this.renderPreviewView)},renderPreviewView:function(){var e=new d.default({sourceId:this.oktaUserProfile.get("id"),
targetId:this.appUserProfile.get("id"),includeAllTargetFields:!1}),t=this.previewSourceModel,i=new m.default({model:e,sourceModel:t,targetField:"userName"}),n=this.settings.get("provisionUserNameInput");this.add(i),(0,s.$)(n).on("change",function(){t.set("sourceExpression",(0,s.$)(this).val())}),t.set("sourceExpression",(0,s.$)(n).val())}})},function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=i(2),o=i(234),a=n(o),r=i(537),l=n(r);t.default=s.Controller.extend({initialize:function(){this.appInstance=new a.default.Model({id:this.options.appInstanceId}),this.appInstance.fetch({data:{expand:"implicit"}}).done(s._.bind(function(){this.addForm()},this))},addForm:function(){this.appInstance.get("_embedded").implicit.eligible&&this.add(new l.default(s._.extend(s._.pick(this.options,"settings"),{model:this.appInstance})))}})},function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=i(2),o=i(538),a=n(o),r=i(539),l=n(r),p=s.internal.views.forms.helpers.InputLabel,d={ACTIVE:(0,s.loc)("appinstance.signon.federationBrokerMode.form.status.label.ACTIVE"),ACTIVATING:(0,s.loc)("appinstance.signon.federationBrokerMode.form.status.label.ACTIVE"),DEACTIVATING:(0,s.loc)("appinstance.signon.federationBrokerMode.form.status.label.DEACTIVATING"),INACTIVE:(0,s.loc)("appinstance.signon.federationBrokerMode.form.status.label.INACTIVE")};t.default=s.Form.extend({layout:"o-form-theme",title:(0,s.loc)("appinstance.signon.federationBrokerMode.form.title"),read:!0,noButtonBar:!0,initialize:function(){this.toggle(),this.refreshData()},refreshData:function(){this.statusLabel&&this.statusLabel.remove(),this.actionButton&&this.actionButton.remove(),this.statusLabel=this.add(new p({label:d[this.model.get("_embedded").implicit.status],tooltip:(0,s.loc)("appinstance.signon.federationBrokerMode.form.status.label.tooltip"),className:p.prototype.className+" federation-broker-mode-label"})).last(),this.actionButton=this.add((0,s.createButton)({title:s._.bind(this.getButtonText,this),enabled:s._.bind(this.getButtonEnabled,this),click:s._.bind(this.getButtonClickHandler,this)})).last()},postRender:function(){this.$(".o-form-toggle").remove()},getButtonText:function(){var e=this.model.get("_embedded").implicit.status;return"ACTIVE"===e||"DEACTIVATING"===e||"ACTIVATING"===e?(0,s.loc)("appinstance.signon.federationBrokerMode.form.actionButton.disable.text"):(0,s.loc)("appinstance.signon.federationBrokerMode.form.actionButton.enable.text")},getButtonEnabled:function(){var e=this.model.get("_embedded").implicit.status;return!s._.contains(["ACTIVATING","DEACTIVATING"],e)},getButtonClickHandler:function(){var e=void 0,t=this.model.get("_embedded").implicit.status;"ACTIVE"===t?e=new l.default({model:this.model}):"INACTIVE"===t&&(e=new a.default({model:this.model})),e&&(e.render(),this.listenTo(e,"saved",this.handleModalSaved))},handleModalSaved:function(){this.model.fetch({data:{expand:"implicit"}}).done(s._.bind(this.refreshData,this))}})},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(2);t.default=n.FormDialog.extend({className:"federation-broker-mode-modal",title:"Federation Broker Mode",danger:!0,save:"Enable Federation Broker Mode",hasSavingState:!0,initialize:function(){var e=(0,n.createCallout)({type:"warning",content:'\t        <p>\t          {{{i18n code="appinstance.signon.federationBrokerMode.modal.enable.warning" arguments="label"}}}\t        </p>\t        <p>{{{i18n code="appinstance.signon.federationBrokerMode.modal.enable.list.header"}}}</p>\t        <ul>\t          <li>{{{i18n code="appinstance.signon.federationBrokerMode.modal.enable.list.items.1"}}}</li>\t          <li>{{{i18n code="appinstance.signon.federationBrokerMode.modal.enable.list.items.2"}}}</li>\t          <li>{{{i18n code="appinstance.signon.federationBrokerMode.modal.enable.list.items.3"}}}</li>\t          <li>{{{i18n code="appinstance.signon.federationBrokerMode.modal.enable.list.items.4"}}}</li>\t          <li>{{{i18n code="appinstance.signon.federationBrokerMode.modal.enable.list.items.5"}}}</li>\t        </ul>\t      ',label:this.model.get("label")});this.add(e),this.listenTo(this,"save",this.handleSave)},handleSave:function(){var e=this.model.get("settings");e.implicitAssignment=!0,this.model.set("settings",e),this.model.save().done(n._.bind(function(){this.trigger("saved"),this.remove()},this))}})},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(2);t.default=n.FormDialog.extend({className:"federation-broker-mode-modal",title:"Federation Broker Mode",danger:!0,save:"Disable Federation Broker Mode",hasSavingState:!0,initialize:function(){var e=(0,n.createCallout)({type:"warning",content:'\t        <p>\t          {{{i18n code="appinstance.signon.federationBrokerMode.modal.disable.warning" arguments="label"}}}\t        </p>\t        <p>\t          {{{i18n code="appinstance.signon.federationBrokerMode.modal.disable.description"}}}\t        </p>\t      ',label:this.model.get("label")});this.add(e),this.listenTo(this,"save",this.handleSave)},handleSave:function(){var e=this.model.get("settings");e.implicitAssignment=!1,this.model.set("settings",e),this.model.save().done(n._.bind(function(){this.trigger("saved"),this.remove()},this))}})},function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=i(2),o=i(239),a=n(o),r=i(269),l=n(r),p=i(433),d=n(p),c=i(254),u=n(c),h=i(234),m=n(h),f=i(235),g=n(f),_=i(261),v=n(_),y=i(262),b=n(y),A=i(64),w=n(A),I=i(541),E=n(I),N={assignedSearchQuery:void 0,unassignedSearchQuery:void 0,newlyAssignedUsersCount:0};t.default=s.Controller.extend({state:N,initialize:function(){s._.bindAll(this,"_displayEditModal"),this.appInstanceId=this.options.appInstanceId,this.initAppInstance(),this.getCollection(),this.add(E.default,{options:s._.extend(this.toJSON(),{appInstance:this.appInstance})}),this.addListeners()},initAppInstance:function(){this.appInstance=new m.default.Model({id:this.appInstanceId}),this.appInstance.fetch()},getCollection:function(){if(!this.collection){var e={__instanceId__:this.appInstanceId,expand:[g.default.EXPAND.USER]};this.settings.hasFeature("APPLICATION_ENTITLEMENT_POLICY")&&e.expand.push(g.default.EXPAND.METADATA),this.collection=new g.default.Collection(null,e)}this._fetch()},addListeners:function(){this.listenTo(this.state,"change:assignedSearchQuery updateApps",this.getCollection),this.listenTo(this.state,"unassignUser",this.unassignUser),this.listenTo(this.state,"assignUsers",this.renderAddModal),this.listenTo(this.state,"editAppUser",this.renderEditModal),this.listenTo(this.state,"closeModal",this.updateListView),this.listenTo(this.state,"compareWithAppError",this.onCompareWithAppError)},renderAddModal:function(){this.modal=new a.default({state:this.state,appInstance:this.appInstance,settings:this.settings}),this.modal.render()},renderEditModal:function(e){var t=this;this.appUser=this.collection.get(e),this.appUserProfile=new w.default.Model({id:"effective",userId:e},{instanceId:this.appInstanceId,expand:"schema"}),this.possibleValues=new v.default({__instanceId__:this.appInstanceId}),this.groupAppUserProfile=new w.default.Model({id:"groups"},{instanceId:this.appInstanceId,expand:"schema"}),this.appGroups=new l.default.Collection(null,{__instanceId__:this.appInstanceId,expand:[l.default.EXPAND.GROUP]});var i=void 0,n=void 0;this.userAssignmentHelpText?i=(new s.$.Deferred).resolve():(this.userAssignmentHelpText=new b.default({instanceId:this.appInstanceId}),i=this.userAssignmentHelpText.fetch()),n=this.settings.hasFeature("APPLICATION_ENTITLEMENT_POLICY")?this.appGroups.fetch():(new s.$.Deferred).resolve(),s.$.when(this.appUserProfile.fetch(),this.possibleValues.fetch(),this.groupAppUserProfile.fetch(),n,i).then(function(){return t.settings.hasFeature("APPLICATION_ENTITLEMENT_POLICY")?u.default.createAAEntitlementMeta(t.appUserProfile,t.appUser):null}).then(this._displayEditModal)},unassignUser:function(e){var t=this,i=this.collection.get(e),n=i.get("__displayUserName__")||(0,s.loc)("appinstance.userassignment.assigned.unassign.default.username");this.confirm({title:(0,s.loc)("appinstance.userassignment.assigned.unassign.confirm.title"),subtitle:(0,s.loc)("appinstance.unassign.confirm.content","messages",[n,this.appInstance.get("label")]),ok:function(){i.destroy().success(function(){t.notify("success",(0,s.loc)("appinstance.userassignment.assigned.unassign.confirm.success"))})}})},updateListView:function(){var e=this.state.get("newlyAssignedUsersCount");if(e>0){var t=void 0,i=e>1?(0,s.loc)("appinstance.userassignment.assigned.update.plural"):(0,s.loc)("appinstance.userassignment.assigned.update.single");switch(this.settings.get("appUniqueName")){case"omm_wifi":t=(0,s.loc)("wifi.name");break;default:t=(0,s.loc)("appinstance.name.shortGeneral")}this.notify("success",(0,s.loc)("appinstance.assigned.message.success","messages",[e,i,t])),this.getCollection()}this.state.set(s._.pick(N,"unassignedSearchQuery","newlyAssignedUsersCount"))},onCompareWithAppError:function(){this.notify("error",(0,s.loc)("appinstance.userassignment.user.comparewithapp.error"))},_displayEditModal:function(e){0!==this.appUserProfile.get("properties").length?(this.modal=new d.default({model:this.appUser.profile,appUser:this.appUser,properties:this.appUserProfile.get("properties"),possibleValues:this.possibleValues,state:this.state,instance:this.appInstance,title:(0,s.loc)("appinstance.userassignment.edit.title"),groupAppUserProperties:this.groupAppUserProfile.get("properties"),settings:this.settings,userAssignmentHelpText:this.userAssignmentHelpText,entitlementAttributes:e,appGroups:this.appGroups}),this.modal.render()):this.confirm({title:(0,s.loc)("appinstance.userassignment.edit.title"),subtitle:(0,s.loc)("profile.apps.bookmarkapp.assignment.modal.subtitle","messages",[this.appInstance.get("label")]),save:(0,s.loc)("ok")})},_fetch:s._.debounce(function(){this.collection.fetch({data:{q:this.state.get("assignedSearchQuery"),limit:50}})},50)})},function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=i(2),o=i(438),a=n(o);t.default=s.DataList.extend({initialize:function(){this.settings.hasPermission("Org:App:AssignUser")&&this.addToolbarComponent({type:"button",className:"button-primary",title:(0,s.loc)("appinstance.userassignment.assign.button"),click:function(){this.state.trigger("assignUsers")},initialize:function(){this.$el.hide(),this.listenTo(this.options.appInstance,"sync",this.toEnable)},postRender:function(){this.toEnable()},toEnable:function(){var e=this.options.appInstance.get("name"),t=this.options.appInstance.get("__isDirectoryApp__");e&&!t&&(this.$el.show(),this.options.appInstance.get("__active__")?this.enable():this.disable())}}),this.addToolbarComponent(a.default),this.addToolbarComponent({type:"search",field:"assignedSearchQuery",align:"right",minChars:1})},columns:[{label:(0,s.loc)("appinstance.userassignment.assigned.person"),template:(0,s.tpl)('\t          <a href="/admin/user/profile/view/{{id}}">{{__displayUserName__}}</a>\t          {{#if __oktaFirstName__}}<span class="user-name">{{__oktaUserName__}}</span>{{/if}}\t        ')},{label:(0,s.loc)("appinstance.userassignment.assigned.status"),className:"user-action",template:(0,s.tpl)('\t          <span class="status">{{__oktaStatusLabel__}}</span>\t          <span class="actions"></span>\t        '),initialize:function(){(this.settings.hasPermission("Org:App:AssignUser")||this.settings.hasPermission("edit"))&&this.add((0,s.createButton)({icon:"edit-16",click:function(){this.state.trigger("editAppUser",this.model.get("id"))},initialize:function(){this.disable(),this.listenTo(this.options.appInstance,"sync",this.toEnable)},postRender:function(){this.toEnable(),this.$el.attr("data-se",this.model.get("id")+"-edit"),this.$el.attr("aria-label",(0,s.loc)("appinstance.userassignment.edit.title"))},toEnable:function(){var e=this.options.appInstance.get("settings"),t=this.options.appInstance.get("name");this.options.appInstance.get("__active__")&&"omm_wifi"===t?"WPA_WPA2_ENTERPRISE"===e.app.securityProtocol&&this.enable():this.options.appInstance.get("__active__")&&this.enable()}}),".actions"),(this.settings.hasPermission("Org:App:AssignUser")||this.settings.hasPermission("assign"))&&this.add((0,s.createButton)({icon:"clear-input-16",click:function(){this.state.trigger("unassignUser",this.model.get("id"))},initialize:function(){this.disable(),this.listenTo(this.options.appInstance,"sync",this.toEnable)},postRender:function(){this.toEnable(),this.$el.attr("data-se",this.model.get("id")+"-unassign"),this.$el.attr("aria-label",(0,s.loc)("appinstance.userassignment.assigned.unassign.confirm.title"))},toEnable:function(){!this.model.get("groupManaged")&&this.options.appInstance.get("__active__")&&this.enable()}}),".actions")}}],emptyState:{title:(0,s.loc)("appinstance.userassignment.empty.title"),subtitle:!1}})},function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=i(2),o=i(64),a=n(o),r=i(543),l=n(r),p=i(544),d=n(p),c=i(545),u=n(c);t.default=s.Controller.extend({stateEvents:{enableRegistrationClick:"handleEnableRegistration",registrationSetupCancel:"handleRegistrationSetupCancel"},initialize:function(){this.registrationModel=new l.default.Model({clientId:this.options.clientId}),this.registrationModel.fetch().done(s._.bind(function(){this.handleAddRegistrationSettingsView(!1)},this)).fail(s._.bind(function(e){404===e.status&&this.addRegistrationDisabledView()},this))},handleEnableRegistration:function(){this.registrationDisabledView&&this.registrationDisabledView.remove(),this.handleAddRegistrationSettingsView(!0)},handleRegistrationSetupCancel:function(){this.registrationSettings&&this.registrationSettings.remove(),this.addRegistrationDisabledView()},handleAddRegistrationSettingsView:function(e){this.fetchSchema().done(s._.bind(function(){this.state.set("profileId",this.appUserProfile.get("id")),this.processSchemaInfo(),this.addRegistrationSettingsView(e)},this))},addRegistrationDisabledView:function(){this.registrationDisabledView=new d.default({state:this.state}),this.add(this.registrationDisabledView)},addRegistrationSettingsView:function(e){this.registrationSettings=new u.default(s._.omit(s._.extend(this.options,{model:this.registrationModel,state:this.state,isNew:e}),"el")),this.add(this.registrationSettings)},fetchSchema:function(){return this.appUserProfile=new a.default.Model({id:"effective"},{instanceId:this.options.appInstanceId,expand:"schema"}),this.appUserProfile.fetch()},processSchemaInfo:function(){var e=s._.pluck(s._.pluck((this.appUserProfile.get("_embedded")||{}).schemas,"schema"),"properties"),t=[],i=!1,n=!1;s._.each(e,function(e){s._.map(e,function(e,o){t.push(s._.extend({name:o},e)),"username"===o.toLowerCase()?i=!0:"password"===o.toLowerCase&&(n=!0)})}),i||t.push({name:"userName",type:"string",description:"User name",default:"User name"}),n||t.push({name:"password",type:"string",description:"Password",default:"Password"}),this.state.set("_schemaProperties_",t),this.registrationModel.set("_schemaProperties_",t)}})},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(2),s=(0,n.tpl)("/api/internal/v1/registration/{{clientId}}"),o={$schema:"http://json-schema.org/draft-04/schema#",description:"User Registration Form",type:"object",properties:{},required:[],fieldOrder:[]},a=[{name:"given_name",type:"string",description:"First name",default:"First name",required:!0},{name:"family_name",type:"string",description:"Last name",default:"Last name",required:!0},{name:"userName",type:"string",description:"Email",default:"Email",required:!0},{name:"password",type:"string",description:"Password",default:"Password",required:!0}],r=n.Model.extend({props:{id:"string",clientId:["string",!0],activateUser:["boolean",!0,!0],targetGroupId:"string",status:["string",!0,"ACTIVE"],createdDate:"integer",lastUpdate:"integer",profileSchema:["object",!0,o]},local:{_formFields_:["object",!0,a],_schemaProperties_:"object"},url:function(){return s(this.attributes)},parse:function(e){var t=e.profileSchema.properties,i=e.profileSchema.required,s=e.profileSchema.fieldOrder,o=void 0,a=void 0,r=[];return n._.each(s,function(e){a=n._.indexOf(i,e)>-1,o=t[e],r.push(n._.pick(n._.extend({name:e,required:a},o),["name","type","description","default","required"]))}),e._formFields_=r,e},toJSON:function(){var e=n.Model.prototype.toJSON.apply(this,arguments),t=this.get("_schemaProperties_"),i=[],s=[],o={};return n._.each(this.get("_formFields_"),function(e){var a=n._.findWhere(t,{name:e.name});o[e.name]=n._.omit(n._.extend(e,n._.pick(a,"type")),"name"),s.push(e.name),e.required&&i.push(e.name)}),e.profileSchema.properties=o,e.profileSchema.fieldOrder=s,e.profileSchema.required=i,e}});t.default={Model:r}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(2);t.default=n.View.extend({className:"registration-disabled-state",template:(0,n.tpl)('\t    <span class="icon icon-16 icon-only person-add-16"></span>\t    <h3>Registration Disabled</h3>\t    <h4>\t      Registration sets up a user registration page that will allow users to create their own accounts for this app\t    </h4>\t  '),initialize:function(){var e=(0,n.createButton)({title:"Enable Registration",className:"button-primary",click:function(){this.state.trigger("enableRegistrationClick")}});this.add(e)}})},function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=i(2),o=i(546),a=n(o),r=s.View.extend({className:"registration-form-settings-explain",template:(0,s.tpl)('\t        These are the fields the user will see when registering.\t        The values entered populate the user profile for this app.\t        <a href="/admin/universaldirectory#app/{{profileId}}" target="_blank">Configure the app profile</a>\t      '),getTemplateData:function(){return{profileId:this.state.get("profileId")}}});t.default=s.Form.extend({layout:"o-form-theme",title:"Registration",read:!0,autoSave:!0,initialize:function(){this.addFormInputs(),this.addEventListeners()},addFormInputs:function(){this.addSectionTitle("Account"),this.addInput({name:"status",type:"select",label:"End user self registration",options:{ACTIVE:"Enabled",INACTIVE:"Disabled"}}),this.addInput({name:"targetGroupId",type:"grouppicker",label:"Assign to group",tooltip:"\t        Users registered through this app will be assigned to the group selected here.\t        This will determine their app assignments, permissions, and security policies.\t      ",explain:s.View.extend({template:(0,s.tpl)('\t          A users group memberships determine which password policy applies.\t          <a href="/admin/access/policies" target="_blank">Go to password policies</a>\t        ')}),params:{selectionLimit:1},to:function(e){return e?e[0]:null},from:function(e){return e?e.split(","):[]}}),this.addDivider(),this.addSectionTitle("Registration Form"),this.add(new r({state:this.state}));var e=s._.pluck(this.state.get("_schemaProperties_"),"name");this.addInput({className:"registration-form-settings-list-input",type:"list",label:"Registration form fields",name:"_formFields_",tooltip:'When "Required" is checked, a user must provide a value for the field before they can submit the form.',params:{addLabel:"Add Field"},input:[{label:"Field",type:"select",name:"name",options:s._.object(e,e)},{label:"Form label",type:"text",name:"description"},{label:"Required",name:"required",placeholder:!1,input:a.default}]}),this.addDivider(),this.addSectionTitle("Onboarding"),this.addInput({name:"activateUser",type:"radio",label:"Activation requirements",options:{false:"User cannot log in until they verify email address",true:"Registration results in immediate session"},explain:s.View.extend({template:(0,s.tpl)('\t          Okta sends the Registration - Activation email for the first option and the \t          Registration - Verification for the second.  The content of these emails is determined by email templates.\t          <a href="/admin/settings/emails" target="_blank">Go to email templates</a>\t        ')}),to:function(e){return"true"===e},from:function(e){return e===!0?"true":"false"}})},addEventListeners:function(){this.options.isNew&&(this.toggle(),this.listenToOnce(this,"saved",function(){this.$(".o-form-toggle").show()}),this.listenToOnce(this,"cancel",function(){this.state.trigger("registrationSetupCancel")}))},postRender:function(){this.options.isNew&&(this.$(".o-form-toggle").hide(),this.options.isNew=!1)}})},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(2),s=n.internal.views.forms.inputs.CheckBox;t.default=s.extend({initialize:function(){this.listenTo(this.model,"change:name",function(){this.checkDisabled()}),this.checkDisabled()},checkDisabled:function(){n._.contains(["given_name","family_name","userName","password"],this.model.get("name"))?(this.model.set(this.options.name,!0),this.render(),n._.contains(["userName","password"],this.model.get("name"))&&this.disable()):(this.model.set(this.options.name,!1),this.render(),this.enable())}})},function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=i(2),o=i(548),a=n(o);t.default=s.Controller.extend({initialize:function(){this.add(new a.default({links:this.settings.get("links")}))}})},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(2);t.default=n.View.extend({template:'\n    <div class="samples rounded-4">\n      <h4>Quick Start Guides</h4>\n      <ul>\n      {{#each links}}\n        <li class="icon-32">\n          <a href="{{href}}" target="_blank" class="icon code-{{name}}-32">{{label}} &#8599;</a>\n        </li>\n      {{/each}}\n      </ul>\n    </div>\n  ',getTemplateData:function(){var e=this.options.links;return{links:e}}})},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=[{name:"angular",href:"https://developer.okta.com/quickstart/#/angular/",label:"Angular",platforms:["BROWSER"]},{name:"ios",href:"https://developer.okta.com/quickstart/#/ios/",label:"iOS",platforms:["NATIVE"]},{name:"javascript",href:"https://developer.okta.com/quickstart/#/widget/",label:"JavaScript",platforms:["BROWSER"]},{name:"react",href:"https://developer.okta.com/quickstart/#/react/",label:"React",platforms:["BROWSER"]},{name:"node",href:"https://developer.okta.com/quickstart/#/widget/nodejs",label:"Node.js",platforms:["WEB","SERVICE"]},{name:"java",href:"https://developer.okta.com/quickstart/#/widget/java",label:"Java",platforms:["WEB","SERVICE"]},{name:"dotnet",href:"https://developer.okta.com/quickstart/#/widget/dotnet",label:".NET",platforms:["WEB","SERVICE"]},{name:"php",href:"https://developer.okta.com/quickstart/#/widget/php",label:"PHP",platforms:["WEB","SERVICE"]}]},function(e,t,i){var n,s;n=[i(2),i(551),i(552)],s=function(e,t,i){var n=e.$,s=e._;return e.View.extend({groupPickerForm:t,initialize:function(){this.model=new i,this.addGroupPickerForm(),this.listenTo(this.model,"change:groups",function(){this.trigger("groupSelected",this.model.get("groups"))}),this.listenTo(this,"setGroupIds",function(e){var t=this.model.get("groups");t&&t.length&&n(e).val(t.join(","))})},addGroupPickerForm:function(){this.add(this.groupPickerForm,{options:{model:this.model}})},preRender:function(){s.isFunction(this.options.onControllerCreated)&&this.options.onControllerCreated()}})}.apply(t,n),!(void 0!==s&&(e.exports=s))},function(e,t,i){var n,s;n=[i(2)],s=function(e){return e.Form.extend({className:"standalone-grouppicker",noButtonBar:!0,initialize:function(){this.addInput(this.getGroupPickerConfig())},getGroupPickerConfig:function(){return{type:"grouppicker",name:"groups",label:!1,wide:!0,placeholder:e.loc("group.picker.placeholder"),params:{keepEmpty:!0}}}})}.apply(t,n),!(void 0!==s&&(e.exports=s))},function(e,t,i){var n,s;n=[i(2)],s=function(e){return e.Model.extend({props:{groups:{type:"array",value:[]}}})}.apply(t,n),!(void 0!==s&&(e.exports=s))}]);